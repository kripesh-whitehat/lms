(self.webpackChunkwebpack_app=self.webpackChunkwebpack_app||[]).push([[913],{2399:(t,e,n)=>{"use strict";n.r(e),n.d(e,{setDefaultTrendBy:()=>r});var a=n(7997),r=function(t){return{type:a.SET_DEFAULT_TREND_BY,trendBy:t}}},5113:(t,e,n)=>{"use strict";n.r(e),n.d(e,{setTotalBudgetAmount:()=>r});var a=n(7997),r=function(t){return{type:a.SET_TOTAL_BUDGET_AMOUNT,budgetedAmount:t}}},1396:(t,e,n)=>{"use strict";n.r(e),n.d(e,{fetchTrendUnitGroupByGl:()=>r,setGlFilters:()=>i,updateGLFilters:()=>o,selectAllGLFilters:()=>s,fetchItemGL:()=>l,itemSelectAll:()=>c,switchToSingleGL:()=>u,switchChartType:()=>d,fetchInventoryItemLoc:()=>p,fetchInvoicesGL:()=>f,setItems:()=>h,updateItemCheckbox:()=>m,fetchInvoicesByItem:()=>y,setItemsUsageDisplay:()=>g});var a=n(7997),r=function(t){return{type:a.FETCH_TREND_UNIT_GROUP_BY_GL,params:t}},i=function(t){return{type:a.SET_GL_FILTERS,glFilters:t}},o=function(t,e){return{type:a.UPDATE_GL_FILTERS,glFilter:t,isChecked:e}},s=function(t){return{type:a.SELECT_ALL_GL_FILTERS,isChecked:t}},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{type:a.FETCH_ITEM_GL,glName:t,glCode:e,updateDataOnly:n,byInvoiceDate:r}},c=function(t){return{type:a.SELECT_ALL_ITEMS,isChecked:t}},u=function(t){return{type:a.SWITCH_TO_SINGLE_GL,glName:t}},d=function(t){return{type:a.SWITCH_CHART_TYPE,chartType:t}},p=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:a.FETCH_ITEM_INV_LOC,startDate:t,unitInventoryItemId:e,byInvoiceDate:n}},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:a.FETCH_INVOICES_GL,glCode:t,byInvoiceDate:e}},h=function(t){return{type:a.SET_ITEMS_TID,itemsTid:t}},m=function(t,e){return{type:a.UPDATE_ITEM_TID,itemTid:t,isChecked:e}},y=function(t){return{type:a.FETCH_INVOICES_BY_ITEM,params:t}},g=function(t){return{type:a.SET_ITEMS_USAGE_DISPLAY,displayType:t}}},966:(t,e,n)=>{"use strict";n.r(e),n.d(e,{setSelectedRecipes:()=>r,updatedSelectedRecipes:()=>i});var a=n(7997),r=function(t){return{type:a.SET_SELECTED_RECIPES,selectedRecipes:t}},i=function(t,e){return{type:a.UPDATE_SELECTED_RECIPES,recipeId:t,checked:e}}},4792:(t,e,n)=>{"use strict";n.r(e),n.d(e,{setByInvoiceDate:()=>r});var a=n(7997),r=function(t,e){return{type:a.SET_BY_INVOICE_DATE,widgetName:t,byInvoiceDate:e}}},9119:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(8661),r=n(2986),i=n.n(r),o=function(t){var e=t.isLoading?"flex":"none";return a.default.createElement("div",{className:"spinner-container",style:{display:e}},a.default.createElement(i(),{name:"ball-pulse-rise",color:"orange",id:"spinner"}))};o.defaultProps={isLoading:!1};const s=o},4315:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(8661),u=n(533),d=n(1271);var p=function(t){(0,o.default)(d,t);var e,n,u=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=u.call(this,t)).mapHistory=e.mapHistory.bind((0,i.default)(e)),e.handleClick=e.handleClick.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"mapHistory",value:function(){var t=this,e=this.props.history;return e.slice().map((function(n,a){var r=(n.breadcrumb?String(n.breadcrumb).replace(/_/gi," "):n.chartType).toUpperCase();return a===e.length-1?c.default.createElement("div",{className:"bread-crumb",id:"active",key:Math.random()},c.default.createElement("a",{id:"active",className:"bread-crumb-text",onClick:function(e){return t.handleClick(e,n.chartType,a)}},r)):c.default.createElement("div",{className:"bread-crumb",key:Math.random()},c.default.createElement("a",{className:"bread-crumb-text",onClick:function(e){return t.handleClick(e,n.chartType,a)}},r),c.default.createElement("div",{className:"bread-crumb-arrow"}," ","=>"," "))}))}},{key:"handleClick",value:function(t,e,n){t.preventDefault();var a=this.props,r=a.widgetId;a.printView||(this.props.setChartType(r,e),this.props.sliceHistory(r,n))}},{key:"render",value:function(){return c.default.createElement("div",{id:"bread-crumbs-container"},this.mapHistory())}}]),d}(c.Component);p.defaultProps={history:[]};const f=(0,u.connect)(null,{setChartType:d.setChartType,sliceHistory:d.sliceHistory})(p)},2490:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var a=n(6156),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(8840),d=n.n(u),p=n(857),f=n.n(p),h=n(6486),m=n.n(h),y=n(8661);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _=function(t){(0,s.default)(u,t);var e,n,a=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(t){var e;return(0,r.default)(this,u),(e=a.call(this,t)).state={display:"flex",chartId:String(Math.random())},e.handleDataClick=e.handleDataClick.bind((0,o.default)(e)),e.updateCategories=e.updateCategories.bind((0,o.default)(e)),e.updatePlotLines=e.updatePlotLines.bind((0,o.default)(e)),e.updateFourRBubbleChart=e.updateFourRBubbleChart.bind((0,o.default)(e)),e.barXAxisConfig=e.barXAxisConfig.bind((0,o.default)(e)),e}return(0,i.default)(u,[{key:"componentDidMount",value:function(){var t=this.props,e=t.config,n=t.modules,a=t.theme,r=t.printView;f()(d()),n&&n.forEach((function(t){t(d())})),d().theme={colors:a,chart:{backgroundColor:null,style:{fontFamily:"Dosis, sans-serif"},animation:!r||{duration:100}},title:{style:{fontSize:"16px",fontWeight:"bold",textTransform:"uppercase"}},xAxis:{gridLineWidth:1},yAxis:{minorTickInterval:"auto",title:{style:{textTransform:"uppercase"}},labels:{style:{fontSize:"12px"}}},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"whitesmoke"},d().setOptions(d().theme);var i={point:{events:{click:this.handleDataClick}}},o=this.getSize(),s=o.width,l=o.height,c=v(v({},e),{},{xAxis:v(v({},e.xAxis),{},{labels:this.barXAxisConfig()}),chart:v(v({},e.chart),{},{width:s,height:l}),plotOptions:v(v({},e.plotOptions),{},{series:i})});this.chart=new(d().Chart)(this.state.chartId,c)}},{key:"handleDataClick",value:function(t){var e=this.props,n=e.onDataClick;e.printView||n(t)}},{key:"updateCategories",value:function(t){t.xAxis&&t.xAxis.categories&&this.chart.xAxis[0].setCategories(t.xAxis.categories)}},{key:"barXAxisConfig",value:function(){var t=this.props,e=t.config,n=t.fullscreen,a=m().isEmpty(e.chart)?null:e.chart.type,r={style:{fontSize:"12px",whiteSpace:"nowrap"}};return e&&e.force&&e.xAxis&&e.xAxis.labels&&(r=v(v({},r),e.xAxis.labels)),"bar"===a?v(v({},r),{},{formatter:function(){if("function"!=typeof this.value.substring)return this.value;var t=n?35:14;return this.value.length>t?"".concat(this.value.substring(0,t),"..."):this.value}}):r}},{key:"updatePlotLines",value:function(t){var e=this;["xAxis","yAxis"].forEach((function(n){t[n]&&t[n].plotLines&&t[n].plotLines[0]&&(e.chart[n][0].options.plotLines[0].label.text=t[n].plotLines[0].label.text,e.chart[n][0].options.plotLines[0].value=t[n].plotLines[0].value,e.chart[n][0].update())}))}},{key:"updateFourRBubbleChart",value:function(t){for(var e=this;this.chart.series.length>0;)this.chart.series[0].remove(!0);t.forEach((function(t){e.chart.addSeries(t)}))}},{key:"updateSeries",value:function(t){var e=this;0===this.chart.series.length?t.forEach((function(t){e.chart.addSeries(t)})):this.chart.series.forEach((function(e,n){e.update(t[n])}))}},{key:"updateDrilldown",value:function(t){this.chart.options.drilldown&&t.drilldown&&(this.chart.options.drilldown.series=t.drilldown.series)}},{key:"getSize",value:function(){var t=this.props,e=t.widgetHeight,n=t.widgetWidth,a=t.widthRatio,r=t.heightRatio,i=t.fullscreen,o=t.fullscreenHeightRatio;if(t.printView)return{width:900,height:850*r};if(!i)return{width:a*n,height:r*e};var s=document.getElementsByClassName("fruit-main-chart"),l=s[s.length-1];return{width:l.offsetWidth,height:l.offsetHeight*o}}},{key:"setDimensions",value:function(){var t=this.getSize(),e=t.width,n=t.height;this.chart.setSize(e,n)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.config,a=e.type,r=e.theme;if(this.setDimensions(),d().theme={colors:r},d().setOptions(d().theme),!m().isEqual(n,t.config)){if("4r_menu_recipe_by_type_company"===a)return this.updateFourRBubbleChart(n.series),this.chart.redraw();this.updateSeries(n.series),this.chart.setTitle({text:n.title.text}),this.updateDrilldown(n),this.updateCategories(n),this.updatePlotLines(n),this.chart.redraw()}}},{key:"render",value:function(){return y.default.createElement("div",{style:{display:"flex"},id:this.state.chartId,className:"chart"})}}]),u}(y.Component);_.defaultProps={type:"Chart",widthRatio:1,heightRatio:1,fullscreenHeightRatio:.85,theme:[],onDataClick:function(){return null}};const b=_},3203:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var a=n(8661),r=n(2490),i=n(4606),o=function(t){var e=t.dataIsPresent,n=t.emptyDataMessage,o=t.type,s=t.reports,l=t.id,c=t.is_bubble,u=(s[l].errors?s[l].errors[o]:null)||n;return e?c?a.default.createElement(i.default,t):a.default.createElement(r.default,t):a.default.createElement("div",{className:"chart-wrapper"},a.default.createElement("div",{className:"chart-wrapper-message"},u))};o.defaultProps={dataIsPresent:!0,emptyDataMessage:"No Data Available"};const s=o},8867:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>A});var a=n(2122),r=n(6156),i=n(6610),o=n(5991),s=n(3349),l=n(379),c=n(6070),u=n(7608),d=n(6486),p=n.n(d),f=n(9242),h=n.n(f),m=n(5697),y=n.n(m),g=n(8661),v=n(937),_=n(9968),b=n.n(_),C=n(533),D=n(1271),k=n(5971),E=n(2322),w=n(2890),R=n(3661),P=n(5196),I=n(4535),S=n(3730);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(t){(0,l.default)(d,t);var e,n,r=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,u.default)(e);if(n){var r=(0,u.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,c.default)(this,t)});function d(t){var e;return(0,i.default)(this,d),(e=r.call(this,t)).state={widget:{},fullscreenOpen:!1},e.mapWidgets=e.mapWidgets.bind((0,s.default)(e)),e.handleLayoutChange=e.handleLayoutChange.bind((0,s.default)(e)),e.getWidget=e.getWidget.bind((0,s.default)(e)),e.widgetsToLayout=e.widgetsToLayout.bind((0,s.default)(e)),e.layoutToWidgets=e.layoutToWidgets.bind((0,s.default)(e)),e.onExpandClick=e.onExpandClick.bind((0,s.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,s.default)(e)),e}return(0,o.default)(d,[{key:"UNSAFE_componentWillUpdate",value:function(t){this.props.company.token!==t.company.token&&this.props.fetchDashboards(this.props.dashboardId)}},{key:"mapWidgets",value:function(){var t=this;return this.props.widgets.filter((function(t){return!p().isEmpty(t.id)})).map((function(e){return g.default.createElement(S.default,{key:e.id},t.getWidget(e))}))}},{key:"widgetsToLayout",value:function(){return this.props.widgets.map((function(t){return{x:t.x,y:t.y,w:t.w,h:t.h,i:t.id}}))}},{key:"layoutToWidgets",value:function(t){var e=this.props.widgets;return t.map((function(t){var n=t.x,a=t.y,r=t.w,i=t.h;return x(x({},e.find((function(e){return e.id===t.i}))),{},{x:n,y:a,w:r,h:i})}))}},{key:"getWidget",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?{admin:!1,fullscreen:!0,onCompressClick:this.onCompressClick}:{};switch(t.name){case"vendor_spend":return g.default.createElement(I.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n));case"ap_spend":return g.default.createElement(k.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n));case"cost":return g.default.createElement(w.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n));case"four_r":return g.default.createElement(R.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n));case"budget_vs_actual":return g.default.createElement(E.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n));default:return g.default.createElement(k.default,(0,a.default)({admin:this.props.admin,key:t.id,onExpandClick:this.onExpandClick,id:t.id},n))}}},{key:"handleLayoutChange",value:function(t){}},{key:"onExpandClick",value:function(t){var e=this.props.widgets.find((function(e){return e.id===t}));this.setState({fullscreenOpen:!0,widget:e}),this.props.setDashboardState({fullscreenOpen:!0,activeWidget:e})}},{key:"onCompressClick",value:function(){this.setState({fullscreenOpen:!1}),this.props.setDashboardState({fullscreenOpen:!1,activeWidget:null,updatedInFullscreen:!1})}},{key:"render",value:function(){var t=this,e=this.props.connectDropTarget,n=this.widgetsToLayout(),a=this.state.widget;return p().isEmpty(this.props.company.locations)?g.default.createElement("div",null):e(g.default.createElement("div",{className:"wd-100"},g.default.createElement("div",{className:"dashboard-drop-container",style:{backgroundColor:"inherit"}},g.default.createElement(b(),{style:B.container,className:"layout",layout:n,cols:38,rowHeight:30,width:1200,draggableCancel:"input,textarea, button, a, rect, path",onLayoutChange:this.handleLayoutChange,isDraggable:!1,isResizable:!1},this.mapWidgets()),g.default.createElement(P.default,{widgetContainer:!0,visible:this.state.fullscreenOpen,close:function(){return t.setState({fullscreenOpen:!1})}},this.getWidget(a,!0)))))}}]),d}(g.Component),B={container:{height:"100%",overflowY:"scroll"}};O.defaultProps={isStatic:!1},O.propTypes={layout:y().array.isRequired,widgets:y().array.isRequired};const A=h()((0,v.DropTarget)("widget",{drop:function(){return{name:"Dustbin"}}},(function(t,e){return{connectDropTarget:t.dropTarget(),isOver:e.isOver(),canDrop:e.canDrop()}})),(0,C.connect)((function(t){return{layout:t.dashboard.layout,widgets:t.widgets.widgets,company:t.company}}),{fetchDashboards:D.fetchDashboards,fetchDashboard:D.fetchDashboard,updateWidgets:D.updateWidgets,setDashboardState:D.setDashboardState}))(O)},8016:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6156),u=n(8661),d=n(968);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){(0,c.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const h=function(t){(0,o.default)(h,t);var e,n,p=(e=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function h(){var t;(0,a.default)(this,h);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=p.call.apply(p,[this].concat(n)),(0,c.default)((0,i.default)(t),"downloadToCSV",(function(){t.props.isReactTable?(0,d.exportReactTable)(t.props.tableSelector,t.props.fileName):(0,d.exportTableToCSV)(t.props.tableSelector,t.props.fileName)})),t}return(0,r.default)(h,[{key:"render",value:function(){return u.default.createElement("div",{style:f({},this.props.style)},u.default.createElement("a",{onClick:this.downloadToCSV},"(CSV)"))}}]),h}(u.Component)},5196:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(5697),u=n.n(c),d=n(8661),p=n(533);var f=function(t){(0,o.default)(u,t);var e,n,c=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function u(t){var e;return(0,a.default)(this,u),(e=c.call(this,t))._handleKeyDown=e._handleKeyDown.bind((0,i.default)(e)),e}return(0,r.default)(u,[{key:"_handleKeyDown",value:function(t){"Escape"===t.code&&this.props.close()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"render",value:function(){var t=this.props,e=t.widgetContainer,n=t.sidebarOpen&&e?"backdrop backdrop-sidebar-open":"backdrop";return this.props.visible?d.default.createElement("div",{className:n},d.default.createElement("div",{className:"dialog"},this.props.children)):null}}]),u}(d.default.Component);f.defaultProps={primaryButtonClass:"",widgetContainer:!1},f.propTypes={close:u().func.isRequired,visible:u().bool};const h=(0,p.connect)((function(t){return{sidebarOpen:t.dashboard.sidebarOpen}}))(f)},5544:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6156),u=n(8661),d=n(533),p=n(4792);var f=function(t){(0,o.default)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(){var t;(0,a.default)(this,p);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=d.call.apply(d,[this].concat(n)),(0,c.default)((0,i.default)(t),"handleDateToggleChange",(function(e){t.props.setByInvoiceDate(t.props.widget.name,"invoice_date"===e.target.value)})),t}return(0,r.default)(p,[{key:"render",value:function(){var t=this.props,e=t.widgetId,n=t.widget,a=t.widget_settings[n.name].byInvoiceDate,r="invoice_date_toggle-".concat(n.name,"-").concat(e);return u.default.createElement("div",{className:"invoice-date-toggle",onChange:this.handleDateToggleChange},u.default.createElement("div",{className:"invoice-date-toggle-input"},u.default.createElement("input",{type:"radio",name:r,value:"submitted_date",defaultChecked:!a}),u.default.createElement("label",{className:"wd-80 white-space-nowrap",htmlFor:"invoice_date_toggle"},"Submitted Date")),u.default.createElement("div",{className:"invoice-date-toggle-input"},u.default.createElement("input",{type:"radio",name:r,value:"invoice_date",defaultChecked:a}),u.default.createElement("label",{className:"wd-80 white-space-nowrap",htmlFor:"invoice_date_toggle"},"Invoice Date")))}}]),p}(u.Component);const h=(0,d.connect)((function(t){return{widget_settings:t.widget_settings}}),{setByInvoiceDate:p.setByInvoiceDate})(f)},8364:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6156),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(8661),d=n(533),p=n(1271);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(t){(0,s.default)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=d.call(this,t)).handleRegionCheckboxChange=e.handleRegionCheckboxChange.bind((0,o.default)(e)),e.setReduxLocations=e.setReduxLocations.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"componentDidUpdate",value:function(){this.setReduxLocations()}},{key:"UNSAFE_componentWillUpdate",value:function(t){t.locations_by_region!==this.props.locations_by_region&&this.setState(this.buildState(t))}},{key:"setReduxLocations",value:function(){var t=this.state||{},e=Object.entries(t).map((function(t){return h(h({},t[1]),{},{name:t[0]})}));this.props.setLocations(e)}},{key:"checkRegions",value:function(t){var e=this,n=h(h({},this.state),t);Object.entries(n).filter((function(t){return"region"===t[1].type})).map((function(t){return t[0]})).forEach((function(t){0===Object.values(n).filter((function(e){return e.region===t&&e.checked})).length?e.setState((0,a.default)({},t,h(h({},e.state[t]),{},{checked:!1}))):e.setState((0,a.default)({},t,h(h({},e.state[t]),{},{checked:!0})))}))}},{key:"buildState",value:function(t){var e=t.locations_by_region,n={};return e.forEach((function(t){n[t.name]={checked:!0,type:"region",division_id:t.division_id},t.locations.forEach((function(e){n[e.name]={checked:!0,type:"location",region:t.name,unit_id:e.unit_id}}))})),n}},{key:"handleRegionCheckboxChange",value:function(t,e,n){var r=this,i=this.state[e].checked;this.setState((0,a.default)({},e,h(h({},this.state[e]),{},{checked:!i}))),n.forEach((function(t){r.setState((0,a.default)({},t.name,h(h({},r.state[t.name]),{},{checked:!i})))}))}},{key:"handleLocationCheckboxChange",value:function(t,e){var n=this.state[e].checked,r=(0,a.default)({},e,h(h({},this.state[e]),{},{checked:!n}));this.setState(r),this.checkRegions(r)}},{key:"mapLocations",value:function(t){var e=this;return t.map((function(t){var n;return u.default.createElement("div",{className:"location-checkbox-container",key:t.name},u.default.createElement("input",{className:"location-checkbox",type:"checkbox",id:t.name,value:t.name,checked:null===(n=e.state[t.name])||void 0===n?void 0:n.checked,onChange:function(n){return e.handleLocationCheckboxChange(n,t.name)}}),u.default.createElement("label",{className:"location-checkbox-label",htmlFor:t.name},t.name))}))}},{key:"mapLocationsByRegion",value:function(){var t=this,e=this.props.locations_by_region;return e===[]?u.default.createElement("div",null):e.map((function(e){var n;return u.default.createElement("div",{className:"region-checkbox-container",key:e.name},u.default.createElement("input",{type:"checkbox",id:e.name,value:e.name,checked:null===(n=t.state[e.name])||void 0===n?void 0:n.checked,onChange:function(n){return t.handleRegionCheckboxChange(n,e.name,e.locations)}}),u.default.createElement("label",{className:"region-checkbox-label",htmlFor:e.name},e.name),t.mapLocations(e.locations))}))}},{key:"render",value:function(){return null===this.state?u.default.createElement("div",null):u.default.createElement("div",{className:"location-picker-container"},u.default.createElement("div",{className:"location-picker-title"},"Locations:"),this.mapLocationsByRegion())}}]),p}(u.Component);const y=(0,d.connect)((function(t){return{locations_by_region:t.company.locations_by_region}}),{fetchLocations:p.fetchLocations,setLocations:p.setLocations})(m)},8325:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(8661),u=n(533),d=n(1271),p=n(8364),f=n(9701);var h=function(t){(0,o.default)(d,t);var e,n,u=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=u.call(this,t)).state={sidebarOpen:!1,hovering:!1},e.onSetSidebarToggle=e.onSetSidebarToggle.bind((0,i.default)(e)),e.offHover=e.offHover.bind((0,i.default)(e)),e.onHover=e.onHover.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"onSetSidebarToggle",value:function(){var t=this.state.sidebarOpen;this.setState({sidebarOpen:!t,hovering:!1}),this.props.setDashboardState({sidebarOpen:!t})}},{key:"offHover",value:function(){var t=this.state.sidebarOpen;this.setState({hovering:!1}),t||this.props.setDashboardState({sidebarOpen:!1})}},{key:"onHover",value:function(){this.setState({hovering:!0}),this.props.setDashboardState({sidebarOpen:!0})}},{key:"render",value:function(){var t=this.state,e=t.sidebarOpen,n=t.hovering,a=e||n?"sidebar-open":"sidebar-collapsed",r=e?"black":"darkgrey";return c.default.createElement("div",{className:"sidebar-container ".concat(a),id:"sidebar",onMouseLeave:this.offHover},c.default.createElement("div",{className:"fa fa-bars  fa-lg sidebar-toggle",style:{color:r},onClick:this.onSetSidebarToggle,onMouseEnter:this.onHover}),c.default.createElement("div",{className:"sidebar-content"},c.default.createElement("button",{className:"btn btn-lg btn-primary btn-toggle",id:"add-widget-btn",onClick:this.props.openSelector,disabled:this.props.fullscreenOpen},"Add Widget"),c.default.createElement(f.default,null),c.default.createElement(p.default,null)))}}]),d}(c.Component);const m=(0,u.connect)((function(t){return{fullscreenOpen:t.dashboard.fullscreenOpen}}),{setDashboardState:d.setDashboardState})(h)},9701:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w});var a=n(8927),r=n(6156),i=n(6610),o=n(5991),s=n(3349),l=n(379),c=n(6070),u=n(7608),d=n(1271),p=n(6486),f=n.n(p),h=n(381),m=n.n(h),y=(n(626),n(8661)),g=n(6733),v=n.n(g),_=n(71),b=n(533),C=n(968);var D=["MM/DD/YYYY","MM/D/YYYY","M/DD/YYYY","M/D/YYYY","MM/DD/YY","MM/D/YY","M/DD/YY","M/D/YY"],k=m()().format("YYYY"),E=function(t){(0,l.default)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,u.default)(e);if(n){var r=(0,u.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,c.default)(this,t)});function p(t){var e;return(0,i.default)(this,p),(e=d.call(this,t)).handleKeyPress=e.handleKeyPress.bind((0,s.default)(e)),e.handleBlur=e.handleBlur.bind((0,s.default)(e)),e.handleDayPickerHide=e.handleDayPickerHide.bind((0,s.default)(e)),e.fetchCalendarRanges=e.fetchCalendarRanges.bind((0,s.default)(e)),e.handleRangeChange=e.handleRangeChange.bind((0,s.default)(e)),e.handleRangeStartDateChange=e.handleRangeStartDateChange.bind((0,s.default)(e)),e.handleRangeEndDateChange=e.handleRangeEndDateChange.bind((0,s.default)(e)),e.handleYearChange=e.handleYearChange.bind((0,s.default)(e)),e.mapDates=e.mapDates.bind((0,s.default)(e)),e.mapYears=e.mapYears.bind((0,s.default)(e)),e}return(0,o.default)(p,[{key:"UNSAFE_componentWillUpdate",value:function(t){f().isEqual(this.props.company.locations,t.company.locations)||this.fetchCalendarRanges(t)}},{key:"fetchCalendarRanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,n=t.company.locations,a=(0,C.selectedUnits)(n).map((function(t){return t.unit_id}));this.props.fetchDates(a,e)}},{key:"handleBlur",value:function(t,e){var n;(0,C.setFetching)(!1);var a=new Date(null===(n=t.relatedTarget)||void 0===n?void 0:n.getAttribute("aria-label")),i=m()(this.props[e]).format("MM/DD/YYYY");if(i!==a){var o=m()(a,D,!0);o.isValid()?(this.props.setGlobalReportAttribute((0,r.default)({},e,o||this.props[e])),this[e].setState({value:o.format("MM/DD/YYYY"),typedValue:o.format("MM/DD/YYYY")})):this[e].setState({value:i,typedValue:i})}}},{key:"handleDayPickerHide",value:function(t){this[t]&&this[t].getInput().blur()}},{key:"handleKeyPress",value:function(t){"Enter"===t.key&&t.target.blur()}},{key:"parseDay",value:function(t,e){var n=m()(t,D,!0);return n.isValid()?n.toDate():this.props[e].toDate()}},{key:"handleIconClick",value:function(t){this[t]&&this[t].getInput().focus()}},{key:"handleRangeChange",value:function(t){var e=t.target.value,n=this.props.company.calendarRanges;this.props.setCompanyData({currentRange:e}),this.props.setGlobalReportAttribute({startRange:"none"}),this.props.setGlobalReportAttribute({endRange:"none"}),f().isEmpty(n[e])}},{key:"handleRangeStartDateChange",value:function(t){var e=this.props,n=e.endRange,a=e.company,r=a.calendarRanges,i=a.currentRange,o=t.target.value;if(this.props.setGlobalReportAttribute({startDate:m()(o)}),this.props.setGlobalReportAttribute({startRange:o}),"none"===n||m()(n).isBefore(o)){var s=r[i].find((function(t){return t.StartDate===o})).EndDate;this.props.setGlobalReportAttribute({endRange:s}),this.props.setGlobalReportAttribute({endDate:m()(s)})}}},{key:"handleRangeEndDateChange",value:function(t){var e=this.props,n=e.startRange,a=e.company,r=a.calendarRanges,i=a.currentRange,o=t.target.value;if(this.props.setGlobalReportAttribute({endDate:m()(o)}),this.props.setGlobalReportAttribute({endRange:o}),"none"===n||m()(n).isAfter(o)){var s=r[i].find((function(t){return t.EndDate===o})).StartDate;this.props.setGlobalReportAttribute({startRange:s}),this.props.setGlobalReportAttribute({startDate:m()(s)})}}},{key:"handleYearChange",value:function(t){this.fetchCalendarRanges(this.props,t.target.value),this.props.setCompanyData({yearChanged:!0}),this.props.setGlobalReportAttribute({selectedYear:t.target.value}),this.props.setGlobalReportAttribute({startRange:"none"}),this.props.setGlobalReportAttribute({endRange:"none"})}},{key:"mapYears",value:function(){var t=Number(k)-2010+1;return(0,a.default)(Array(t).keys()).map((function(t){return k-t})).map((function(t){return y.default.createElement("option",{key:t,value:String(t)},t)}))}},{key:"mapDates",value:function(t){var e=this.props.company,n=e.currentRange,r=e.calendarRanges[n]||[],i={},o=f().compact(r.map((function(e){var a=m()(e[t]).format("MM/DD/YYYY"),r="WeeklyRanges"===n?" - Week ".concat(e.WeekNumber):"",o="Period ".concat(e.PeriodNumber).concat(r,": ").concat(a),s="YearlyRanges"===n?a:o;return void 0===i[s]?(i[s]=s,y.default.createElement("option",{key:"".concat(e[t],"-").concat(Math.random()),value:e[t]},s)):void 0})));return[y.default.createElement("option",{key:"no-range-".concat(t),value:"none",disabled:!0})].concat((0,a.default)(o))}},{key:"render",value:function(){var t=this,e=this.props,n=e.company.currentRange,a=e.startRange,r=e.endRange,i=e.selectedYear;return y.default.createElement("div",{className:"start-end-date-picker-container"},y.default.createElement("div",null,"Custom Start Date"),y.default.createElement("div",{className:"date-picker-row"},y.default.createElement(v(),{value:m()(this.props.startDate).format("MM/DD/YYYY"),formatDate:_.formatDate,parseDate:function(e){return t.parseDay(e,"startDate")},ref:function(e){return t.startDate=e},onDayPickerHide:function(){return t.handleDayPickerHide("startDate")},placeholder:"MM/DD/YYYY",inputProps:{onKeyPress:function(e){return t.handleKeyPress(e)},onBlur:function(e){return t.handleBlur(e,"startDate")},className:"date-picker-input"}}),y.default.createElement("i",{className:"fa fa-calendar fa-lg icon-inactive date-icon",onClick:function(){return t.handleIconClick("startDate")}})),y.default.createElement("div",null,"Custom End Date"),y.default.createElement("div",{className:"date-picker-row"},y.default.createElement(v(),{value:m()(this.props.endDate).format("MM/DD/YYYY"),formatDate:_.formatDate,parseDate:function(e){return t.parseDay(e,"endDate")},ref:function(e){return t.endDate=e},onDayPickerHide:function(){return t.handleDayPickerHide("endDate")},placeholder:"MM/DD/YYYY",inputProps:{onKeyPress:function(e){return t.handleKeyPress(e)},onBlur:function(e){return t.handleBlur(e,"endDate")},className:"date-picker-input"}}),y.default.createElement("i",{className:"fa fa-calendar fa-lg icon-inactive date-icon",onClick:function(){return t.handleIconClick("endDate")}})),y.default.createElement("br",null),y.default.createElement("div",null,"Reporting Year"),y.default.createElement("select",{className:"date-select",value:i,onChange:this.handleYearChange},this.mapYears()),y.default.createElement("div",null,"Range"),y.default.createElement("select",{onChange:this.handleRangeChange,value:n,className:"date-select"},y.default.createElement("option",{value:"WeeklyRanges"},"Week"),y.default.createElement("option",{value:"PeriodRanges"},"Period"),y.default.createElement("option",{value:"YearlyRanges"},"Year")),y.default.createElement("div",null,"Start Date"),y.default.createElement("select",{className:"date-select",onChange:this.handleRangeStartDateChange,value:a},this.mapDates("StartDate")),y.default.createElement("div",null,"End Date"),y.default.createElement("select",{className:"date-select",onChange:this.handleRangeEndDateChange,value:r},this.mapDates("EndDate")))}}]),p}(y.Component);const w=(0,b.connect)((function(t){var e=t.reports;return{startDate:e.startDate,endDate:e.endDate,startRange:e.startRange,endRange:e.endRange,selectedYear:e.selectedYear,company:t.company}}),{setGlobalReportAttribute:d.setGlobalReportAttribute,fetchDates:d.fetchDates,setCompanyData:d.setCompanyData})(E)},9668:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(8661),p=n(968);const f=function(t){(0,o.default)(f,t);var e,n,c=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function f(t){var e;return(0,a.default)(this,f),(e=c.call(this,t)).computeStats=e.computeStats.bind((0,i.default)(e)),e}return(0,r.default)(f,[{key:"computeStats",value:function(){var t=this.props.ratesAndDates;if(u().isEmpty(t))return{mean:0,sum:0,min:0,max:0,change:0,totalQuantity:0};var e=t.map((function(t){return parseFloat(t.rate)})),n=t.map((function(t){return parseFloat(t.rate)*parseFloat(t.qty)})),a=e.slice().sort((function(t,e){return t-e})),r=e.reduce((function(t,e){return t+e})),i=n.reduce((function(t,e){return t+e}));return{mean:r/e.length,sum:r,min:a[0],max:a[a.length-1],change:(e[0]-e[e.length-1])/e[0]*-100,total:i}}},{key:"render",value:function(){var t=this.computeStats();return d.default.createElement("div",null,d.default.createElement("div",{className:"stats-container"},d.default.createElement("div",{className:"stat-group"},d.default.createElement("div",{className:"stat-label"},"Low"),d.default.createElement("div",{className:"stat"},(0,p.formatIntoDollars)(t.min))),d.default.createElement("div",{className:"stat-group"},d.default.createElement("div",{className:"stat-label"},"Mean"),d.default.createElement("div",{className:"stat"},(0,p.formatIntoDollars)(t.mean))),d.default.createElement("div",{className:"stat-group"},d.default.createElement("div",{className:"stat-label"},"High"),d.default.createElement("div",{className:"stat"},(0,p.formatIntoDollars)(t.max))),d.default.createElement("div",{className:"stat-group"},d.default.createElement("div",{className:"stat-label"},"Total Amount"),d.default.createElement("div",{className:"stat"},(0,p.formatIntoDollars)(t.total))),d.default.createElement("div",{className:"stat-group"},d.default.createElement("div",{className:"stat-label"},"Change"),d.default.createElement("div",{className:"stat",style:{color:(0,p.getColorPosOrNeg)(t.change)}},t.change>0?"+":"",(0,p.formatPercent)(t.change)))))}}]),f}(d.Component)},2262:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(8661),p=n(5903);var f=function(t){(0,o.default)(f,t);var e,n,c=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function f(t){var e;return(0,a.default)(this,f),(e=c.call(this,t)).handleDataClick=e.handleDataClick.bind((0,i.default)(e)),e}return(0,r.default)(f,[{key:"componentDidUpdate",value:function(){}},{key:"handleDataClick",value:function(t){this.props.onDataClick(t)}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,a=e.printView,r=e.columns,i=e.subComponent,o=e.error,s=e.emptyDataMessage,l=e.filterable,c=e.showPagination,f=e.defaultPageSize,h=e.heightRatio;if(u().isEmpty(n))return d.default.createElement("div",{className:"chart-wrapper"},d.default.createElement("div",{className:"chart-wrapper-message"},o||s));var m=h?{height:"".concat(100*h,"%")}:{};return d.default.createElement(p.default,{data:n,columns:r,SubComponent:i,filterable:!a&&l,showPagination:!a&&c,defaultSorted:this.props.defaultSorted,defaultPageSize:a?n.length:f,style:m,getTrProps:function(e,n,a,r){return{onClick:function(e){return t.handleDataClick(n)}}}})}}]),f}(d.Component);f.defaultProps={onDataClick:function(){return null},filterable:!1,showPagination:!0,emptyDataMessage:"No Data Available",defaultPageSize:20},f.propTypes={};const h=f},3966:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>E});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(1354),u=n.n(c),d=n(6486),p=n.n(d),f=n(381),h=n.n(f),m=n(8661),y=n(533),g=n(1271),v=n(5175),_=n(968),b=n(9119),C=n(4315),D=n(5544);var k=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=c.call(this,t)).state={settingsVisible:!1},e.toggleSettingsVisible=e.toggleSettingsVisible.bind((0,i.default)(e)),e.dataIsAvailable=e.dataIsAvailable.bind((0,i.default)(e)),e.renderChildrenWhenLoaded=e.renderChildrenWhenLoaded.bind((0,i.default)(e)),e.printDocument=e.printDocument.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"UNSAFE_componentWillMount",value:function(){this.props.shouldFetch&&this.props.fetchReport(this.props.id,this.props.type,this.props.urlParams)}},{key:"UNSAFE_componentWillUpdate",value:function(t){this.props.shouldFetch&&(t.urlParams!==this.props.urlParams||!this.dataIsAvailable(t)&&this.isNotFetching(this.props))&&this.props.fetchReport(t.id,t.type,this.props.urlParams)}},{key:"printDocument",value:function(t){var e=JSON.stringify(this.props.state),n=u().AES.encrypt(e,"4edfe09ab69fdd12e23b58742596c71b").toString();localStorage.setItem("zaru-widgets",n),window.open("/?print_widget=true&widget_id=".concat(this.props.id))}},{key:"renderChildrenWhenLoaded",value:function(){if(this.dataIsAvailable(this.props)&&!this.props.cogsIsLoading)return this.props.children}},{key:"isNotFetching",value:function(t){var e=t.reports,n=t.id,a=t.type;return e[n]&&[a]&&!e[n].fetchingData}},{key:"dataIsAvailable",value:function(t){return this.isNotFetching(t)}},{key:"toggleSettingsVisible",value:function(){this.setState({settingsVisible:!this.state.settingsVisible})}},{key:"render",value:function(){var t=this,e=this.props,n=e.reports,a=e.title,r=e.id,i=e.admin,o=e.onExpandClick,s=e.onCompressClick,l=e.fullscreen,c=e.showDatesCanvas,u=e.dates,d=e.widgets,f=e.printView,y=e.company,g=c?u:{startDate:h()(n.startDate).format("MM/DD/YYYY"),endDate:h()(n.endDate).format("MM/DD/YYYY")},k={display:!c&&!l||p().isEmpty(g.startDate)?"none":"flex"},E=f?"widget-container print-view":"widget-container",w=d.find((function(t){return t.id===r})),R=f?"widget-header print-header":"widget-header";f&&document.querySelectorAll(":button").forEach((function(t){t.style.display="none"}));var P=this.props.cogsIsLoading;return m.default.createElement("div",{className:E,id:"".concat(r).concat(l?"-fullscreen":"")},m.default.createElement("div",{className:R},m.default.createElement("div",{className:"widget-title"},a),m.default.createElement("div",{className:"widget-group-name",style:{display:f?"flex":"none"}},y.group_name),m.default.createElement("div",{className:"widget-dates",style:k},g.startDate," - ",g.endDate),m.default.createElement("div",{className:"widget-dates",style:{display:f?"flex":"none"}},m.default.createElement("div",{className:"header-label"},"Report Generated: "),h()().format("MM/DD/YYYY h:mm A")),m.default.createElement("div",{className:"widget-dates",style:{display:f?"flex":"none"}},m.default.createElement("div",{className:"header-label"},"Divisions Reporting: "),"  ".concat((0,_.selectedDivisions)(y.locations).map((function(t){return" ".concat(t.name)})))),m.default.createElement("div",{className:"widget-dates",style:{display:f?"flex":"none"}},m.default.createElement("div",{className:"header-label"},"Units Reporting: "),"  ".concat((0,_.selectedUnits)(y.locations).map((function(t){return" ".concat(t.name.split(" ")[0])})))),m.default.createElement("div",{className:"widget-btns"},m.default.createElement("i",{className:"fa fa-trash widget-settings-icon","aria-hidden":"true",style:{display:i?"flex":"none"},onClick:function(){t.props.destroyWidget(r)},ref:function(e){return t.iconRef=e}}),m.default.createElement("i",{className:"fa fa-print widget-settings-icon","aria-hidden":"true",onClick:this.printDocument,style:{display:l&&!f?"flex":"none"},ref:function(e){return t.iconRef=e}}),m.default.createElement("i",{className:"fa fa-expand widget-settings-icon","aria-hidden":"true",style:{display:l?"none":"flex"},onClick:function(){return o(r)},ref:function(e){return t.iconRef=e}}),m.default.createElement("i",{className:"fa fa-close widget-settings-icon","aria-hidden":"true",style:{display:l&&!f?"flex":"none"},onClick:s,ref:function(e){return t.iconRef=e}}))),m.default.createElement(C.default,{history:w.history,widgetId:r,printView:f}),l&&m.default.createElement(D.default,{widget:w,widgetId:r}),m.default.createElement("div",{className:"widget-body"},m.default.createElement(b.default,{isLoading:!this.dataIsAvailable(this.props)||P}),!P&&this.renderChildrenWhenLoaded()),m.default.createElement("img",{className:"watermark",style:{display:f?"fixed":"none"},src:v.default,alt:"watermark"}))}}]),d}(m.Component);k.defaultProps={fetchReport:function(){return null},type:null,urlParams:"?start_date=01/01/2017&end_date=02/01/2017&user_id=140",shouldFetch:!0,admin:!1,fullscreen:!1,showDates:!1};const E=(0,y.connect)((function(t){return{reports:t.reports,widgets:t.widgets.widgets,state:t,company:t.company,cogsIsLoading:t.cogs.isLoading}}),{fetchReport:g.fetchReport,setDrilldownIndex:g.setDrilldownIndex,destroyWidget:g.destroyWidget})(k)},3730:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8661);const c=function(t){(0,i.default)(u,t);var e,n,c=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),c.apply(this,arguments)}return(0,r.default)(u,[{key:"pixelsFromString",value:function(t){return t.match(/\d/g).join("")}},{key:"dimensions",value:function(){var t=this.props.style,e=t.height,n=t.width;return{widgetHeight:this.pixelsFromString(e),widgetWidth:this.pixelsFromString(n)}}},{key:"render",value:function(){var t=this.dimensions(),e=t.widgetHeight,n=t.widgetWidth,a=l.default.Children.map(this.props.children,(function(t){return l.default.cloneElement(t,{widgetHeight:e,widgetWidth:n})}));return l.default.createElement("div",this.props,a)}}]),u}(l.Component)},5971:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>T});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(8661),f=n(533),h=n(1271),m=n(2399),y=n(968),g=n(381),v=n.n(g),_=n(4823),b=n(3966),C=n(6604),D=n(6069),k=n(390),E=n(5705),w=n(7329),R=n(9840),P=n(1943);var I={ap_divisions_spend:"ap_divisions_spend",ap_location_spend:"ap_location_spend",gl_subcategory_spend:"gl_subcategory_spend",aggregate_item_spend:"aggregate_item_spend",item_trend_report:"item_trend_report",item_stats_table:"item_trend_report",vendor_spend_chart:"vendor_spend_report"},S=function(t){(0,s.default)(f,t);var e,n,u=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function f(t){var e;return(0,r.default)(this,f),(e=u.call(this,t)).renderChart=e.renderChart.bind((0,o.default)(e)),e.wrapChart=e.wrapChart.bind((0,o.default)(e)),e.getChart=e.getChart.bind((0,o.default)(e)),e.drilldown=e.drilldown.bind((0,o.default)(e)),e.handleRegionSpendChartClick=e.handleRegionSpendChartClick.bind((0,o.default)(e)),e.handleMultiLocationClick=e.handleMultiLocationClick.bind((0,o.default)(e)),e.handleWeeklySpendClick=e.handleWeeklySpendClick.bind((0,o.default)(e)),e.handleGLSpendClick=e.handleGLSpendClick.bind((0,o.default)(e)),e.handleAggregateItemsSpendTableClick=e.handleAggregateItemsSpendTableClick.bind((0,o.default)(e)),e.handleItemTrendClick=e.handleItemTrendClick.bind((0,o.default)(e)),e.getDateParams=e.getDateParams.bind((0,o.default)(e)),e.toggleChart=e.toggleChart.bind((0,o.default)(e)),e.handleVendorSpendClick=e.handleVendorSpendClick.bind((0,o.default)(e)),e.fetchApDivisionsSpend=e.fetchApDivisionsSpend.bind((0,o.default)(e)),e.goToRegionSpendChart=e.goToRegionSpendChart.bind((0,o.default)(e)),e.goToInvoicesByVendorGL=e.goToInvoicesByVendorGL.bind((0,o.default)(e)),e.invoicesByVendorGlParams=e.invoicesByVendorGlParams.bind((0,o.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,o.default)(e)),e.goToInitialChart=e.goToInitialChart.bind((0,o.default)(e)),e}return(0,i.default)(f,[{key:"componentDidMount",value:function(){this.props.setDefaultTrendBy(this.props.byInvoiceDate?"invoice_date":"submitted_date")}},{key:"UNSAFE_componentWillMount",value:function(){this.props.fullscreen||this.fetchInitialChart()}},{key:"UNSAFE_componentWillUpdate",value:function(t){var e=t.id,n=t.reports,a=t.dashboard.fullscreenOpen,r=t.byInvoiceDate,i=this.props.byInvoiceDate!==r,o=this.props.dashboard.activeWidget?this.props.dashboard.activeWidget.id:null,s=!a&&this.props.dashboard.fullscreenOpen&&this.props.dashboard.updatedInFullscreen&&this.props.id!==o,l=this.widget(t).drillUp,c=this.props.startDate!==t.startDate||this.props.endDate!==t.endDate,u=!d().isEqual(this.props.company.locations,t.company.locations),p=!d().isEqual(this.widget(this.props).chartType,this.widget(t).chartType)&&l,f=this.widget(t).chartType;if(!t.fullscreen){if(u){this.goToInitialChart(t);var h=this.widget(t).intitialChartType;this.widget(t).chartType===h&&(this.props.setWidgetState(e,{drillUp:!1}),this.props.fetchReport(this.props.id,h,this.params(t,h)))}if(i&&this.props.setDefaultTrendBy(r?"invoice_date":"submitted_date"),(c||p||s||i)&&(this.props.fetchReport(this.props.id,this.widget(t).chartType,this.params(t)),this.props.setWidgetState(e,{drillUp:!1})),"aggregate_item_spend"!==f&&"ap_vendor_by_gl_location"!==f&&n[e]&&n[e].aggregate_item_spend){var m=n[e].errors.aggregate_item_spend;d().isEmpty(m)&&this.props.addReport(e,"aggregate_item_spend",null)}if("aggregate_item_spend"===f&&n[e].aggregate_item_spend&&0===n[e].aggregate_item_spend.length){var y=n[e].errors.aggregate_item_spend;if(!d().isEmpty(y))return;this.props.setChartType(e,"ap_vendor_by_gl_location"),this.props.fetchReport(this.props.id,"ap_vendor_by_gl_location",this.aggItemsParams())}d().isEmpty(f)&&this.fetchInitialChart(t)}}},{key:"fetchInitialChart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.company,n=t.id;if(!d().isEmpty(e.locations)){var a=(0,y.allDivisions)(e.locations);1===a.length?(this.props.setWidgetState(n,{chartType:"ap_location_spend",intitialChartType:"ap_location_spend"}),this.goToRegionSpendChart(a[0])):(this.props.pushHistory(n,"ap_divisions_spend","Divisions"),this.props.setWidgetState(n,{intitialChartType:"ap_divisions_spend"}),this.props.setChartType(n,"ap_divisions_spend"),this.fetchApDivisionsSpend(t))}}},{key:"fetchApDivisionsSpend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.props.fetchReport(this.props.id,"ap_divisions_spend",this.regionSpendChartParams(t))}},{key:"urlParams",value:function(t,e){var n=this.props.company.group_id;return{ap_divisions_spend:"?unit_id=".concat(t,"&group_id=").concat(n),ap_location_spend:"?unit_id=".concat(t,"&group_id=").concat(n),gl_subcategory_spend:"?unit_id=".concat(t,"&group_id=").concat(n),aggregate_item_spend:"?unit_id=".concat(t,"&group_id=").concat(n),item_trend_report:"?unit_id=".concat(t,"&group_id=").concat(n),item_stats_table:"?unit_id=".concat(t,"&group_id=").concat(n),vendor_spend_chart:"?unit_id=".concat(t,"&group_id=").concat(n)}[e]}},{key:"unit_ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().division,n=t.company.locations;return d().isEmpty(e)?n.filter((function(t){return"location"===t.type&&t.checked})).map((function(t){return t.unit_id})):n.filter((function(t){return"location"===t.type&&t.checked&&t.region===e.name})).map((function(t){return t.unit_id}))}},{key:"widget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.id,n=t.widgets;return n.find((function(t){return t.id===e}))}},{key:"getDateParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(d().isEmpty(t.reports))return"";var e=t.reports,n=e.startDate,a=e.endDate;return"&start_date=".concat(v()(n).format("MM/DD/YYYY"),"&end_date=").concat(v()(a).format("MM/DD/YYYY"))}},{key:"wrapChart",value:function(t){return["aggregate_item_spend","invoices_by_vendor_gl"].includes(this.widget().chartType)?t:p.default.createElement("div",{className:"fruit-main-chart",style:{height:.65*this.props.widgetHeight||0}},t)}},{key:"renderChart",value:function(){var t=this.widget().chartType,e=this.getChart(t);return this.wrapChart(e)}},{key:"params",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||this.widget(t).chartType;switch(n){case"ap_divisions_spend":return this.regionSpendChartParams(t);case"ap_location_spend":return this.locationSpendParams(t);case"gl_subcategory_spend":return this.glSpendParams(t);case"aggregate_item_spend":return this.aggItemsParams(t);case"item_trend_report":return this.itemTrendParams(t);case"ap_vendor_by_gl_location":return this.aggItemsParams(t);case"invoices_by_vendor_gl":return this.invoicesByVendorGlParams(t);default:return""}}},{key:"getChart",value:function(t){var e=this,n="chart-".concat(this.props.id),r=this.props,i=r.reports,o=r.id,s=this.widget().division,l=i[o].aggregate_item_spend;switch(t){case"ap_divisions_spend":return p.default.createElement(w.default,(0,a.default)({onDataClick:function(t){return e.handleRegionSpendChartClick(t.point.category)},container:n,type:t,widthRatio:.85,heightRatio:.45,fullscreenHeightRatio:.75},this.props));case"ap_location_spend":return p.default.createElement(E.default,(0,a.default)({onDataClick:this.handleMultiLocationClick,container:n,divisionName:s?s.name:"",type:t,widthRatio:.85,heightRatio:.5,fullscreenHeightRatio:.75},this.props));case"gl_subcategory_spend":return p.default.createElement("div",null,p.default.createElement(D.default,(0,a.default)({onDataClick:this.handleGLSpendClick,container:n,type:t,widthRatio:.85,heightRatio:.65},this.props)));case"vendor_spend_chart":return p.default.createElement("div",null,p.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return e.toggleChart("gl_subcategory_spend")}},"Show GL Subcategory Report"),p.default.createElement(P.default,(0,a.default)({onDataClick:this.handleVendorSpendClick,container:n,type:"vendor_spend_report",widthRatio:.85,heightRatio:.65},this.props)));case"aggregate_item_spend":return p.default.createElement(C.default,(0,a.default)({chartType:t,toggleChart:this.toggleChart,handleAggregateItemsSpendTableClick:this.handleAggregateItemsSpendTableClick},this.props));case"ap_vendor_by_gl_location":var c=!l||l.length>0?"inherit":"none";return p.default.createElement("div",{style:{height:"60%"}},p.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return e.toggleChart("aggregate_item_spend")},style:{marginBottom:"1em",display:c}},"Show Item Spend"),p.default.createElement(R.default,(0,a.default)({type:t,container:n,onDataClick:this.goToInvoicesByVendorGL,widthRatio:.85,heightRatio:.55},this.props)));case"item_trend_report":return p.default.createElement(k.default,(0,a.default)({type:t,item_name:this.widget().item_name,container:n,widthRatio:.9,heightRatio:.4,fullscreenHeightRatio:.75,onDataClick:this.handleItemTrendClick},this.props));case"invoices_by_vendor_gl":return p.default.createElement(_.default,(0,a.default)({container:n,type:t,widthRatio:.85,heightRatio:.75,showPagination:!!this.props.fullscreen},this.props));default:return p.default.createElement("div",null,"Whoops!")}}},{key:"drilldown",value:function(t,e){var n=this.props.id;this.props.onExpandClick(n),this.props.setChartType(n,t),this.props.pushHistory(n,t,e)}},{key:"toggleChart",value:function(t){var e=this.props.id,n=this.props.reports[e].unit_id,a=this.widget(),r=a.gl_code,i=a.gl_name;this.props.setChartType(e,t),this.props.sliceHistory(e,this.widget().history.length-2),this.props.pushHistory(e,t,i),this.props.fetchReport(e,t,"?unit_id=".concat(n,"&gl_code=").concat(r).concat(this.getDateParams()))}},{key:"goToInvoicesByVendorGL",value:function(t){var e=this,n=this.props,a=n.id,r=n.reports,i=t.point.x,o=r[a].ap_vendor_by_gl_location.find((function(t){return t.name===i})).vendor_id;this.props.fetchReport(a,"invoices_by_vendor_gl",this.invoicesByVendorGlParams(this.props,o)),setTimeout((function(){e.props.setWidgetState(a,{vendor_id:o}),e.drilldown("invoices_by_vendor_gl",i)}),100)}},{key:"invoicesByVendorGlParams",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().vendor_id,n=this.props.id,a=this.props.reports[n].unit_id,r=this.widget(),i=r.gl_code;return"?unit_ids=".concat(a,"&vendor_id=").concat(e,"&gl_code=").concat(i).concat(this.getDateParams(t))}},{key:"regionSpendChartParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.props.company,n=e.group_id,a=e.user_id;return"?group_id=".concat(n,"&user_id=").concat(a,"&unit_ids=").concat(this.unit_ids(t,null)).concat(this.getDateParams(t))}},{key:"handleRegionSpendChartClick",value:function(t){var e=this,n=this.props,a=n.id,r=n.reports[a].ap_divisions_spend,i=r.findIndex((function(e){return e.name===t})),o=r[i];this.props.fetchReport(this.props.id,"ap_location_spend",this.locationSpendParams(this.props,o)),setTimeout((function(){e.props.setWidgetState(a,{division:o}),e.drilldown("ap_location_spend",t),e.props.setCompanyData({region:t})}),100)}},{key:"goToRegionSpendChart",value:function(t){var e=this,n=this.props.id,a=t.name;this.props.fetchReport(this.props.id,"ap_location_spend",this.locationSpendParams(this.props,t)),setTimeout((function(){e.props.setChartType(n,"ap_location_spend"),e.props.pushHistory(n,"ap_location_spend",a),e.props.setWidgetState(n,{division:t})}),100)}},{key:"locationSpendParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().division,n=t.company,a=n.group_id,r=n.user_id,i=n.locations;return e||(e=(0,y.allDivisions)(i)[0],this.props.setWidgetState(t.id,{division:e})),"?division_id=".concat(e.division_id,"&user_id=").concat(r,"&group_id=").concat(a,"&unit_ids=").concat(this.unit_ids(t,e)).concat(this.getDateParams(t))}},{key:"handleMultiLocationClick",value:function(t){var e=this,n=t.point.unit_id;this.props.fetchReport(this.props.id,"gl_subcategory_spend","?unit_id=".concat(n).concat(this.getDateParams())),setTimeout((function(){e.drilldown("gl_subcategory_spend",t.point.category),e.props.setReportAttribute(e.props.id,{unit_id:n}),e.props.setWidgetState(e.props.id,{unit_id:n})}),100)}},{key:"glSpendParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.unit_id;return"?unit_id=".concat(n).concat(this.getDateParams(t))}},{key:"handleWeeklySpendClick",value:function(t){var e=t.point.category;this.drilldown("gl_subcategory_spend",e);var n=this.props.reports[this.props.id].unit_id;this.props.fetchReport(this.props.id,"gl_subcategory_spend","?unit_id=".concat(n).concat(this.getDateParams()))}},{key:"handleGLSpendClick",value:function(t){var e=this,n=this.props,a=n.reports,r=n.id,i=t.point.name,o=a[r].gl_subcategory_spend.gl_spend.find((function(t){return t.gl_name===i}));this.props.fetchReport(this.props.id,"aggregate_item_spend",this.aggItemsParams(this.props,o.gl_code)),setTimeout((function(){e.props.setWidgetState(r,{gl_code:o.gl_code,gl_name:o.gl_name}),e.drilldown("aggregate_item_spend",t.point.name)}),100)}},{key:"handleVendorSpendClick",value:function(t){var e=this,n=t.point.category,a=this.props.id;this.props.fetchReport(this.props.id,"aggregate_item_spend",this.aggItemsParams()),setTimeout((function(){e.props.setWidgetState(a,{vendor_name:n}),e.drilldown("aggregate_item_spend",n)}),100)}},{key:"aggItemsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().gl_code,n=this.widget(t),a=n.unit_id;return"?unit_id=".concat(a,"&gl_code=").concat(e).concat(this.getDateParams(t))}},{key:"handleAggregateItemsSpendTableClick",value:function(t){var e=this,n=t.original,a=n.inventory_item_id,r=n.item_name,i=this.props,o=i.reports,s=i.id,l=o[s].aggregate_item_spend[t.index].vendor_id;this.props.fetchReport(this.props.id,"item_trend_report","?id=".concat(a,"&vendor_id=").concat(l).concat(this.getDateParams())),setTimeout((function(){e.drilldown("item_trend_report",r),e.props.setWidgetState(s,{item_name:r,inventory_item_id:a,vendor_id:l})}),100)}},{key:"itemTrendParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.inventory_item_id,a=e.vendor_id;return"?id=".concat(n,"&vendor_id=").concat(a).concat(this.getDateParams(t))}},{key:"handleItemTrendClick",value:function(t){var e=this.props.id,n=this.props.reports[e].item_trend_report.items[t.point.index].imageLink;d().isEmpty(n)||window.open(n,"_blank")}},{key:"onCompressClick",value:function(){this.goToInitialChart(),this.props.onCompressClick()}},{key:"goToInitialChart",value:function(){var t=this.props.id,e=this.widget(),n=e.intitialChartType,a=e.division;if(!d().isEmpty(a)){var r="ap_divisions_spend"===n?"divisions":a.name;this.props.setChartType(t,n),this.props.sliceHistory(t,-1),this.props.pushHistory(t,n,r)}}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.reports,r=n[e]?n[e].unit_id:"",i=this.widget().chartType;return i?p.default.createElement(b.default,(0,a.default)({title:"AP Spend",type:I[i],urlParams:this.urlParams(r,i),shouldFetch:!1,history:this.props.history},this.props,{onCompressClick:this.onCompressClick}),this.renderChart()):p.default.createElement("div",null)}}]),f}(p.Component);S.propTypes={};const T=(0,f.connect)((function(t){return{widgets:t.widgets.widgets,reports:t.reports,startDate:t.reports.startDate,endDate:t.reports.endDate,company:t.company,dashboard:t.dashboard,byInvoiceDate:t.widget_settings.ap_spend.byInvoiceDate}}),{setDrilldownIndex:h.setDrilldownIndex,setReportAttribute:h.setReportAttribute,fetchReport:h.fetchReport,pushHistory:h.pushHistory,sliceHistory:h.sliceHistory,setChartType:h.setChartType,setCompanyData:h.setCompanyData,setWidgetState:h.setWidgetState,addReport:h.addReport,setDefaultTrendBy:m.setDefaultTrendBy})(S)},6604:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(8661),p=n(8016),f=n(158);const h=function(t){(0,o.default)(h,t);var e,n,c=(e=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function h(){return(0,r.default)(this,h),c.apply(this,arguments)}return(0,i.default)(h,[{key:"render",value:function(){var t=this.props,e=t.toggleChart,n=t.handleAggregateItemsSpendTableClick,r=t.chartType,i=t.widgets,o=t.id,s=u().find(i,{id:o}),l=s?s.gl_name.toLowerCase():"";return d.default.createElement("div",{className:"agg-item-spend",style:{height:"95%"}},d.default.createElement("div",null,d.default.createElement("div",{className:"agg-item-spend-buttons-container"},d.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return e("ap_vendor_by_gl_location")},style:{margin:"1em"}},"Show Vendor Spend")),d.default.createElement("div",{className:"agg-item-spend-csv-container"},d.default.createElement(p.default,{tableSelector:".layout .agg-item-spend .rt-table",fileName:"ap_spend_".concat(l,".csv"),isReactTable:!0})),d.default.createElement("div",{className:"clearfix"})),d.default.createElement(f.default,(0,a.default)({onDataClick:n,showPagination:!!this.props.fullscreen,type:r},this.props)))}}]),h}(d.Component)},158:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(8661),u=n(533),d=n(968),p=n(2262);var f=function(t){(0,o.default)(f,t);var e,n,u=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function f(t){var e;return(0,a.default)(this,f),(e=u.call(this,t)).parseTableData=e.parseTableData.bind((0,i.default)(e)),e}return(0,r.default)(f,[{key:"parseTableData",value:function(){return(this.props.reports[this.props.id].aggregate_item_spend||[]).map((function(t){return{inventory_item_id:t.product_id,vendor_name:t.vendor,item_name:t.product_name,pack_size:t.pack_size,item_rate:parseFloat(t.rate),item_spend:parseFloat(t.total_spend),percent_change:parseFloat(t.price_change)}}))}},{key:"render",value:function(){var t=[{Header:"Vendor Name",accessor:"vendor_name"},{Header:"Item Name",accessor:"item_name"},{Header:"Item Rate",accessor:"item_rate",Cell:function(t){return c.default.createElement("div",{style:{textAlign:"right"}},(0,d.formatIntoDollars)(t.row.item_rate))}},{Header:"Purchase Unit",accessor:"pack_size",width:125,Cell:function(t){return c.default.createElement("div",null,t.row.pack_size)}},{Header:"Total Spend",accessor:"item_spend",Cell:function(t){return c.default.createElement("div",{style:{textAlign:"right"}},(0,d.formatIntoDollars)(t.row.item_spend))}},{Header:"Percent Change",accessor:"percent_change",Cell:function(t){return c.default.createElement("div",{style:{textAlign:"right"}},(0,d.formatPercent)(t.row.percent_change))}}],e=this.props,n=e.reports,a=e.id,r=n[a].errors?n[a].errors.aggregate_item_spend:null;return c.default.createElement(p.default,{columns:t,data:this.parseTableData(),reports:this.props.reports[this.props.id].aggregate_item_spend,onDataClick:this.props.onDataClick,error:r,emptyDataMessage:"No Itemized Invoices",defaultPageSize:this.props.showPagination?20:this.parseTableData().length,showPagination:this.props.showPagination,heightRatio:this.props.showPagination?null:.7})}}]),f}(c.Component);f.propTypes={};const h=(0,u.connect)((function(t){return{reports:t.reports}}))(f)},6069:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(968),y=n(3203);function g(t,e){return e?{}:{chart:{type:"pie"},title:{text:""},subtitle:{text:""},plotOptions:{pie:{dataLabels:{enabled:!0,formatter:function(){return"".concat(this.key,"<br>").concat((0,m.formatIntoDollars)(this.y))}}}},tooltip:{enabled:!0,formatter:function(){return"".concat(this.key,"<br>").concat((0,m.formatIntoDollars)(this.y))}},series:[{name:"GL Spend",colorByPoint:!0,data:t.gl_subcategory_spend.gl_spend.map((function(t){return[t.gl_name,parseFloat(t.gl_amount)]})).sort((function(t,e){return t[1]-e[1]}))}]}}var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props.reports[this.props.id],e=u().isEmpty(t)||u().isEmpty(t.gl_subcategory_spend)||u().isEmpty(t.gl_subcategory_spend.gl_spend);return f.default.createElement(y.default,(0,a.default)({dataIsPresent:!e,config:g(t,e),modules:[],theme:["#058DC7","#800080","#24CBE5","#DDDF00","#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);v.propTypes={container:p().string.isRequired};const _=(0,h.connect)((function(t){return{reports:t.reports}}))(v)},5207:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(6156),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(381),p=n.n(d),f=n(8661),h=n(5903),m=n(968);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const v=function(t){(0,o.default)(c,t);var e,n,a=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function c(){return(0,r.default)(this,c),a.apply(this,arguments)}return(0,i.default)(c,[{key:"formatDate",value:function(t){return u().isEmpty(t)?"":p()(new Date(t)).format("MM/DD/YYYY")}},{key:"render",value:function(){var t=this,e=this.props.trend_by,n=this.props.items.map((function(t){var e=t.rate,n=t.qty,a=0;return e&&n&&(a=e*n),g(g({},t),{},{totalSpend:a})})),a=[{Header:"Vendor Name",accessor:"vendor",width:200},{Header:"Item Name",accessor:"product_name",width:275},{Header:"Rate",accessor:"rate",width:125,Cell:function(t){var e=t.row.rate;return f.default.createElement("div",{style:{textAlign:"right"}},(0,m.formatIntoDollars)(e))}},{Header:"Total Spend",accessor:"totalSpend",width:125,Cell:function(t){var e=t.row.totalSpend;return f.default.createElement("div",{style:{textAlign:"right"}},(0,m.formatIntoDollars)(e))}},{Header:"Invoice Date",accessor:"date",Cell:function(e){var n=e.row.date;return f.default.createElement("div",null,t.formatDate(n))}},{Header:"Submitted Date",accessor:"submittedDate",Cell:function(e){var n=e.row.submittedDate;return f.default.createElement("div",null,t.formatDate(n))}},{Header:"Image",accessor:"imageLink",Cell:function(t){var e=t.row.imageLink;return e?f.default.createElement("div",{style:{textAlign:"left"}},u().isEmpty(e)?"":f.default.createElement("a",{target:"_blank",href:e},"View Image")):f.default.createElement("div",null)}}];return f.default.createElement(h.default,{data:n,columns:a,defaultPageSize:20,defaultSorted:[{id:"invoice_date"===e?"date":"submittedDate",asc:!0}]})}}]),c}(f.default.Component)},390:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(6156),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(8016),y=n(9668),g=n(5207),v=n(2772);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=function(t){(0,o.default)(c,t);var e,n,a=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function c(){return(0,r.default)(this,c),a.apply(this,arguments)}return(0,i.default)(c,[{key:"generateItems",value:function(t){var e=this.props,n=e.reports[e.id].item_trend_report;if(u().isEmpty(n))return[];var a={};u().sortBy(n.items,(function(e){return Date.parse(new Date(e[t]))})).forEach((function(e){var n=e.date,r=e.submittedDate,i="invoice_date"===t?n:r;if(a[i]){var o=a[i],s=o.numItems+1,l=parseFloat(o.total_qty)+parseFloat(e.qty),c=parseFloat(o.total_rate)+parseFloat(e.rate);a[i]=b(b({},o),{},{total_qty:l,total_rate:c,qty:l/s,rate:c/s,isAverage:!0,numItems:s})}else a[i]=b(b({},e),{},{total_qty:parseFloat(e.qty),total_rate:parseFloat(e.rate),numItems:1,date:n,submittedDate:r})}));var r=Object.values(a).map((function(e){var n=e.submittedDate,a=e.date,r="invoice_date"===t?a:n;return b({x:Date.parse(r),y:parseFloat(e.rate),date:a,submittedDate:n,className:u().isEmpty(e.imageLink)?"no-pointer":""},e)}));return u().sortBy(r,"x")}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.type,a=t.reports,r=t.trend_by,i=t.item_name,o=i.replace(/[^\w\s]/gi,"").split(" ").join("_").toLowerCase(),s=a[e][n],l=s?s.items:[];return f.default.createElement("div",null,f.default.createElement("div",{className:"ap-spend-download-csv-container"},f.default.createElement(m.default,{tableSelector:".layout .ap-spend-item-data-table .rt-table",fileName:"".concat(o,".csv"),isReactTable:!0})),f.default.createElement("div",{className:"clearfix"}),f.default.createElement(v.default,{trend_by:r,items:this.generateItems(r),item_name:i}),f.default.createElement("p",{className:"disclaimer"},"Disclaimer: When looking for item price detail run report by invoice date."),f.default.createElement(y.default,{ratesAndDates:l}),f.default.createElement("div",{className:"ap-spend-item-data-table"},f.default.createElement(g.default,{items:l,trend_by:r})))}}]),c}(f.Component);C.defaultProps={widthRatio:.7,heightRatio:.5},C.propTypes={container:p().string.isRequired};const D=(0,h.connect)((function(t){return{reports:t.reports,trend_by:t.ap_spend.trend_by}}),{})(C)},2772:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8840),c=n.n(l),u=n(6486),d=n.n(u),p=n(381),f=n.n(p),h=n(8661);var m=["#058DC7","#800080","#24CBE5","#DDDF00","#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"];const y=function(t){(0,i.default)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),l.apply(this,arguments)}return(0,r.default)(u,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"componentDidUpdate",value:function(){this.updateChart()}},{key:"updateChart",value:function(){var t=this.props,e=t.items,n=t.item_name,a=t.trend_by;c().theme={colors:m},this.chart=c().chart(this.itemTrendChartByDate,{title:{text:"".concat(n," Price Trend")},xAxis:{type:"datetime",title:{text:"invoice_date"===a?"Invoice Date":"Submitted Date"}},yAxis:{title:{text:"Rate ($)"}},legend:{enabled:!1},plotOptions:{line:{marker:{enabled:!0}},series:{label:{connectorAllowed:!1},pointStart:2010,point:{events:{click:function(t){var e=t.point.imageLink;d().isEmpty(e)||window.open(e,"_blank")}}}}},series:[{name:"Items",data:e}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]},tooltip:{formatter:function(){var t=this.points[0].point,e=t.submittedDate;e=f()(new Date(e)).format("MM/DD/YYYY");var n=t.isAverage?"<br/><div style='color:orange'>(Average of ".concat(t.numItems," items)<div>"):"",r="";return r+="Vendor: "+t.vendor+"<br/>",r+="invoice_date"===a?"Invoice Date: "+f()(Date.parse(t.date)).format("MM/DD/YYYY")+"<br/>":"Submitted Date: ".concat(e," <br/>"),r+="Rate: $"+t.rate.toFixed(2)+"<br/>",(r+="Amount: $"+(parseFloat(t.rate)*parseFloat(t.qty)).toFixed(2)+"<br/>")+n},shared:!0,useHTML:!0,xDateFormat:"%m/%d/%Y"}})}},{key:"render",value:function(){var t=this;return h.default.createElement("div",{ref:function(e){return t.itemTrendChartByDate=e},style:{display:"flex"},className:"chart"})}}]),u}(h.Component)},5705:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);var v=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).getChartData=e.getChartData.bind((0,o.default)(e)),e.calculateSum=e.calculateSum.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"parseData",value:function(t){return d().isEmpty(t)?[]:t.map((function(t){return t.total_spend}))}},{key:"calculateSum",value:function(){var t=this.props.reports[this.props.id].ap_location_spend;return d().isEmpty(t)?0:this.parseData(t).reduce((function(t,e){return t+e}))}},{key:"getChartData",value:function(t){if(!t)return{};var e=t.map((function(t){return{y:t.total_spend,unit_id:t.unit_id}}));return{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.unit_name})),title:{text:null},labels:{step:1}},yAxis:{labels:{overflow:"allow",step:1}},tooltip:{valueSuffix:"",valuePrefix:"$",formatter:function(){return(0,y.formatIntoDollars)(this.y)}},plotOptions:{bar:{dataLabels:{enabled:!0,allowOverlap:!0}}},credits:{enabled:!1},series:[{name:"Locations",data:e,dataLabels:{enabled:!0,allowOverlap:!0,formatter:function(){return(0,y.formatIntoDollars)(this.y)}}}]}}},{key:"render",value:function(){var t=this.props.divisionName,e=this.props.reports[this.props.id].ap_location_spend;return h.default.createElement("div",null,h.default.createElement("div",{className:"multi-location-sum"},t,": ",(0,y.formatIntoDollars)(this.calculateSum())),h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(e),config:this.getChartData(e),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),p}(h.Component);v.propTypes={container:f().string.isRequired};const _=(0,m.connect)((function(t){return{reports:t.reports,company:t.company}}))(v)},7329:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(968),y=n(3203);var g=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"getChartData",value:function(t){if(u().isEmpty(t))return{};var e=(0,m.sortDivisions)(t),n=e.map((function(t){return t.amount}));return{chart:{type:"bar"},title:{text:""},xAxis:{categories:e.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"}},tooltip:{valueSuffix:"",valuePrefix:"$",formatter:function(){return(0,m.formatIntoDollars)(this.y)}},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{enabled:!1},credits:{enabled:!1},series:[{name:"",data:n,dataLabels:{enabled:!0,formatter:function(){return(0,m.formatIntoDollars)(this.y)}}}]}}},{key:"calculateSum",value:function(){var t=this.props.reports[this.props.id].ap_divisions_spend;return u().isEmpty(t)?0:t.map((function(t){return parseFloat(t.amount)})).reduce((function(t,e){return t+e}))}},{key:"render",value:function(){var t=this.props.reports[this.props.id].ap_divisions_spend,e=this.calculateSum();return f.default.createElement("div",null,f.default.createElement("div",{className:"multi-location-sum"},"Aggregate Company Spend: ",(0,m.formatIntoDollars)(e)),f.default.createElement(y.default,(0,a.default)({dataIsPresent:!u().isEmpty(t),config:this.getChartData(t),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),d}(f.Component);g.propTypes={container:p().string.isRequired};const v=(0,h.connect)((function(t){return{reports:t.reports,company:t.company}}))(g)},9840:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(968),y=n(3203);function g(t){if(u().isEmpty(t))return{};var e=t.map((function(t){return{x:t.name,y:parseFloat(t.amount)}}));return{chart:{type:"pie"},title:{text:""},xAxis:{categories:e,title:{text:null}},yAxis:{title:{text:"Amount"}},tooltip:{enabled:!0,formatter:function(){return this.point.x+"<br>Amount: "+(0,m.formatIntoDollars)(this.y)+"<br>Percent: "+ +Math.round(this.percentage)+"%"}},plotOptions:{pie:{dataLabels:{enabled:!0,formatter:function(){return"".concat(this.point.x,"<br>").concat((0,m.formatIntoDollars)(this.y))}}}},series:[{name:"Categories",data:e}]}}var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type,i=e[n][r];return f.default.createElement(y.default,(0,a.default)({dataIsPresent:!u().isEmpty(i),config:g(i),theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],modules:[]},this.props))}}]),d}(f.Component);v.defaultProps={widthRatio:.7,heightRatio:.7},v.propTypes={container:p().string.isRequired,widthRatio:p().number,heightRatio:p().number};const _=(0,h.connect)((function(t){return{reports:t.reports}}))(v)},1943:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203);var y=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t,e=this.props,n=e.reports,r=e.id,i=e.type;return f.default.createElement(m.default,(0,a.default)({dataIsPresent:!u().isEmpty(n[r][i]),config:(t=n[r][i],t?{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"}},tooltip:{valueSuffix:""},plotOptions:{bar:{dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{name:"Vendors",data:t.map((function(t){return t.amount}))}]}:{}),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);y.defaultProps={widthRatio:.7,heightRatio:.7},y.propTypes={container:p().string.isRequired};const g=(0,h.connect)((function(t){return{reports:t.reports}}))(y)},6306:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(2034),u=n.n(c),d=n(6486),p=n.n(d),f=n(8661),h=n(533),m=n(1271),y=n(5113),g=n(968);var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=c.call(this,t)).handleBudgetChange=e.handleBudgetChange.bind((0,i.default)(e)),e.handleKeyPress=e.handleKeyPress.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"componentDidMount",value:function(){this.props.setTotalBudgetAmount(this.props.initialBudget)}},{key:"handleBudgetChange",value:function(t){var e=Number(t);this.props.setWidgetState(this.props.widgetId,{budget:e}),this.props.setTotalBudgetAmount(e)}},{key:"handleKeyPress",value:function(t){"Enter"===t.key&&this.handleBudgetChange(t.target.rawValue)}},{key:"budgetedSpend",value:function(t){var e=this.props,n=e.selected_gls,a=e.data;if(!p().isEmpty(a)){var r=a.Details;!p().isEmpty(n)&&n.length>0&&(r=r.filter((function(t){return n.map((function(t){return parseInt(t.value,10)})).includes(t.Id)})));var i=r.map((function(e){return e.TotalSalesBudgetedPercent*t}));return i.length>0?i.reduce((function(t,e){return t+e})):0}}},{key:"spent",value:function(){var t=this.props,e=t.selected_gls,n=t.data;if(!p().isEmpty(n)){var a=n.Details;return!p().isEmpty(e)&&e.length>0&&(a=a.filter((function(t){return e.map((function(t){return parseInt(t.value,10)})).includes(t.Id)}))),a.map((function(t){return t.Budget})).length>0?a.map((function(t){return t.SpentAmount})).reduce((function(t,e){return t+e})):0}}},{key:"spendingVariance",value:function(t,e){return parseFloat(t)-parseFloat(e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.budget,a=e.initialBudget,r=e.visible,i=e.fullscreen,o=e.data.Sales,s=i?"":"thumbnail-font",l=0===n?(0,g.formatPercent)(100):(0,g.formatPercent)(100*(o-n)/n),c=this.budgetedSpend(n),d=this.spent(),p=this.spendingVariance(c,d),h=p<0?"budget-stat budget-stat-warning":"budget-stat";return f.default.createElement("div",{id:s,style:{display:r?"":"none"}},f.default.createElement("div",{className:"budget-stats-container"},f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Sales"),f.default.createElement("div",{className:"budget-stat"},(0,g.formatIntoDollars)(o))),f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Budget: ",(0,g.formatIntoDollars)(a)),f.default.createElement(u(),{options:{numeral:!0,prefix:"$",signBeforePrefix:!0,rawValueTrimPrefix:!0,numeralDecimalScale:2},className:"budget-stat",onBlur:function(e){return t.handleBudgetChange(e.target.rawValue)},onKeyPress:this.handleKeyPress,value:n?n.toFixed(2):""})),f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Variance $"),f.default.createElement("div",{className:"budget-stat"},(0,g.formatIntoDollars)(o-n))),f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Variance %"),f.default.createElement("div",{className:"budget-stat"},l))),f.default.createElement("div",{className:"budget-stats-container level-2"},f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Budgeted Spend"),f.default.createElement("div",{className:"budget-stat"},(0,g.formatIntoDollars)(c))),f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Spent"),f.default.createElement("div",{className:"budget-stat"},(0,g.formatIntoDollars)(d))),f.default.createElement("div",{className:"budget-stat-group"},f.default.createElement("div",{className:"budget-stat-label"},"Spending Variance $"),f.default.createElement("div",{className:h},(0,g.formatIntoDollars)(p)))))}}]),d}(f.Component);const _=(0,h.connect)(null,{setWidgetState:m.setWidgetState,setTotalBudgetAmount:y.setTotalBudgetAmount})(v)},2322:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>S});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(8661),f=n(533),h=n(5519),m=n(1271),y=n(968),g=n(381),v=n.n(g),_=n(158),b=n(390),C=n(9840),D=n(4823),k=n(3966),E=n(6306),w=n(7313),R=n(1573),P=n(4483);var I=function(t){(0,s.default)(f,t);var e,n,u=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function f(t){var e;return(0,r.default)(this,f),(e=u.call(this,t)).renderChart=e.renderChart.bind((0,o.default)(e)),e.wrapChart=e.wrapChart.bind((0,o.default)(e)),e.getChart=e.getChart.bind((0,o.default)(e)),e.drilldown=e.drilldown.bind((0,o.default)(e)),e.params=e.params.bind((0,o.default)(e)),e.handleGlClick=e.handleGlClick.bind((0,o.default)(e)),e.handleDivisionClick=e.handleDivisionClick.bind((0,o.default)(e)),e.handleUnitsClick=e.handleUnitsClick.bind((0,o.default)(e)),e.handleVendorClick=e.handleVendorClick.bind((0,o.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,o.default)(e)),e.handleAggregateItemsSpendTableClick=e.handleAggregateItemsSpendTableClick.bind((0,o.default)(e)),e.handleItemTrendClick=e.handleItemTrendClick.bind((0,o.default)(e)),e}return(0,i.default)(f,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props,e=t.id,n=t.fullscreen;d().isEmpty(this.widget().selectedGls)&&this.props.setWidgetState(e,{selectedGls:[]}),n||(this.props.pushHistory(e,"budget_vs_actual_company","Company"),this.props.setChartType(e,"budget_vs_actual_company"),this.props.fetchReport(this.props.id,"budget_vs_actual_company",this.budgetVsActualParams()))}},{key:"UNSAFE_componentWillUpdate",value:function(t){var e=t.id,n=t.reports,a=t.dashboard.fullscreenOpen,r=t.byInvoiceDate,i=this.props.byInvoiceDate!==r,o=this.props.dashboard.activeWidget?this.props.dashboard.activeWidget.id:null,s=!a&&this.props.dashboard.fullscreenOpen&&this.props.dashboard.updatedInFullscreen&&this.props.id!==o,l=this.widget(t).chartType,c=this.widget(t).drillUp,u=this.props.startDate!==t.startDate||this.props.endDate!==t.endDate,p=!d().isEqual(this.props.company.locations,t.company.locations),f=!d().isEqual(this.widget().chartType,this.widget(t).chartType)&&c;if(!t.fullscreen&&(p&&(this.goToInitialChart(),"budget_vs_actual_company"===this.widget(t).chartType&&this.props.fetchReport(e,"budget_vs_actual_company",this.budgetVsActualParams(t))),(u||f||s||i)&&(this.props.fetchReport(this.props.id,this.widget(t).chartType,this.params(t)),this.props.setWidgetState(e,{drillUp:!1})),"aggregate_item_spend"===l&&n[e].aggregate_item_spend&&0===n[e].aggregate_item_spend.length&&(this.props.setChartType(e,"ap_vendor_by_gl_location"),this.props.fetchReport(this.props.id,"ap_vendor_by_gl_location",this.aggItemsParams())),"budget_vs_actual_company"===l)){var h=n[e][l]||{},m=h.Budget?h.Budget:0;m!==this.widget(t).initialBudget&&this.props.setWidgetState(e,{budget:m,initialBudget:m})}}},{key:"params",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;switch(this.widget(t).chartType){case"budget_vs_actual_company":return this.budgetVsActualParams(t);case"budget_vs_actual_divisions":return this.byDivisonsParams(t);case"budget_vs_actual_units":return this.byUnitsParams(t);case"aggregate_item_spend":case"ap_vendor_by_gl_location":return this.aggItemsParams(t);case"invoices_by_vendor_gl":return this.invoicesByVendorGlParams(t);case"item_trend_report":return this.itemTrendParams(t);default:return""}}},{key:"onCompressClick",value:function(){this.goToInitialChart(),this.props.onCompressClick()}},{key:"widget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.id,n=t.widgets;return n.find((function(t){return t.id===e}))}},{key:"getDateParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.reports,n=e.startDate,a=e.endDate;return"&startDate=".concat(v()(n).format("MM/DD/YYYY"),"&endDate=").concat(v()(a).format("MM/DD/YYYY"))}},{key:"wrapChart",value:function(t){return p.default.createElement("div",{className:"fruit-main-chart"},t)}},{key:"renderChart",value:function(){var t=this.widget().chartType,e=t.split("_"),n="table"===e[e.length-1],a=this.getChart(t);return n?a:this.wrapChart(a)}},{key:"getChart",value:function(t){var e=this,n=this.props,r=n.reports,i=n.id,o="chart-".concat(i);switch(t){case"budget_vs_actual_company":return p.default.createElement("div",null,p.default.createElement(w.default,(0,a.default)({onDataClick:this.handleGlClick,totalBudgetAmount:this.widget().budget,data:r[i].budget_vs_actual_company,container:o,type:t,widthRatio:.85,heightRatio:.5,selectedGls:this.widget().selectedGls.map((function(t){return t.value})),fullscreenHeightRatio:.95},this.props)));case"budget_vs_actual_divisions":return p.default.createElement("div",null,p.default.createElement(R.default,(0,a.default)({onDataClick:function(t){return e.handleDivisionClick(t.point.Id,t.point.Description)},totalBudgetAmount:this.widget().budget,data:r[i].budget_vs_actual_divisions,container:o,type:t,widthRatio:.85,heightRatio:.55,selectedGls:this.widget().selectedGls.map((function(t){return t.value})),fullscreenHeightRatio:.95},this.props)));case"budget_vs_actual_units":return p.default.createElement("div",null,p.default.createElement(P.default,(0,a.default)({onDataClick:this.handleUnitsClick,totalBudgetAmount:this.widget().budget,data:r[i].budget_vs_actual_units,container:o,type:t,widthRatio:.85,heightRatio:.55,selectedGls:this.widget().selectedGls.map((function(t){return t.value})),fullscreenHeightRatio:.95},this.props)));case"aggregate_item_spend":return p.default.createElement("div",{className:"agg-item-spend"},p.default.createElement(_.default,(0,a.default)({onDataClick:this.handleAggregateItemsSpendTableClick,showPagination:!!this.props.fullscreen,type:t},this.props)));case"item_trend_report":return p.default.createElement(b.default,(0,a.default)({type:t,item_name:this.widget().item_name,container:o,widthRatio:.9,heightRatio:.4,fullscreenHeightRatio:.75,onDataClick:this.handleItemTrendClick},this.props));case"ap_vendor_by_gl_location":var s=r[i].aggregate_item_spend,l=!s||s.length>0?"inherit":"none";return p.default.createElement("div",{style:{height:"60%"}},p.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return null},style:{marginBottom:"1em",display:l}},"Show Item Spend"),p.default.createElement(C.default,(0,a.default)({type:t,container:o,onDataClick:this.handleVendorClick,widthRatio:.85,heightRatio:.55},this.props)));case"invoices_by_vendor_gl":return p.default.createElement(D.default,(0,a.default)({container:o,type:t,showPagination:!!this.props.fullscreen},this.props));default:return p.default.createElement("div",null,"Whoops!")}}},{key:"drilldown",value:function(t,e){var n=this.props.id;this.props.onExpandClick(n),this.props.setChartType(n,t),this.props.pushHistory(n,t,e)}},{key:"budgetVsActualParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return"?units=".concat((0,y.selectedUnits)(t.company.locations).map((function(t){return t.unit_id}))).concat(this.getDateParams(t))}},{key:"byDivisonsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().glCode;return"".concat(this.budgetVsActualParams(t),"&glCode=").concat(e)}},{key:"byUnitsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().divisionName,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.widget().divisionId,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.widget().glCode,r=(0,y.selectedUnits)(t.company.locations).filter((function(t){return t.region===e})).map((function(t){return t.unit_id}));return"?units=".concat(r,"&divisionId=").concat(n,"&glCode=").concat(a).concat(this.getDateParams(t))}},{key:"aggItemsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().unitId,n=this.widget(),a=n.glCode,r=t.reports,i=r.startDate,o=r.endDate,s="&start_date=".concat(v()(i).format("MM/DD/YYYY"),"&end_date=").concat(v()(o).format("MM/DD/YYYY"));return"?unit_id=".concat(e,"&gl_code=").concat(a).concat(s)}},{key:"itemTrendParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().inventory_item_id,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.widget().vendor_id,a=t.reports,r=a.startDate,i=a.endDate,o="&start_date=".concat(v()(r).format("MM/DD/YYYY"),"&end_date=").concat(v()(i).format("MM/DD/YYYY"));return"?id=".concat(e,"&vendor_id=").concat(n).concat(o)}},{key:"invoicesByVendorGlParams",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().vendorId,n=this.props.reports,a=n.startDate,r=n.endDate,i=this.widget(),o=i.glCode,s=i.unitId,l="&start_date=".concat(v()(a).format("MM/DD/YYYY"),"&end_date=").concat(v()(r).format("MM/DD/YYYY"));return"?unit_ids=".concat(s,"&vendor_id=").concat(e,"&gl_code=").concat(o).concat(l)}},{key:"handleGlClick",value:function(t){var e=this,n=this.props,a=n.id,r=n.company.locations,i=t.point,o=i.Id,s=i.Description,l=(0,y.selectedUnits)(r),c=(0,y.selectedDivisions)(r)[0];if(1===l.length)return this.props.setWidgetState(a,{glCode:o,glName:s}),this.props.onExpandClick(a),this.handleDivisionClick(c.division_id,c.name,o,s);this.props.fetchReport(this.props.id,"budget_vs_actual_divisions",this.byDivisonsParams(this.props,o)),setTimeout((function(){e.props.setWidgetState(a,{glCode:o,glName:s}),e.props.onExpandClick(a),e.props.pushHistory(a,"budget_vs_actual_divisions",s),e.props.setChartType(a,"budget_vs_actual_divisions")}),100)}},{key:"handleItemTrendClick",value:function(t){var e=this.props.id,n=this.props.reports[e].item_trend_report.items[t.point.index].imageLink;d().isEmpty(n)||window.open(n,"_blank")}},{key:"handleDivisionClick",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.widget().glCode,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=this.props.id;this.props.fetchReport(this.props.id,"budget_vs_actual_units",this.byUnitsParams(this.props,e,t,a)),setTimeout((function(){n.props.setWidgetState(i,{divisionId:t,divisionName:e}),d().isEmpty(r)||(e="".concat(e," (").concat(r,")")),n.props.pushHistory(i,"budget_vs_actual_units",e),n.props.setChartType(i,"budget_vs_actual_units")}),100)}},{key:"handleUnitsClick",value:function(t){var e=this,n=this.props.id,a=t.point,r=a.Id,i=a.Description;this.props.fetchReport(this.props.id,"aggregate_item_spend",this.aggItemsParams(this.props,r)),setTimeout((function(){e.props.setWidgetState(n,{unitId:r,unitName:i}),e.props.pushHistory(n,"aggregate_item_spend",i),e.props.setChartType(n,"aggregate_item_spend")}),100)}},{key:"handleAggregateItemsSpendTableClick",value:function(t){var e=this,n=t.original,a=n.inventory_item_id,r=n.item_name,i=this.props,o=i.reports,s=i.id,l=o[s].aggregate_item_spend[t.index].vendor_id;this.props.fetchReport(this.props.id,"item_trend_report",this.itemTrendParams(this.props,a,l)),setTimeout((function(){e.drilldown("item_trend_report",r),e.props.setWidgetState(s,{item_name:r,inventory_item_id:a,vendor_id:l})}),100)}},{key:"handleVendorClick",value:function(t){var e=this,n=this.props,a=n.id,r=n.reports,i=t.point.x,o=r[a].ap_vendor_by_gl_location.find((function(t){return t.name===i})).vendor_id;this.props.fetchReport(a,"invoices_by_vendor_gl",this.invoicesByVendorGlParams(this.props,o)),setTimeout((function(){e.props.setWidgetState(a,{vendor_id:o}),e.drilldown("invoices_by_vendor_gl",i)}),100)}},{key:"goToInitialChart",value:function(){var t=this.props.id;this.props.sliceHistory(t,-1),this.props.pushHistory(t,"budget_vs_actual_company","Company"),this.props.setChartType(t,"budget_vs_actual_company")}},{key:"render",value:function(){var t=this,e=this.props,n=e.id,r=e.fullscreen,i=this.widget().chartType,o=this.widget(),s=o.startDate,l=o.endDate,c=o.budget,u=s&&l?{startDate:v()(s).format("MM/DD/YYYY"),endDate:v()(l).format("MM/DD/YYYY")}:{startDate:"",endDate:""};if(!i)return p.default.createElement("div",null);var f=this.props.reports[n].budget_vs_actual_company||{},m="budget_vs_actual_company"===i&&r?"":"none",y=i.includes("budget_vs_actual"),g=(d().isEmpty(f)?[]:f.Details).map((function(t){return{value:t.Description,label:t.Description}}));return p.default.createElement(k.default,(0,a.default)({title:"Budget vs. Actual",type:i,shouldFetch:!1,history:this.props.history,dates:u,showDatesCanvas:s&&l},this.props,{onCompressClick:this.onCompressClick}),p.default.createElement("div",{style:{marginLeft:".5em",marginRight:".5em",display:m}},p.default.createElement(h.default,{options:g,isMulti:!0,placeholder:"Select GLs",value:this.widget().selectedGls,onChange:function(e){return t.props.setWidgetState(n,{selectedGls:e||[]})}})),p.default.createElement(E.default,{selected_gls:this.widget().selectedGls,data:f,widgetId:n,budget:c,fullscreen:r,visible:y,initialBudget:f.Budget}),this.renderChart())}}]),f}(p.Component);const S=(0,f.connect)((function(t){return{widgets:t.widgets.widgets,reports:t.reports,startDate:t.reports.startDate,endDate:t.reports.endDate,company:t.company,dashboard:t.dashboard,byInvoiceDate:t.widget_settings.budget_vs_actual.byInvoiceDate}}),{setDrilldownIndex:m.setDrilldownIndex,setReportAttribute:m.setReportAttribute,fetchReport:m.fetchReport,pushHistory:m.pushHistory,sliceHistory:m.sliceHistory,setChartType:m.setChartType,setCompanyData:m.setCompanyData,setWidgetState:m.setWidgetState})(I)},7313:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var a=n(2122),r=n(6156),i=n(6610),o=n(5991),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=function(t){(0,s.default)(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,o.default)(u,[{key:"getBudgetAmount",value:function(){return this.props.calcBudgetedAmount}},{key:"generateSeries",value:function(t,e){return[{name:"Spent",data:t.map((function(t){return _(_({},t),{},{y:t.SpentAmount})}))},{name:"Remaining",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e-t.SpentAmount;return _(_({},t),{},{y:n<0?0:n})}))},{name:"Over",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e-t.SpentAmount;return _(_({},t),{},{y:n>0?0:Math.abs(n)})}))}]}},{key:"buildConfig",value:function(t){if(d().isEmpty(t))return{};var e=this;return{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.Description})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{enabled:!1},reversedStacks:!1},tooltip:{formatter:function(){var t=this.point.TotalSalesBudgetedPercent*e.getBudgetAmount();return"".concat(this.point.Description,"<br>")+"Budgeted Amount: ".concat((0,y.formatIntoDollars)(t),"<br>")+"Budgeted Percent: ".concat((100*this.point.BudgetedPercent).toFixed(2),"%")}},plotOptions:{bar:{stacking:"normal",dataLabels:{enabled:!0,formatter:function(){return 0===this.y?"":(0,y.formatIntoDollars)(this.y)}},states:{inactive:{enabled:!1}}}},series:this.generateSeries(t,this.props.calcBudgetedAmount)}}},{key:"filteredData",value:function(){var t=this.props,e=t.selectedGls,n=t.data;return d().isEmpty(n.Details)?[]:d().isEmpty(e)?n.Details:n.Details.filter((function(t){return e.includes(t.Description)}))}},{key:"render",value:function(){return h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(this.filteredData()),config:this.buildConfig(this.filteredData()),theme:["#50B432","#2f3540","#ED561B","#64E572","#FF9655"],modules:[]},this.props))}}]),u}(h.Component);b.defaultProps={widthRatio:.7,heightRatio:.7},b.propTypes={container:f().string.isRequired};const C=(0,m.connect)((function(t){return{reports:t.reports,calcBudgetedAmount:t.budgetVsActual.budgetedAmount}}))(b)},1573:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var a=n(2122),r=n(6156),i=n(6610),o=n(5991),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=function(t){(0,s.default)(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,o.default)(u,[{key:"getBudgetAmount",value:function(){return this.props.calcBudgetedAmount}},{key:"buildConfig",value:function(t){if(d().isEmpty(t))return{};var e=this;return{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.Description})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{enabled:!1},reversedStacks:!1},tooltip:{formatter:function(){var t=this.point.TotalSalesBudgetedPercent*e.getBudgetAmount();return"".concat(this.point.Description,"<br>")+"Budgeted Amount: ".concat((0,y.formatIntoDollars)(t),"<br>")+"Budgeted Percent: ".concat((100*this.point.BudgetedPercent).toFixed(2),"%")}},plotOptions:{bar:{stacking:"normal",dataLabels:{enabled:!0,formatter:function(){return 0===this.y?"":(0,y.formatIntoDollars)(this.y)}},states:{inactive:{enabled:!1}}}},series:[{name:"Spent",data:t.map((function(t){return _(_({},t),{},{y:t.SpentAmount})}))},{name:"Remaining",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e.getBudgetAmount()-t.SpentAmount;return _(_({},t),{},{y:n<0?0:n})}))},{name:"Over",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e.getBudgetAmount()-t.SpentAmount;return _(_({},t),{},{y:n>0?0:Math.abs(n)})}))}]}}},{key:"render",value:function(){var t=this.props.data,e=t?t.Details:[];return h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(e),config:this.buildConfig(e),theme:["#50B432","#2f3540","#ED561B","#64E572","#FF9655"],modules:[]},this.props))}}]),u}(h.Component);b.defaultProps={widthRatio:.7,heightRatio:.7},b.propTypes={container:f().string.isRequired};const C=(0,m.connect)((function(t){return{reports:t.reports,calcBudgetedAmount:t.budgetVsActual.budgetedAmount}}))(b)},4483:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var a=n(2122),r=n(6156),i=n(6610),o=n(5991),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=function(t){(0,s.default)(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,o.default)(u,[{key:"getBudgetAmount",value:function(){return this.props.calcBudgetedAmount}},{key:"buildConfig",value:function(t){if(d().isEmpty(t))return{};var e=this;return{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.Description})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{enabled:!1},reversedStacks:!1},tooltip:{formatter:function(){var t=this.point.TotalSalesBudgetedPercent*e.getBudgetAmount();return"".concat(this.point.Description,"<br>")+"Budgeted Amount: ".concat((0,y.formatIntoDollars)(t),"<br>")+"Budgeted Percent: ".concat((100*this.point.BudgetedPercent).toFixed(2),"%")}},plotOptions:{bar:{stacking:"normal",dataLabels:{enabled:!0,formatter:function(){return 0===this.y?"":(0,y.formatIntoDollars)(this.y)}},states:{inactive:{enabled:!1}}}},series:[{name:"Spent",data:t.map((function(t){return _(_({},t),{},{y:t.SpentAmount})}))},{name:"Remaining",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e.getBudgetAmount()-t.SpentAmount;return _(_({},t),{},{y:n<0?0:n})}))},{name:"Over",data:t.map((function(t){var n=t.TotalSalesBudgetedPercent*e.getBudgetAmount()-t.SpentAmount;return _(_({},t),{},{y:n>0?0:Math.abs(n)})}))}]}}},{key:"render",value:function(){var t=this.props.data,e=t?t.Details:[];return h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(e),config:this.buildConfig(e),theme:["#50B432","#2f3540","#ED561B","#64E572","#FF9655"],modules:[]},this.props))}}]),u}(h.Component);b.defaultProps={widthRatio:.7,heightRatio:.7},b.propTypes={container:f().string.isRequired};const C=(0,m.connect)((function(t){return{reports:t.reports,calcBudgetedAmount:t.budgetVsActual.budgetedAmount}}))(b)},1713:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8661),c=n(533),u=n(1396),d=n(8524),p=n(381),f=n.n(p);var h=function(t){(0,i.default)(u,t);var e,n,c=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),c.apply(this,arguments)}return(0,r.default)(u,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.startDate,a=e.endDate,r=e.isLoading,i=e.invoicesGL,o=e.byInvoiceDate;r||t.startDate===n&&t.endDate===a&&t.byInvoiceDate===o||this.props.fetchInvoicesGL(i,o)}},{key:"render",value:function(){var t=this.props.cost_of_goods_gl_invoices;return l.default.createElement("div",{className:"ap-spend-table"},l.default.createElement("div",{className:"title"},l.default.createElement("h3",null,"Invoices by GL")),l.default.createElement(d.default,{dataMap:t,defaultPageSize:20}))}}]),u}(l.default.Component);const m=(0,c.connect)((function(t){return{cost_of_goods_gl_invoices:t.cogs.cost_of_goods_gl_invoices,startDate:f()(t.reports.startDate).format("MM/DD/YYYY"),endDate:f()(t.reports.endDate).format("MM/DD/YYYY"),invoicesGL:t.cogs.invoicesGL,isLoading:t.cogs.isLoading,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{fetchInvoicesGL:u.fetchInvoicesGL})(h)},2412:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(8661),f=n(533),h=n(1396),m=n(968),y=n(1797),g=n(5124),v=n(8204),_=n(381),b=n.n(_);var C=function(t){(0,s.default)(f,t);var e,n,u=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function f(t){var e;return(0,r.default)(this,f),(e=u.call(this,t)).switchChart=e.switchChart.bind((0,o.default)(e)),e}return(0,i.default)(f,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.unitId,a=e.category,r=e.startDate,i=e.endDate;t.unitId===n&&t.category===a&&t.startDate===r&&t.endDate===i||this.fetchData()}},{key:"componentDidMount",value:function(){this.handleFetchOnMount()}},{key:"handleFetchOnMount",value:function(){!0!==(0,m.getFetching)()&&((0,m.setFetching)(!0),this.fetchData())}},{key:"fetchData",value:function(){var t=this.props,e=t.unitId,n=t.category,a=t.startDate,r=t.endDate,i=t.byInvoiceDate;if(!(d().isUndefined(e)||d().isEmpty(n)||d().isEmpty(a)||d().isEmpty(r))){var o={unitId:e,category:n,startDate:a,endDate:r,byInvoiceDate:i};this.props.fetchTrendUnitGroupByGl(o)}}},{key:"switchChart",value:function(){var t=this.props.chartType;this.props.switchChartType("pie"===t?"trend":"pie")}},{key:"renderUnitChart",value:function(){var t=this.props,e=t.data;switch(t.chartType){case"pie":return p.default.createElement(y.default,(0,a.default)({data:e},this.props));case"trend":return p.default.createElement(v.default,(0,a.default)({data:e},this.props));default:return p.default.createElement("div",null)}}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.printView,r=t.widget_id,i=t.chartType;return p.default.createElement("div",{className:"cogs-across-unit-container"},this.renderUnitChart(),p.default.createElement("button",{onClick:this.switchChart,className:"btn btn-small btn-primary btn-toggle switch-chart"},"Show ","pie"===i?"Trend":"Pie"),p.default.createElement("div",{className:n?"":"cogs-table-container"},p.default.createElement(g.default,(0,a.default)({printView:n,data:e,widget_id:r},this.props))))}}]),f}(p.default.Component);const D=(0,f.connect)((function(t){var e=t.reports,n=t.dashboard,a=t.cogs;return{startDate:b()(e.startDate).format("MM/DD/YYYY"),endDate:b()(e.endDate).format("MM/DD/YYYY"),unitId:n.activeWidget.unit_id,chartType:a.cogsAcrossUnitChartType,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{fetchTrendUnitGroupByGl:h.fetchTrendUnitGroupByGl,switchChartType:h.switchChartType})(C)},1797:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(8661),f=n(533),h=n(1396),m=n(3203);var y=["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],g=function(t){(0,s.default)(f,t);var e,n,u=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function f(t){var e;return(0,r.default)(this,f),(e=u.call(this,t)).handlePieChartClick=e.handlePieChartClick.bind((0,o.default)(e)),e}return(0,i.default)(f,[{key:"handlePieChartClick",value:function(t){var e=t.point.gl_code;this.props.switchToSingleGL(e)}},{key:"render",value:function(){var t,e=this.props.data;return p.default.createElement(m.default,(0,a.default)({dataIsPresent:!d().isEmpty(e),onDataClick:this.handlePieChartClick,config:(t=e,!0,t?{chart:{type:"pie"},title:{text:""},subtitle:{text:""},tooltip:{enabled:!0,formatter:function(){return this.point.x+"<br>"+this.y+"%"}},plotOptions:{pie:{dataLabels:{enabled:!0,formatter:function(){return this.point.x+"<br>"+this.y+"%"}}}},series:[{name:"GL Spend",colorByPoint:!0,data:t.map((function(t){return{x:t.gl_name,y:parseFloat(t.percent),className:"",gl_code:parseInt(t.gl_code,10)}})).sort((function(t,e){return t.y-e.y}))}]}:{}),modules:[],theme:y,fullscreenHeightRatio:.6},this.props))}}]),f}(p.Component);const v=(0,f.connect)((function(){return{}}),{switchToSingleGL:h.switchToSingleGL})(g)},5124:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(8661),p=n(533),f=n(5903),h=n(1271),m=n(1396),y=n(968);var g=void 0,v=function(t){(0,o.default)(p,t);var e,n,c=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(t){var e;return(0,a.default)(this,p),(e=c.call(this,t)).handleCheckboxChange=e.handleCheckboxChange.bind((0,i.default)(e)),e.handleGLClick=e.handleGLClick.bind((0,i.default)(e)),e.handleInputClick=e.handleInputClick.bind((0,i.default)(e)),e.navigateToAPSpend=e.navigateToAPSpend.bind((0,i.default)(e)),e.handleSelectAll=e.handleSelectAll.bind((0,i.default)(e)),e.state={inputLastClick:void 0},e}return(0,r.default)(p,[{key:"handleCheckboxChange",value:function(t,e){this.props.updateGLFilters(parseInt(t,10),e.currentTarget.checked)}},{key:"handleGLClick",value:function(t,e){this.props.setChartType(this.props.widget_id,"cogs_across_unit_trend"),this.props.pushHistory(this.props.widget_id,"cogs_across_unit_trend",t),this.props.fetchItemGL(t,e,!1,this.props.byInvoiceDate)}},{key:"navigateToAPSpend",value:function(t){this.props.fetchInvoicesGL(t,this.props.byInvoiceDate),this.props.setChartType(this.props.widget_id,"ap_spend_table"),this.props.pushHistory(this.props.widget_id,"ap_spend_table",t)}},{key:"componentDidMount",value:function(){this.setGLs()}},{key:"setGLs",value:function(){var t=this.props,e=t.glFilters,n=t.unitId;e.length>0&&n===g||(g=n,e=u().map(this.props.data,(function(t){return parseInt(t.gl_code,10)})),this.props.setGlFilters(e))}},{key:"handleInputClick",value:function(t,e){this.setState({inputLastClick:e.currentTarget}),e.shiftKey&&e.currentTarget.checked}},{key:"handleSelectAll",value:function(t){this.props.selectAllGLFilters(t.currentTarget.checked)}},{key:"render",value:function(){var t=this,e=this.props.selectAll,n=[{Header:d.default.createElement("input",{type:"checkbox",checked:e,onChange:this.handleSelectAll}),width:45,sortable:!1,Cell:function(e){var n=e.original.gl_code,a=e.row.gl_name,r=t.props.glFilters.map((function(t){return parseInt(t,10)})).includes(parseInt(n,10));return d.default.createElement("div",null,d.default.createElement("input",{className:"gl-input-checkbox",checked:r,onChange:t.handleCheckboxChange.bind(null,n),onClick:t.handleInputClick.bind(null,a),type:"checkbox"}))}},{Header:"GL Name",accessor:"gl_name"},{Header:"Beginning Inventory",accessor:"beg_inv",Cell:function(e){var n=e.row.gl_name,a=e.original.gl_code;return d.default.createElement("div",{style:{textAlign:"right"}},d.default.createElement("a",{"data-gl_code":a,onClick:t.handleGLClick.bind(null,n,a)},(0,y.formatIntoDollars)(e.row.beg_inv)))}},{Header:"Purchases",accessor:"purchases",Cell:function(e){var n=e.original.gl_code;return d.default.createElement("div",{style:{textAlign:"right"}},d.default.createElement("a",{onClick:t.navigateToAPSpend.bind(null,n)},(0,y.formatIntoDollars)(e.row.purchases)))}},{Header:"Ending Inventory",accessor:"end_inv",Cell:function(e){var n=e.row.gl_name,a=e.original.gl_code;return d.default.createElement("div",{style:{textAlign:"right"}},d.default.createElement("a",{"data-gl_code":a,onClick:t.handleGLClick.bind(null,n,a)},(0,y.formatIntoDollars)(e.row.end_inv)))}},{Header:"Usage",accessor:"cost",Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},(0,y.formatIntoDollars)(t.row.cost))}},{Header:"Cost %",maxWidth:80,accessor:"percent",Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},(0,y.formatPercent)(t.row.percent))}}],a=this.props.data.map((function(t){return{gl_name:t.gl_name,gl_code:t.gl_code,beg_inv:t.beg_inv,purchases:t.purchases,end_inv:t.end_inv,cost:t.cost,percent:t.percent}}));return d.default.createElement(f.default,{showPagination:!0,data:a,defaultPageSize:10,columns:n,defaultSorted:[{id:"gl_name",asc:!0}]})}}]),p}(d.Component);const _=(0,p.connect)((function(t){return{reports:t.reports,glFilters:t.cogs.glFilters,selectAll:t.cogs.glFilterSelectAll,unitId:t.dashboard.activeWidget.unit_id,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{setGlFilters:m.setGlFilters,updateGLFilters:m.updateGLFilters,pushHistory:h.pushHistory,setChartType:h.setChartType,fetchItemGL:m.fetchItemGL,fetchInvoicesGL:m.fetchInvoicesGL,selectAllGLFilters:m.selectAllGLFilters})(v)},2748:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(6486),c=n.n(l),u=n(381),d=n.n(u),p=n(8661),f=n(533),h=n(968),m=n(8016),y=n(6229);var g=function(t){(0,i.default)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),l.apply(this,arguments)}return(0,r.default)(u,[{key:"render",value:function(){var t=this.props,e=t.cost_trend_unit_group_by_gl,n=t.glFilters,a=t.group_name,r=c().groupBy(e,"gl_name"),i=c().map(r,(function(t,e){var a="",r=t.map((function(t){var e=t.starting_week,n=t.percent,r=t.beg_inv,i=t.purchases,o=t.end_inv,s=t.cost,l=t.gl_code;a=l;var c=d()(e).add(6,"days").startOf("day");return{x:Date.UTC(c.year(),c.month(),c.date()),y:n,ending_week:c.format("MM/DD/YYYY"),beg_inv:(0,h.formatIntoDollars)(r),purchases:(0,h.formatIntoDollars)(i),end_inv:(0,h.formatIntoDollars)(o),usage:(0,h.formatIntoDollars)(s),cost:(0,h.formatPercent)(n),gl_code:l}}));r=c().sortBy(r,"x");var i=n.includes(a);return{name:e,data:r,visible:i,gl_code:a,showInLegend:i,pointInterval:6048e5}})),o=(i=c().sortBy(i,"name")).filter((function(t){return t.visible})).map((function(t,e){var n=t.name,a=t.gl_code,r=t.data,i="".concat(a,"_").concat(e);return p.default.createElement(y.default,{gl_code:a,name:n,key:i,data:r})}));return p.default.createElement("div",null,o.length>0&&p.default.createElement("div",null,p.default.createElement(m.default,{style:{marginTop:"1em",float:"right",marginRight:"2%"},tableSelector:".gl-tabular-item table",fileName:"".concat((0,h.formatName)(a),"_gl_trend.csv")}),p.default.createElement("div",{className:"clearfix"})),o)}}]),u}(p.Component);const v=(0,f.connect)((function(t){var e=t.cogs,n=e.cost_trend_unit_group_by_gl,a=e.glFilters,r=e.currentGL;return{group_name:t.company.group_name,cost_trend_unit_group_by_gl:n,glFilters:a,currentGL:r}}),{})(g)},6653:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6156),u=n(8661),d=n(533),p=n(1396),f=n(7102),h=n(6517),m=n(5562),y=n(381),g=n.n(y);var v=!1,_=function(t){(0,o.default)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(){var t;(0,a.default)(this,p);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=d.call.apply(d,[this].concat(n)),(0,c.default)((0,i.default)(t),"setItemsUsageDisplay",(function(e,n){n.preventDefault(),t.props.setItemsUsageDisplay(e)})),t}return(0,r.default)(p,[{key:"componentDidUpdate",value:function(t,e){this.props.isLoading||t.startDate===this.props.startDate&&t.endDate===this.props.endDate&&t.sidebarOpen===this.props.sidebarOpen&&t.byInvoiceDate===this.props.byInvoiceDate||this.updateData()}},{key:"updateData",value:function(){var t=this.props,e=t.glCode,n=t.glName,a=t.byInvoiceDate;v||(v=!0,this.props.fetchItemGL(n,e,!0,a),setTimeout((function(){v=!1}),1e3))}},{key:"renderDisplay",value:function(){var t=this.props,e=t.widget_id;switch(t.cogsItemUsageDisplay){case"chart":return u.default.createElement(m.default,{widget_id:e});case"tabular":return u.default.createElement(h.default,{widget_id:e});default:return u.default.createElement(m.default,{widget_id:e})}}},{key:"render",value:function(){var t=this.props,e=t.widget_id,n=t.cogsItemUsageDisplay;return u.default.createElement("div",null,u.default.createElement("div",null,u.default.createElement("div",{className:"cogs-item-usage-tabs"},u.default.createElement("ul",{className:"nav nav-tabs"},u.default.createElement("li",{className:"chart"===n?"nav-item active":"nav-item"},u.default.createElement("a",{onClick:this.setItemsUsageDisplay.bind(null,"chart")},"Chart")),u.default.createElement("li",{className:"tabular"===n?"nav-item active":"nav-item"},u.default.createElement("a",{onClick:this.setItemsUsageDisplay.bind(null,"tabular")},"Table"))))),u.default.createElement("div",{className:"tab-content"},u.default.createElement("div",{className:"tab-pane fade show active"},this.renderDisplay())),u.default.createElement("div",null,u.default.createElement(f.default,{widget_id:e})))}}]),p}(u.Component);const b=(0,d.connect)((function(t){var e=t.reports,n=t.cogs;return{startDate:g()(e.startDate).format("MM/DD/YYYY"),endDate:g()(e.endDate).format("MM/DD/YYYY"),isLoading:n.isLoading,glCode:n.currentCogsItemGLCode,glName:n.currentCogsItemGL,sidebarOpen:t.dashboard.sidebarOpen,cogsItemUsageDisplay:n.cogsItemUsageDisplay,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{fetchItemGL:p.fetchItemGL,setItemsUsageDisplay:p.setItemsUsageDisplay})(_)},8204:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6156),u=n(8840),d=n.n(u),p=n(6486),f=n.n(p),h=n(381),m=n.n(h),y=n(8661),g=n(533),v=n(1271),_=n(1396),b=n(968),C=n(2748);var D=["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],k=function(t){var e=parseFloat(t)||0;return"".concat(e.toFixed(2),"%")},E=function(t){(0,o.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(t){var e;return(0,a.default)(this,p),e=u.call(this,t),(0,c.default)((0,i.default)(e),"setDisplay",(function(t){e.setState({displayType:t})})),e.state={displayType:"chart"},e}return(0,r.default)(p,[{key:"componentDidUpdate",value:function(t,e){f().isEqual(t.currentGL,this.props.currentGL)||this.updateDisplay(),"chart"===this.state.displayType&&(t.selectAll===this.props.selectAll&&t.cost_trend_unit_group_by_gl.length===this.props.cost_trend_unit_group_by_gl.length&&t.sidebarOpen===this.props.sidebarOpen&&e.displayType===this.state.displayType||this.updateChart())}},{key:"updateDisplay",value:function(){var t=this.props.currentGL,e=t.gl_code,n=t.display;if(e){var a=f().find(this.chart.series,(function(t){return t.userOptions.gl_code===e}));a&&(n?a.update({showInLegend:!0,visible:!0},!0):a.update({showInLegend:!1,visible:!1},!0))}}},{key:"updateChart",value:function(){var t=this;if(!this.props.isLoading){d().theme={colors:D};var e=this.props,n=e.cost_trend_unit_group_by_gl,a=e.glFilters,r=f().groupBy(n,"gl_name"),i=f().map(r,(function(t,e){var n="",r=t.map((function(t){var e=t.starting_week,a=t.percent,r=t.beg_inv,i=t.purchases,o=t.end_inv,s=t.cost,l=t.gl_code;n=l;var c=m()(e).add(6,"days").startOf("day");return{x:Date.UTC(c.year(),c.month(),c.date()),y:a,ending_week:c.format("MM/DD/YYYY"),beg_inv:(0,b.formatIntoDollars)(r),purchases:(0,b.formatIntoDollars)(i),end_inv:(0,b.formatIntoDollars)(o),usage:(0,b.formatIntoDollars)(s),cost:k(a),gl_code:l}}));r=f().sortBy(r,"x");var i=a.includes(n);return{name:e,data:r,visible:i,gl_code:n,showInLegend:i,pointInterval:6048e5}}));i=f().sortBy(i,"name"),this.chart=d().chart(this.cogsAcrossUnitTrendGroup,{title:{text:"COGS Trend"},yAxis:{title:{text:"Percent %"}},xAxis:{type:"datetime",startOfWeek:0,tickInterval:6048e5,tickmarkPlacement:"on"},legend:{layout:"horizontal",align:"center",enabled:!1,itemStyle:{cursor:"default"},itemHoverStyle:{cursor:"default"}},tooltip:{formatter:function(){return"<div><b>".concat(this.series.name,"</b><br/></div>")+"<div>Week Ending: ".concat(this.point.ending_week,"<br/></div>")+"<div>BI: ".concat(this.point.beg_inv,"<br/></div>")+"<div>Purchases: ".concat(this.point.purchases,"<br/></div>")+"<div>EI: ".concat(this.point.end_inv,"<br/></div>")+"<div>Cost %: ".concat(this.point.cost,"<br/></div>")+"<div>Usage: ".concat(this.point.usage,"<br/></div>")}},plotOptions:{series:{pointIntervalUnit:"week",label:{connectorAllowed:!1},events:{click:function(e){var n=e.point.series.name,a=e.point.gl_code;t.props.setChartType(t.props.widget_id,"cogs_across_unit_trend"),t.props.pushHistory(t.props.widget_id,"cogs_across_unit_trend",n),t.props.fetchItemGL(n,a,!1,t.props.byInvoiceDate)},legendItemClick:function(t){t.preventDefault()}}}},series:i})}}},{key:"componentDidMount",value:function(){this.updateChart()}},{key:"renderDisplay",value:function(){var t=this;switch(this.state.displayType){case"chart":return y.default.createElement("div",{ref:function(e){return t.cogsAcrossUnitTrendGroup=e},style:{display:"flex"},className:"chart"});case"tabular":return y.default.createElement(C.default,null);default:return y.default.createElement("div",{ref:function(e){return t.cogsAcrossUnitTrendGroup=e},style:{display:"flex"},className:"chart"})}}},{key:"render",value:function(){var t=this.state.displayType;return y.default.createElement("div",null,y.default.createElement("div",null,y.default.createElement("div",{className:"cogs-across-unit-trend-group"},y.default.createElement("ul",{className:"nav nav-tabs"},y.default.createElement("li",{className:"chart"===t?"nav-item active":"nav-item"},y.default.createElement("a",{onClick:this.setDisplay.bind(null,"chart")},"Chart")),y.default.createElement("li",{className:"tabular"===t?"nav-item active":"nav-item"},y.default.createElement("a",{onClick:this.setDisplay.bind(null,"tabular")},"Table"))))),y.default.createElement("div",{className:"tab-content"},y.default.createElement("div",{className:"tab-pane fade show active"},this.renderDisplay())))}}]),p}(y.Component);const w=(0,g.connect)((function(t){var e=t.cogs;return{cost_trend_unit_group_by_gl:e.cost_trend_unit_group_by_gl,glFilters:e.glFilters,currentGL:e.currentGL,selectAll:e.glFilterSelectAll,isLoading:e.isLoading,sidebarOpen:t.dashboard.sidebarOpen,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{updateGLFilters:_.updateGLFilters,pushHistory:v.pushHistory,setChartType:v.setChartType,fetchItemGL:_.fetchItemGL})(E)},7102:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(381),p=n.n(d),f=n(8661),h=n(533),m=n(5903),y=n(1271),g=n(1396),v=n(968);var _=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=c.call(this,t)).handleCheckBoxClick=e.handleCheckBoxClick.bind((0,i.default)(e)),e.handleSelectAll=e.handleSelectAll.bind((0,i.default)(e)),e.navigateToInvoicesByItem=e.navigateToInvoicesByItem.bind((0,i.default)(e)),e.navigateToInventoryCountsTable=e.navigateToInventoryCountsTable.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"calculateUsage",value:function(t,e,n){return(t=parseFloat(t)||0)+(e=parseFloat(e)||0)-(parseFloat(n)||0)}},{key:"calculateAverageDollar",value:function(t,e,n){var a=(t=parseFloat(t)||0)/(e=parseFloat(e)||0);return u().isNaN(a)&&(a=0),(0,v.formatIntoDollars)(a)}},{key:"calculateAverage",value:function(t,e){var n=(t=parseFloat(t)||0)/(e=parseFloat(e)||0);return u().isNaN(n)&&(n=0),n}},{key:"calculateAverageFromBE",value:function(t,e,n,a){var r,i=this.calculateAverage(t,e),o=this.calculateAverage(n,a);return r=i>0&&o>0?(i+o)/2:o>0&&0===i?o:i>0&&0===o?i:0,(0,v.formatIntoDollars)(r)}},{key:"componentDidUpdate",value:function(t){this.setItems()}},{key:"setItems",value:function(){var t=u().map(this.props.item_level_trend,"t_id");this.props.setItems(t)}},{key:"handleCheckBoxClick",value:function(t,e){this.props.updateItemCheckbox(t,e.currentTarget.checked)}},{key:"handleSelectAll",value:function(t){this.props.itemSelectAll(t.currentTarget.checked)}},{key:"navigateToInvoicesByItem",value:function(t,e){this.props.fetchInvoicesByItem({itemId:e,byInvoiceDate:this.props.byInvoiceDate}),this.props.setChartType(this.props.widget_id,"invoices_by_item"),this.props.pushHistory(this.props.widget_id,"invoices_by_item",t)}},{key:"navigateToInventoryCountsTable",value:function(t,e){var n=e.original.periodData;if(0!==n.length){var a=u().sortBy(n,(function(t){return new Date(t.starting_week).valueOf()})),r="beginning"===t?u().first(a):u().last(a),i=p()(new Date(r.starting_week)).format("MM/DD/YYYY"),o=p()(new Date(r.ending_week)).format("MM/DD/YYYY");this.props.fetchInventoryItemLoc(i,r.unit_inventory_item_id,this.props.byInvoiceDate),this.props.fetchInvoicesByItem({startDate:i,endDate:o,itemId:r.unit_inventory_item_id,byInvoiceDate:this.props.byInvoiceDate}),this.props.setChartType(this.props.widget_id,"inventory_counts_table"),this.props.pushHistory(this.props.widget_id,"inventory_counts_table",r.item_name)}}},{key:"render",value:function(){var t=this,e=this.props,n=e.item_level_trend,a=e.items_select_all,r=n.map((function(e){var n=e.item_name,a=e.beg_inv_quantity,r=e.beg_inv,i=e.purchase_quantity,o=e.purchases,s=e.end_inv_quantity,l=e.end_inv,c=e.unit_inventory_item_id,u=e.t_id,d=e.display,p=e.periodData,f=e.counting_unit;return"undefined"===f&&(f=""),{item_name:n,counting_unit:f,beg_inv_quantity:a,beg_inv:r,purchase_quantity:i,purchases:o,end_inv_quantity:s,end_inv:l,unit_inventory_item_id:c,usage_qty:t.calculateUsage(a,i,s),usage:t.calculateUsage(r,o,l),t_id:u,display:d,average_dollar:0===o?t.calculateAverageFromBE(r,a,l,s):t.calculateAverageDollar(o,i),periodData:p}})),i=[{Header:f.default.createElement("input",{type:"checkbox",checked:a,onChange:this.handleSelectAll}),width:45,accessor:"t_id",sortable:!1,Cell:function(e){return f.default.createElement("div",null,f.default.createElement("input",{checked:e.original.display,onChange:t.handleCheckBoxClick.bind(null,e.row.t_id),type:"checkbox"}))}},{Header:"Item Name",accessor:"item_name",width:250},{Header:"Avg $",accessor:"average_dollar",Cell:function(t){return f.default.createElement("div",{style:{textAlign:"right"}},t.row.average_dollar)}},{Header:"Counting Unit",accessor:"counting_unit"},{Header:"Beginning Inv",accessor:"beg_inv_quantity",Cell:function(e){return f.default.createElement("div",{style:{textAlign:"right"}},f.default.createElement("a",{onClick:t.navigateToInventoryCountsTable.bind(null,"beginning",e)},(0,v.roundTwo)(e.row.beg_inv_quantity)))}},{Header:"Purchases",accessor:"purchase_quantity",Cell:function(e){var n=e.original,a=n.item_name,r=n.unit_inventory_item_id;return f.default.createElement("div",{style:{textAlign:"right"}},f.default.createElement("a",{onClick:t.navigateToInvoicesByItem.bind(null,a,r)},(0,v.roundTwo)(e.row.purchase_quantity)))}},{Header:"Ending Inv",accessor:"end_inv_quantity",Cell:function(e){return f.default.createElement("div",{style:{textAlign:"right"}},f.default.createElement("a",{onClick:t.navigateToInventoryCountsTable.bind(null,"ending",e)},(0,v.roundTwo)(e.row.end_inv_quantity)))}},{Header:"Usage Quantity",accessor:"usage_qty",Cell:function(t){return f.default.createElement("div",{style:{textAlign:"right"}},(0,v.roundTwo)(t.row.usage_qty))}},{Header:"Usage $",accessor:"usage",Cell:function(t){return f.default.createElement("div",{style:{textAlign:"right"}},(0,v.formatIntoDollars)(t.row.usage))}}];return f.default.createElement(m.default,{showPagination:!0,defaultPageSize:10,data:r,columns:i,defaultSorted:[{id:"usage",desc:!0}]})}}]),d}(f.Component);const b=(0,h.connect)((function(t){var e=t.cogs;return{currentCogsItemGL:e.currentCogsItemGL,item_level_trend:e.item_level_trend,items_select_all:e.items_select_all,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{setItems:g.setItems,updateItemCheckbox:g.updateItemCheckbox,itemSelectAll:g.itemSelectAll,setChartType:y.setChartType,pushHistory:y.pushHistory,fetchInvoicesByItem:g.fetchInvoicesByItem,fetchInventoryItemLoc:g.fetchInventoryItemLoc})(_)},6517:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(6486),c=n.n(l),u=n(8661),d=n(533),p=n(968),f=n(8016),h=n(7634);var m=function(t){(0,i.default)(d,t);var e,n,l=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function d(){return(0,a.default)(this,d),l.apply(this,arguments)}return(0,r.default)(d,[{key:"render",value:function(){var t=this.props,e=t.item_level_trend,n=t.group_name,a=e.map((function(t){var e=t.periodData,n=t.item_name,a=t.t_id,r=t.display,i=t.showInLegend,o=t.counting_unit,s=e.map((function(t){var e=t.starting_week,n=t.ending_week,r=t.beg_inv,i=t.beg_inv_quantity,o=t.purchases,s=t.purchase_quantity,l=t.end_inv,c=t.end_inv_quantity,u=t.unit_inventory_item_id,d=t.item_name,f=t.counting_unit,h=(0,p.calculateUsage)(i,s,c),m=(0,p.calculateUsage)(r,o,l);return"undefined"===f&&(f=""),{x:(0,p.dateToUTC)(n),y:h,unit_inventory_item_id:u,starting_week:e,ending_week:n,item_name:d,usage:m,usage_qty:h,beg_inv:r,beg_inv_quantity:i,purchases:o,purchase_quantity:s,end_inv:l,end_inv_quantity:c,counting_unit:f,t_id:a}}));return"undefined"===o&&(o=""),{name:n,data:s,t_id:a,visible:r,showInLegend:i,counting_unit:o}})),r=(a=c().sortBy(a,"name")).filter((function(t){return t.visible})).map((function(t){var e=t.name,n=t.t_id,a=t.data,r=t.counting_unit;return u.default.createElement("div",{key:n,className:"items-usage-tabular-item"},u.default.createElement(h.default,{name:e,t_id:n,data:a,counting_unit:r}))}));return u.default.createElement("div",{className:"item-usage-tabular-container"},r.length>0&&u.default.createElement("div",null,u.default.createElement(f.default,{style:{marginTop:"1em",float:"right",marginRight:"2%"},tableSelector:".backdrop .item-data-table table",fileName:"".concat((0,p.formatName)(n),"_item_usage.csv")}),u.default.createElement("div",{className:"clearfix"})),r)}}]),d}(u.Component);const y=(0,d.connect)((function(t){var e=t.cogs;return{group_name:t.company.group_name,item_level_trend:e.item_level_trend}}),{})(m)},5562:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8840),c=n.n(l),u=n(6486),d=n.n(u),p=n(381),f=n.n(p),h=n(8661),m=n(533),y=n(1271),g=n(1396),v=n(968);var _=["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],b=function(t){(0,i.default)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),l.apply(this,arguments)}return(0,r.default)(u,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"componentDidUpdate",value:function(t){d().isEqual(t.item_level_trend,this.props.item_level_trend)&&(this.props.isLoading||t.isLoading===this.props.isLoading)||this.updateChart(),d().isEqual(t.currentItemTid,this.props.currentItemTid)||this.updateDisplay()}},{key:"updateDisplay",value:function(){var t=this.props.currentItemTid,e=t.tid,n=t.display;if(e){var a=d().find(this.chart.series,(function(t){return t.userOptions.t_id===e}));a&&(n?a.update({showInLegend:!0,visible:!0},!0):a.update({showInLegend:!1,visible:!1},!0))}}},{key:"calculateUsage",value:function(t,e,n){return(t=parseFloat(t)||0)+(e=parseFloat(e)||0)-(parseFloat(n)||0)}},{key:"updateChart",value:function(){var t=this;c().theme={colors:_};var e=this.props,n=e.currentCogsItemGL,a=e.item_level_trend.map((function(e){var n=e.periodData,a=e.item_name,r=e.t_id,i=e.display,o=e.showInLegend;return{name:a,data:n.map((function(e){var n=e.starting_week,a=e.ending_week,i=e.beg_inv,o=e.beg_inv_quantity,s=e.purchases,l=e.purchase_quantity,c=e.end_inv,u=e.end_inv_quantity,d=e.unit_inventory_item_id,p=e.item_name,f=e.counting_unit,h=t.calculateUsage(o,l,u),m=t.calculateUsage(i,s,c);return"undefined"===f&&(f=""),{x:(0,v.dateToUTC)(a),y:h,unit_inventory_item_id:d,starting_week:n,ending_week:a,item_name:p,usage:m,usage_qty:h,beg_inv:i,beg_inv_quantity:o,purchases:s,purchase_quantity:l,end_inv:c,end_inv_quantity:u,counting_unit:f,t_id:r}})),t_id:r,visible:i,showInLegend:o}}));a=d().sortBy(a,"name"),this.chart=c().chart(this.itemUsageTrend,{title:{text:"".concat(n," Items Usage Trend")},yAxis:{title:{text:"Usage Qty"}},xAxis:{type:"datetime",startOfWeek:0,tickInterval:6048e5,tickmarkPlacement:"on"},legend:{layout:"horizontal",align:"center",enabled:!1,itemStyle:{cursor:"default"},itemHoverStyle:{cursor:"default"}},tooltip:{formatter:function(){var t=function(t,e,n){var a=parseFloat(n)/parseFloat(t);return d().isNaN(a)&&(a=0),a=(0,v.formatIntoDollars)(a),n=(0,v.formatIntoDollars)(n),d().isEmpty(e)||(e=1!==t?"".concat(e,"s"):e),"".concat((0,v.roundTwo)(t)," ").concat(e.toLocaleLowerCase()," @ ").concat(a,"=").concat(n)},e=this.point,n=e.beg_inv_quantity,a=e.counting_unit,r=e.beg_inv,i=e.purchase_quantity,o=e.purchases,s=e.end_inv_quantity,l=e.end_inv,c=e.usage,u=e.usage_qty,p=f()(this.point.ending_week).format("MM/DD/YYYY"),h=t(n,a,r),m=t(i,a,o),y=t(s,a,l),g=t(u,a,c);return"<div><b>".concat(this.series.name,"</b><br/></div>")+"<div>Week Ending: ".concat(p,"<br/></div>")+"<div>BI: ".concat(h,"<br/></div>")+"<div>Purchases: ".concat(m,"<br/></div>")+"<div>EI: ".concat(y,"<br/></div>")+"<div>Usage: ".concat(g,"<br/></div>")}},plotOptions:{series:{pointIntervalUnit:"week",label:{connectorAllowed:!1},pointStart:2010,point:{events:{click:function(e){var n=f()(new Date(e.point.starting_week)).format("MM/DD/YYYY"),a=f()(new Date(e.point.ending_week)).format("MM/DD/YYYY");t.props.fetchInventoryItemLoc(n,e.point.unit_inventory_item_id,t.props.byInvoiceDate),t.props.fetchInvoicesByItem({startDate:n,endDate:a,itemId:e.point.unit_inventory_item_id,byInvoiceDate:t.props.byInvoiceDate}),t.props.setChartType(t.props.widget_id,"inventory_counts_table"),t.props.pushHistory(t.props.widget_id,"inventory_counts_table",e.point.item_name)}}},events:{legendItemClick:function(t){t.preventDefault()}}}},series:a})}},{key:"render",value:function(){var t=this;return h.default.createElement("div",null,h.default.createElement("div",{ref:function(e){t.itemUsageTrend=e},style:{display:"flex"},className:"chart"}))}}]),u}(h.Component);const C=(0,m.connect)((function(t){var e=t.cogs;return{currentCogsItemGL:e.currentCogsItemGL,item_level_trend:e.item_level_trend,currentItemTid:e.currentItemTid,isLoading:e.isLoading,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{setChartType:y.setChartType,pushHistory:y.pushHistory,fetchInventoryItemLoc:g.fetchInventoryItemLoc,updateItemCheckbox:g.updateItemCheckbox,fetchInvoicesByItem:g.fetchInvoicesByItem})(b)},5100:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203),y=n(4326);function g(t,e){return t?{chart:{type:"pie"},title:{text:""},subtitle:{text:""},tooltip:{enabled:!0,formatter:function(){return"".concat(this.point.x,"<br>").concat(this.y,"%")}},plotOptions:{pie:{dataLabels:{enabled:!0,formatter:function(){return"".concat(this.point.x,"<br>").concat(this.y,"%")}}}},series:[{name:"GL Spend",colorByPoint:!0,data:t.map((function(t){return{x:t.gl_name,y:parseFloat(t.percent),className:e?"":"no-pointer"}})).sort((function(t,e){return t.y-e.y}))}]}:{}}var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.printView,r=u().isEmpty(this.props.onDataClick);return f.default.createElement("div",null,f.default.createElement(m.default,(0,a.default)({dataIsPresent:!u().isEmpty(e),config:g(e,r),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],fullscreenHeightRatio:.6},this.props)),f.default.createElement("div",{className:n?"":"cogs-table-container"},f.default.createElement(y.default,{printView:n,data:e})))}}]),d}(f.Component);v.defaultProps={widthRatio:.7,heightRatio:.7},v.propTypes={container:p().string.isRequired};const _=(0,h.connect)((function(t){return{reports:t.reports}}))(v)},4326:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(6156),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(8661),f=n(533),h=n(968),m=n(2262);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=function(t){(0,s.default)(u,t);var e,n,a=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(t){var e;return(0,r.default)(this,u),(e=a.call(this,t)).formatData=e.formatData.bind((0,o.default)(e)),e}return(0,i.default)(u,[{key:"formatData",value:function(){var t=this.props.data;return d().isEmpty(t)?[]:t.map((function(t){var e=t.amount;return g(g({},t),{},{amount:parseFloat(e)})}))}},{key:"render",value:function(){var t=[{Header:"GL Name",accessor:"gl_name",minWidth:175},{Header:"Beginning Inventory",accessor:"beg_inv",Cell:function(t){return p.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatIntoDollars)(t.row.beg_inv))}},{Header:"Purchases",accessor:"purchases",Cell:function(t){return p.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatIntoDollars)(t.row.purchases))}},{Header:"Ending Inventory",accessor:"end_inv",Cell:function(t){return p.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatIntoDollars)(t.row.end_inv))}},{Header:"Usage",accessor:"cost",Cell:function(t){return p.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatIntoDollars)(t.row.cost))}},{Header:"Cost %",accessor:"percent",maxWidth:80,Cell:function(t){return p.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatPercent)(t.row.percent))}}];return p.default.createElement(m.default,{showPagination:!1,columns:t,data:this.formatData(),printView:this.props.printView})}}]),u}(p.Component);v.defaultProps={},v.propTypes={};const _=(0,f.connect)((function(t){return{reports:t.reports}}))(v)},1454:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203);function y(t){return u().isEmpty(t)?{}:{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Percent"}},tooltip:{enabled:!1,valueSuffix:"%"},plotOptions:{bar:{dataLabels:{enabled:!0,format:"{y} %"}}},series:[{name:"Categories",data:t.map((function(t){return t.percent}))}]}}var g=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props.data;return f.default.createElement(m.default,(0,a.default)({dataIsPresent:!u().isEmpty(t),config:y(t),theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],modules:[]},this.props))}}]),d}(f.Component);g.defaultProps={widthRatio:.7,heightRatio:.7},g.propTypes={container:p().string.isRequired};const v=(0,h.connect)((function(t){return{reports:t.reports}}))(g)},6859:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203);function y(t){if(u().isEmpty(t))return{};var e=t.cost_across_units;return{chart:{type:"bar"},title:{text:""},xAxis:{categories:e.map((function(t){return t.name})),labels:{step:1},title:{text:null}},yAxis:{labels:{overflow:"allow",step:1},title:{text:"Percent"}},tooltip:{enabled:!1,valueSuffix:""},plotOptions:{bar:{dataLabels:{enabled:!0,allowOverlap:!0,format:"{y} %"}}},credits:{enabled:!1},series:[{name:"Categories",data:e.map((function(t){return t.percent})),dataLabels:{enabled:!0,allowOverlap:!0}}]}}var g=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props.data;return f.default.createElement(m.default,(0,a.default)({dataIsPresent:!u().isEmpty(t),config:y(t),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);g.defaultProps={widthRatio:.7,heightRatio:.7},g.propTypes={container:p().string.isRequired};const v=(0,h.connect)((function(t){return{reports:t.reports}}))(g)},2160:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(968),y=n(3203);function g(t){if(u().isEmpty(t))return{};var e=t.cost_across_company_by_category,n=(0,m.sortDivisions)(e);return{chart:{type:"bar"},title:{text:""},xAxis:{categories:n.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Percent"}},tooltip:{enabled:!1,valueSuffix:"%"},plotOptions:{bar:{dataLabels:{enabled:!0,format:"{y} %"}}},series:[{name:"Divisions",data:n.map((function(t){return t.percent}))}]}}var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props.data;return f.default.createElement(y.default,(0,a.default)({dataIsPresent:!u().isEmpty(t),config:g(t),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);v.defaultProps={widthRatio:.7,heightRatio:.7},v.propTypes={container:p().string.isRequired};const _=(0,h.connect)((function(t){return{reports:t.reports}}))(v)},2890:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>x});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(381),f=n.n(p),h=n(8661),m=n(533),y=n(1271),g=n(1396),v=n(968),_=n(3966),b=n(1713),C=n(2412),D=n(6653),k=n(5100),E=n(1454),w=n(6859),R=n(2160),P=n(4557),I=n(9276),S=n(496);var T=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).renderChart=e.renderChart.bind((0,o.default)(e)),e.wrapChart=e.wrapChart.bind((0,o.default)(e)),e.getChart=e.getChart.bind((0,o.default)(e)),e.drilldown=e.drilldown.bind((0,o.default)(e)),e.fetchChartData=e.fetchChartData.bind((0,o.default)(e)),e.handleCostAcrossCompanyClick=e.handleCostAcrossCompanyClick.bind((0,o.default)(e)),e.handleCostByCategoryClick=e.handleCostByCategoryClick.bind((0,o.default)(e)),e.handleCostAcrossUnitsClick=e.handleCostAcrossUnitsClick.bind((0,o.default)(e)),e.handleGlClick=e.handleGlClick.bind((0,o.default)(e)),e.params=e.params.bind((0,o.default)(e)),e.costByCategoryParams=e.costByCategoryParams.bind((0,o.default)(e)),e.unit_ids=e.unit_ids.bind((0,o.default)(e)),e.toggleDivisionChart=e.toggleDivisionChart.bind((0,o.default)(e)),e.unitIdsByDivision=e.unitIdsByDivision.bind((0,o.default)(e)),e.fetchCostAcrossUnits=e.fetchCostAcrossUnits.bind((0,o.default)(e)),e.fetchCogsAcrossUnit=e.fetchCogsAcrossUnit.bind((0,o.default)(e)),e.setCostDates=e.setCostDates.bind((0,o.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,o.default)(e)),e.goToInitialChart=e.goToInitialChart.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props,e=t.id;t.fullscreen||(this.props.pushHistory(e,"cost_across_company","Aggregate Company Cost Of Sales"),this.props.setChartType(e,"cost_across_company"),this.props.fetchReport(this.props.id,"cost_across_company",this.costAcrossCompanyParams()))}},{key:"UNSAFE_componentWillUpdate",value:function(t){var e=this.props.widget_settings.byInvoiceDate!==t.widget_settings.byInvoiceDate,n=t.id,a=t.dashboard.fullscreenOpen,r=this.props.dashboard.activeWidget?this.props.dashboard.activeWidget.id:null,i=!a&&this.props.dashboard.fullscreenOpen&&this.props.dashboard.updatedInFullscreen&&this.props.id!==r,o=this.widget(t).drillUp,s=this.props.startDate!==t.startDate||this.props.endDate!==t.endDate,l=!d().isEqual(this.props.company.locations,t.company.locations),c=!d().isEqual(this.widget().chartType,this.widget(t).chartType)&&o;if(!t.fullscreen){l&&(this.goToInitialChart(t),"cost_across_company"===this.widget(t).chartType&&this.props.fetchReport(this.props.id,"cost_across_company",this.costAcrossCompanyParams(t))),(s||c||i||e)&&(this.props.fetchReport(this.props.id,this.widget(t).chartType,this.params(t)),this.props.setWidgetState(n,{drillUp:!1,startDate:null,endDate:null}));var u=this.widget(t),p=u.startDate,f=u.endDate,h=u.costDatesInvalid;!p&&!f&&!h&&this.setCostDates(t)}}},{key:"setCostDates",value:function(t){var e=t.id,n=t.reports,a=this.widget(t).chartType;if(n[e]&&!d().isEmpty(n[e][a])&&!n[e].fetchingData){var r=n[e][a],i=r[0]?r[0]:r[a][0],o=i.StartDate,s=i.EndDate;o&&s&&(isNaN(Date.parse(o))||isNaN(Date.parse(s))?this.setWidgetState({costDatesInvalid:!0}):this.props.setWidgetState(e,{startDate:f()(Date.parse(o)),endDate:f()(Date.parse(s))}))}}},{key:"params",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;switch(this.widget(t).chartType){case"cost_across_company":return this.costAcrossCompanyParams(t);case"cost_across_company_by_category":case"cogs_across_company":return this.costByCategoryParams(t);case"cost_across_units":return this.costAcrossUnitsParams(t,!0);case"cogs_across_division":return this.costTrendDivisionParams(t);case"cogs_across_unit":return this.glParams(t);case"cost_trend_gl_unit":return this.glUnitParams(t);case"cost_trend_across_company":return this.costByCategoryParams(t);case"cost_trend_across_division":return this.costTrendDivisionParams(t);default:return""}}},{key:"unitIdsByDivision",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;return e.company.locations.filter((function(e){return"location"===e.type&&e.checked&&e.region===t})).map((function(t){return t.unit_id}))}},{key:"unit_ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.widget(),a=n.division;return e?this.unitIdsByDivision(a,t):t.company.locations.filter((function(t){return"location"===t.type&&t.checked})).map((function(t){return t.unit_id}))}},{key:"fetchChartData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=encodeURIComponent(this.widget().category);this.props.fetchReport(this.props.id,t,"?category=".concat(n).concat(this.getDateParams()).concat(e))}},{key:"widget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.id,n=t.widgets;return n.find((function(t){return t.id===e}))}},{key:"getDateParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.reports,n=e.startDate,a=e.endDate;return"&start_date=".concat(f()(n).format("MM/DD/YYYY"),"&end_date=").concat(f()(a).format("MM/DD/YYYY"))}},{key:"wrapChart",value:function(t){return h.default.createElement("div",{className:"fruit-main-chart"},t)}},{key:"renderChart",value:function(){var t=this.widget().chartType,e=t.split("_"),n="table"===e[e.length-1],a=this.getChart(t);return n?a:this.wrapChart(a)}},{key:"getChart",value:function(t){var e=this,n=this.props,r=n.reports,i=n.id,o="chart-".concat(i);switch(t){case"cost_across_company":return h.default.createElement("div",null,h.default.createElement(E.default,(0,a.default)({onDataClick:this.handleCostAcrossCompanyClick,data:r[i].cost_across_company,container:o,type:t,widthRatio:.85,heightRatio:.65},this.props)));case"cost_across_company_by_category":var s=!r[i].cost_across_company_by_category||r[i].cost_across_company_by_category.show_trend;return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleCompanyByCatChart("cost_trend_across_company")},disabled:!s},"Show Trend Across Company"),h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleCompanyByCatChart("cogs_across_company")}},"Show COGS Across Company"),h.default.createElement(R.default,(0,a.default)({onDataClick:function(t){return e.handleCostByCategoryClick(t.point.category)},data:r[i].cost_across_company_by_category,container:o,type:t,widthRatio:.85,heightRatio:.55},this.props)));case"cost_across_units":var l=!r[i].cost_across_company_by_category||r[i].cost_across_company_by_category.show_trend;return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleDivisionChart("cost_trend_across_division")},disabled:!l},"Show Trend Across Division"),h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleDivisionChart("cogs_across_division")}},"Show COGS Across Division"),h.default.createElement(w.default,(0,a.default)({onDataClick:function(t){return e.handleCostAcrossUnitsClick(t.point.category)},data:r[i].cost_across_units,container:o,type:t,widthRatio:.85,heightRatio:.55},this.props)));case"cogs_across_unit":return h.default.createElement(C.default,(0,a.default)({widget_id:i,data:r[i].cogs_across_unit,container:o,type:t,widthRatio:.85,heightRatio:.4,category:this.widget().category},this.props));case"cost_trend_across_company":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleBack("cost_across_company_by_category")}},"Show Cost Across Company"),h.default.createElement(S.default,(0,a.default)({data:r[i].cost_trend_across_company,title:this.widget().category,container:o,type:t,widthRatio:.85,heightRatio:.68},this.props)));case"cost_trend_across_division":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleBack("cost_across_units")}},"Show Cost Across Division"),h.default.createElement(S.default,(0,a.default)({data:r[i].cost_trend_across_division,title:this.widget().division,container:o,type:t,widthRatio:.85,heightRatio:.68},this.props)));case"cost_trend_gl_unit":return h.default.createElement(S.default,(0,a.default)({data:r[i].cost_trend_gl_unit,title:this.widget().gl_name,container:o,type:t,widthRatio:.85,heightRatio:.75},this.props));case"cogs_across_company":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleBack("cost_across_company_by_category")}},"Show Cost Across Company"),h.default.createElement(k.default,(0,a.default)({data:r[i].cogs_across_company,title:this.widget().gl_name,container:o,type:t,widthRatio:.85,heightRatio:.4},this.props)));case"cogs_across_division":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.toggleBack("cost_across_units")}},"Show Cost Across Division"),h.default.createElement(k.default,(0,a.default)({data:r[i].cogs_across_division,title:this.widget().gl_name,container:o,type:t,widthRatio:.85,heightRatio:.4},this.props)));case"cogs_across_unit_trend":return h.default.createElement(D.default,{widget_id:i});case"inventory_counts_table":return h.default.createElement(P.default,{widget_id:i});case"ap_spend_table":return h.default.createElement(b.default,{widget_id:i});case"invoices_by_item":return h.default.createElement(I.default,{widget_id:i});default:return h.default.createElement("div",null,"Whoops!")}}},{key:"drilldown",value:function(t,e){var n=this,a=this.props.id;setTimeout((function(){n.props.onExpandClick(a),n.props.setChartType(a,t),n.props.pushHistory(a,t,e)}),100)}},{key:"costAcrossCompanyParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.company.group_id;return"?group_id=".concat(e,"&unit_ids=").concat(this.unit_ids(t)).concat(this.getDateParams(t))}},{key:"handleCostAcrossCompanyClick",value:function(t){(0,v.setFetching)(!1);var e=this.props,n=e.id,a=e.company.locations,r=t.point.category;this.props.setGlFilters([]),this.props.setWidgetState(n,{category:r});var i=(0,v.selectedDivisions)(a),o=(0,v.selectedUnits)(a);if(1===o.length)this.fetchCogsAcrossUnit(o[0],r),this.drilldown("cogs_across_unit",r);else if(1===i.length){var s=i[0]?i[0].name:"";this.fetchCostAcrossUnits(s,r),this.drilldown("cost_across_units",r)}else this.props.fetchReport(this.props.id,"cost_across_company_by_category",this.costByCategoryParams()),this.props.setWidgetState(n,{category:r}),this.drilldown("cost_across_company_by_category",r)}},{key:"fetchCostAcrossUnits",value:function(t,e){var n=this,a=encodeURIComponent(e),r="?unit_ids=".concat(this.unitIdsByDivision(t),"&category=").concat(a).concat(this.getDateParams()),i=this.props.id;this.props.fetchReport(this.props.id,"cost_across_units",r),setTimeout((function(){n.props.setWidgetState(i,{division:t,category:e})}),75)}},{key:"fetchCogsAcrossUnit",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().category,a=this.props,r=a.id,i=a.company,o=i.group_id,s=encodeURIComponent(n),l="?unit_id=".concat(t.unit_id,"&group_id=").concat(o,"&category=").concat(s).concat(this.getDateParams());this.props.fetchReport(this.props.id,"cogs_across_unit",l),setTimeout((function(){e.props.setWidgetState(r,{unit_id:t.unit_id,category:n})}),75)}},{key:"costByCategoryParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.company,n=e.group_id,a=this.widget(),r=a.category,i=encodeURIComponent(r);return"?group_id=".concat(n,"&unit_ids=").concat(this.unit_ids(t),"&category=").concat(i).concat(this.getDateParams(t))}},{key:"handleCostByCategoryClick",value:function(t){var e=this.props,n=e.id,a=e.company;this.props.setWidgetState(n,{division:t});var r=(0,v.selectedUnits)(a.locations.filter((function(e){return e.region===t})));1===r.length?(this.fetchCogsAcrossUnit(r[0]),this.drilldown("cogs_across_unit",r[0].name)):(this.props.fetchReport(this.props.id,"cost_across_units",this.costAcrossUnitsParams()),this.drilldown("cost_across_units",t))}},{key:"costAcrossUnitsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.category,a=encodeURIComponent(n);return"?unit_ids=".concat(this.unit_ids(t,!0),"&category=").concat(a).concat(this.getDateParams(t))}},{key:"handleCostAcrossUnitsClick",value:function(t){var e=this.props,n=e.id,a=e.reports[n].cost_across_units.cost_across_units.find((function(e){return e.name===t})).unit_id;this.props.setWidgetState(n,{unit_id:a}),(0,v.setFetching)(!1),this.props.fetchReport(this.props.id,"cogs_across_unit",this.glParams()),this.drilldown("cogs_across_unit",t)}},{key:"glParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.company,n=this.widget(),a=n.unit_id,r=n.category,i=encodeURIComponent(r),o=e.group_id;return"?unit_id=".concat(a,"&group_id=").concat(o,"&category=").concat(i).concat(this.getDateParams(t))}},{key:"handleGlClick",value:function(t){var e=this.props,n=e.reports,a=e.id,r=t.point.x,i=n[a].cogs_across_unit.find((function(t){return t.gl_name===r})).gl_code;this.props.setWidgetState(this.props.id,{gl_code:i,gl_name:r}),this.props.fetchReport(this.props.id,"cost_trend_gl_unit",this.glUnitParams()),this.drilldown("cost_trend_gl_unit",r)}},{key:"glUnitParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.gl_code,a=e.unit_id,r=e.category,i=encodeURIComponent(r);return"?gl_code=".concat(n,"&unit_id=").concat(a,"&category=").concat(i).concat(this.getDateParams(t))}},{key:"costTrendDivisionParams",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=e.company,a=n.locations_by_region,r=n.group_id,i=this.widget(),o=i.division,s=i.category,l=encodeURIComponent(s),c=a.find((function(t){return t.name===o})),u=c.division_id,d=n.locations.filter((function(e){return"location"===e.type&&e.region===t.widget().division&&e.checked})).map((function(t){return t.unit_id}));return"?unit_ids=".concat(d,"&group_id=").concat(r,"&division_id=").concat(u,"&category=").concat(l).concat(this.getDateParams(e))}},{key:"toggleBack",value:function(t){this.props.setChartType(this.props.id,t)}},{key:"toggleCompanyByCatChart",value:function(t){this.props.setChartType(this.props.id,t),this.props.fetchReport(this.props.id,t,this.costByCategoryParams())}},{key:"toggleDivisionChart",value:function(t){var e=this.props.id;this.props.setChartType(e,t),this.props.fetchReport(this.props.id,t,this.costTrendDivisionParams())}},{key:"onCompressClick",value:function(){this.goToInitialChart(),this.props.onCompressClick()}},{key:"goToInitialChart",value:function(){var t=this.props.id;this.props.setChartType(t,"cost_across_company"),this.props.sliceHistory(t,-1),this.props.pushHistory(t,"cost_across_company","Aggregate Company Cost Of Sales")}},{key:"render",value:function(){var t=this.widget().chartType,e=this.widget(),n=e.startDate,r=e.endDate,i=n&&r?{startDate:f()(n).format("MM/DD/YYYY"),endDate:f()(r).format("MM/DD/YYYY")}:{startDate:"",endDate:""};return t?h.default.createElement(_.default,(0,a.default)({title:"Cost of Sales",type:t,shouldFetch:!1,history:this.props.history,dates:i,showDatesCanvas:n&&r},this.props,{onCompressClick:this.onCompressClick}),this.renderChart()):h.default.createElement("div",null)}}]),p}(h.Component);const x=(0,m.connect)((function(t){return{widgets:t.widgets.widgets,widget_settings:t.widget_settings.cost,reports:t.reports,startDate:t.reports.startDate,endDate:t.reports.endDate,company:t.company,dashboard:t.dashboard}}),{setDrilldownIndex:y.setDrilldownIndex,setReportAttribute:y.setReportAttribute,fetchReport:y.fetchReport,pushHistory:y.pushHistory,sliceHistory:y.sliceHistory,setChartType:y.setChartType,setCompanyData:y.setCompanyData,setWidgetState:y.setWidgetState,setGlFilters:g.setGlFilters})(T)},6229:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8661);var c=function(t,e){return e.map((function(e,n){return l.default.createElement("td",{key:"".concat(t,"_").concat(n),className:"align-right"},e)}))};const u=function(t){(0,i.default)(d,t);var e,n,u=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function d(){return(0,a.default)(this,d),u.apply(this,arguments)}return(0,r.default)(d,[{key:"render",value:function(){var t=this.props,e=t.name,n=t.data,a=t.gl_code,r=n.map((function(t){return t.ending_week})).map((function(t,e){return l.default.createElement("th",{key:"date-".concat(e),className:"align-right"},t)})),i=c("bi",n.map((function(t){return t.beg_inv}))),o=c("purchases",n.map((function(t){return t.purchases}))),s=c("ei",n.map((function(t){return t.end_inv}))),u=c("cost_percent",n.map((function(t){return t.cost}))),d=c("usage",n.map((function(t){return t.usage})));return l.default.createElement("div",{className:"gl-tabular-item"},l.default.createElement("h4",null,e," (",a,")"),l.default.createElement("table",{className:"table table-striped","data-title":e},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null),r)),l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("th",null,"BI"),i),l.default.createElement("tr",null,l.default.createElement("th",null,"Purchases"),o),l.default.createElement("tr",null,l.default.createElement("th",null,"EI"),s),l.default.createElement("tr",null,l.default.createElement("th",null,"Cost %"),u),l.default.createElement("tr",null,l.default.createElement("th",null,"Usage"),d))))}}]),d}(l.Component)},4557:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8661),c=n(533),u=n(1271),d=n(3201),p=n(8524),f=n(381),h=n.n(f);var m=function(t){(0,i.default)(u,t);var e,n,c=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),c.apply(this,arguments)}return(0,r.default)(u,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.startDate,a=e.endDate,r=e.byInvoiceDate;t.startDate===n&&t.endDate===a&&t.byInvoiceDate===r||this.navigateBack()}},{key:"navigateBack",value:function(){var t=this.props.widget_id;this.props.setChartType(t,"cogs_across_unit_trend"),this.props.sliceHistory(t,3)}},{key:"render",value:function(){var t=this.props.invoices_by_item;return l.default.createElement("div",{className:"inventory-counts-container"},l.default.createElement(d.default,null),l.default.createElement("div",{className:"inventory-counts-invoices-table"},l.default.createElement(p.default,{dataMap:t,defaultPageSize:5})))}}]),u}(l.Component);const y=(0,c.connect)((function(t){return{invoices_by_item:t.cogs.invoices_by_item,startDate:h()(t.reports.startDate).format("MM/DD/YYYY"),endDate:h()(t.reports.endDate).format("MM/DD/YYYY"),byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{setChartType:u.setChartType,sliceHistory:u.sliceHistory})(m)},3201:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(6486),c=n.n(l),u=n(8661),d=n(533),p=n(5903),f=n(1271),h=n(968);var m=function(t){(0,i.default)(d,t);var e,n,l=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function d(){return(0,a.default)(this,d),l.apply(this,arguments)}return(0,r.default)(d,[{key:"render",value:function(){var t=this.props.item_inventory_level_by_location.map((function(t){var e=t.starting_week,n=t.inv_location;return{starting_week:e,unit_inventory_item_id:t.unit_inventory_item_id,inv_location:n,counting_unit:t.counting_unit,end_inv_quantity:t.end_inv_quantity,end_inv:t.end_inv}})),e=[{Header:"Location Name",accessor:"inv_location"},{Header:"Unit",accessor:"counting_unit",Cell:function(t){return u.default.createElement("div",null,t.row.counting_unit)}},{Header:"Qty",accessor:"end_inv_quantity",Cell:function(t){return u.default.createElement("div",{style:{textAlign:"right"}},t.row.end_inv_quantity)}},{Header:"Item Price",accessor:"end_inv",Cell:function(t){var e=t.original,n=e.end_inv,a=e.end_inv_quantity,r=parseFloat(n/a);return c().isNaN(r)&&(r=0),r=(0,h.formatIntoDollars)(r),u.default.createElement("div",{style:{textAlign:"right"}},r)}},{Header:"Total",accessor:"end_inv",Cell:function(t){return u.default.createElement("div",{style:{textAlign:"right"}},(0,h.formatIntoDollars)(t.row.end_inv))}}];return u.default.createElement("div",{className:"inventory-counts-table-container"},u.default.createElement("div",{className:"title"},u.default.createElement("h4",null,"Inventory Counts")),u.default.createElement(p.default,{data:t,columns:e,defaultPageSize:5}))}}]),d}(u.Component);const y=(0,d.connect)((function(t){return{item_inventory_level_by_location:t.cogs.item_inventory_level_by_location}}),{setChartType:f.setChartType,pushHistory:f.pushHistory})(m)},9276:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(8661),c=n(533),u=n(1396),d=n(8524),p=n(381),f=n.n(p);var h=!1,m=function(t){(0,i.default)(u,t);var e,n,c=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),c.apply(this,arguments)}return(0,r.default)(u,[{key:"componentDidUpdate",value:function(t,e){this.props.isLoading||t.startDate===this.props.startDate&&t.endDate===this.props.endDate&&t.byInvoiceDate===this.props.byInvoiceDate||this.updateData()}},{key:"updateData",value:function(){h||(h=!0,this.props.fetchInvoicesByItem({itemId:this.props.itemId,byInvoiceDate:this.props.byInvoiceDate}),setTimeout((function(){h=!1}),1e3))}},{key:"render",value:function(){var t=this.props.invoices_by_item.map((function(t){return{name:t.name,invoiceNumber:t.invoiceNumber,invoiceDate:t.invoiceDate,starting_week:t.starting_week,ending_week:t.ending_week,checkNumber:t.checkNumber,checkDate:t.checkDate,amount:t.amount,imageLink:t.imageLink}}));return l.default.createElement("div",{className:"ap-spend-table"},l.default.createElement("div",{className:"title"},l.default.createElement("h3",null,"Invoices by Item")),l.default.createElement(d.default,{dataMap:t}))}}]),u}(l.default.Component);const y=(0,c.connect)((function(t){var e=t.reports,n=t.cogs;return{startDate:f()(e.startDate).format("MM/DD/YYYY"),endDate:f()(e.endDate).format("MM/DD/YYYY"),invoices_by_item:t.cogs.invoices_by_item,isLoading:n.isLoading,itemId:n.itemId,byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}),{fetchInvoicesByItem:u.fetchInvoicesByItem})(m)},8524:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var a=n(6610),r=n(5991),i=n(379),o=n(6070),s=n(7608),l=n(6486),c=n.n(l),u=n(381),d=n.n(u),p=n(8661),f=n(533),h=n(5903),m=n(968);var y=function(t){(0,i.default)(u,t);var e,n,l=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,s.default)(e);if(n){var r=(0,s.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,o.default)(this,t)});function u(){return(0,a.default)(this,u),l.apply(this,arguments)}return(0,r.default)(u,[{key:"formatDate",value:function(t){return c().isEmpty(t)?"":d()(new Date(t)).format("MM/DD/YYYY")}},{key:"render",value:function(){var t=this,e=this.props,n=e.dataMap,a=e.defaultPageSize,r=e.byInvoiceDate?"invoiceDate":"ending_week",i=[{Header:"Vendor Name",accessor:"name"},{Header:"Invoice Number",accessor:"invoiceNumber"},{Header:"Invoice Date",accessor:"invoiceDate",Cell:function(e){var n=e.original,a=n.starting_week,r=n.ending_week,i=e.row.invoiceDate,o=new Date(a).getTime(),s=new Date(r).getTime(),l=new Date(i).getTime();return l>=o&&l<=s?p.default.createElement("div",null,t.formatDate(i)):p.default.createElement("div",{style:{color:"red",fontWeight:"bolder"}},t.formatDate(i))}},{Header:"Submitted Date",accessor:"ending_week",Cell:function(e){var n=e.row.ending_week;return p.default.createElement("div",null,t.formatDate(n))}},{Header:"Check Date",accessor:"checkDate",Cell:function(e){var n=e.row.checkDate;return p.default.createElement("div",{style:{textAlign:"left"}},t.formatDate(n))}},{Header:"Check Number",accessor:"checkNumber"},{Header:"Amount",accessor:"amount",Cell:function(t){var e=t.row.amount;return p.default.createElement("div",{style:{textAlign:"right"}},(0,m.formatIntoDollars)(e))}},{Header:"Image",accessor:"imageLink",Cell:function(t){var e=t.row.imageLink;return e?p.default.createElement("div",{style:{textAlign:"left"}},c().isEmpty(e)?"":p.default.createElement("a",{target:"_blank",href:e},"View Image")):p.default.createElement("div",null)}}];return p.default.createElement(h.default,{data:n,columns:i,defaultSorted:[{id:r,asc:!0}],defaultPageSize:a})}}]),u}(p.default.Component);y.defaultProps={dataMap:[],defaultPageSize:10};const g=(0,f.connect)((function(t){return{byInvoiceDate:t.widget_settings.cost.byInvoiceDate}}))(y)},7634:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var a=n(6610),r=n(5991),i=n(3349),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(381),p=n.n(d),f=n(8661),h=n(968);const m=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(t){var e;return(0,a.default)(this,d),(e=c.call(this,t)).state={qty_dollar:"dollar"},e.handleRadioChange=e.handleRadioChange.bind((0,i.default)(e)),e}return(0,r.default)(d,[{key:"handleRadioChange",value:function(t){this.setState({qty_dollar:t.target.value})}},{key:"render",value:function(){var t=this.props,e=t.name,n=t.t_id,a=t.data,r=t.counting_unit,i="dollar"===this.state.qty_dollar,o=a.map((function(t){return p()(t.ending_week).format("MM/DD")})),s=a.map((function(t,e){return f.default.createElement("td",{className:"align-right",key:"bi-".concat(e)},i?(0,h.formatIntoDollars)(t.beg_inv):(0,h.roundTwo)(t.beg_inv_quantity))})),l=a.map((function(t,e){return f.default.createElement("td",{className:"align-right",key:"ei-".concat(e)},i?(0,h.formatIntoDollars)(t.end_inv):(0,h.roundTwo)(t.end_inv_quantity))})),c=a.map((function(t,e){return f.default.createElement("td",{className:"align-right",key:"purchases-".concat(e)},i?(0,h.formatIntoDollars)(t.purchases):(0,h.roundTwo)(t.purchase_quantity))})),d=a.map((function(t,e){return f.default.createElement("td",{className:"align-right",key:"usage-".concat(e)},i?(0,h.formatIntoDollars)(t.usage):(0,h.roundTwo)(t.usage_qty))}));return f.default.createElement("div",{className:"item-data-table"},f.default.createElement("h4",null,e),f.default.createElement("div",{style:{float:"left"}},!u().isEmpty(r)&&f.default.createElement("p",null,"Unit: ",r)),f.default.createElement("div",{style:{float:"right"},onChange:this.handleRadioChange},f.default.createElement("div",{className:"item-data-table-radio"},f.default.createElement("input",{type:"radio",name:"qty_dollar_".concat(n),value:"dollar",defaultChecked:i}),f.default.createElement("label",null,"$")),f.default.createElement("div",{className:"item-data-table-radio"},f.default.createElement("input",{type:"radio",name:"qty_dollar_".concat(n),value:"qty",defaultChecked:!i}),f.default.createElement("label",null,"Qty"))),f.default.createElement("div",{className:"clearfix"}),f.default.createElement("table",{className:"table table-striped","data-title":e},f.default.createElement("thead",null,f.default.createElement("tr",null,f.default.createElement("th",null),o.map((function(t,e){return f.default.createElement("th",{className:"align-right",key:"date-".concat(e)},t)})))),f.default.createElement("tbody",null,f.default.createElement("tr",null,f.default.createElement("th",null,"BI"),s),f.default.createElement("tr",null,f.default.createElement("th",null,"Purchases"),c),f.default.createElement("tr",null,f.default.createElement("th",null,"EI"),l),f.default.createElement("tr",null,f.default.createElement("th",null,"Usage"),d))))}}]),d}(f.Component)},496:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203);function y(t){return u().isEmpty(t)?{}:{title:{text:"Trend"},yAxis:{title:{text:"Percent"}},xAxis:{type:"datetime"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",enabled:!1},tooltip:{pointFormat:'<span style="color:{series.color}"></span><b>{point.y} %</b><br/>',xDateFormat:"%m/%d/%Y"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:2010}},series:[{data:t.map((function(t){return{x:Date.parse(t.starting_week),y:t.percent,className:"no-pointer"}}))}]}}var g=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props.data;return f.default.createElement(m.default,(0,a.default)({dataIsPresent:!u().isEmpty(t),config:y(t),theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);g.defaultProps={widthRatio:.7,heightRatio:.7},g.propTypes={container:p().string.isRequired};const v=(0,h.connect)((function(t){return{reports:t.reports}}))(g)},6827:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(5111),d=n.n(u),p=n(6486),f=n.n(p),h=n(5697),m=n.n(h),y=n(8661),g=n(533),v=n(968),_=n(3203),b=n(4981);var C=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).state={selected:"Margin"},e.buildConfig=e.buildConfig.bind((0,o.default)(e)),e.handleSelect=e.handleSelect.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"handleSelect",value:function(t){this.setState({selected:t.target.value})}},{key:"buildConfig",value:function(t){var e=this;if(f().isEmpty(t))return{};var n=(0,v.sortDivisions)(t),a=n.map((function(t){return t.DivisionName})),r=this.state.selected;return{chart:{type:"column"},title:{text:""},xAxis:{categories:a,title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Amount ($)"}},tooltip:{enabled:!0,formatter:function(){var t=this.point,e=t.marginPercent,n=t.costPercent,a=t.percentType,r="Margin"===a?e:n;return"<b>".concat(this.series.name,":<b>")+"<br>".concat((0,v.formatIntoDollars)(this.y),"<br>")+"<br>"+"<b>".concat(a," Percent:<b>")+"<br>".concat(r)}},plotOptions:{bar:{dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{data:n.map((function(t){return t.Recipe?{y:t.Recipe.GrossPrice.Value,name:t.DivisionName,id:t.DivisionId,marginPercent:t.Recipe.MarginPercent?t.Recipe.MarginPercent.FormattedValue:"0%",costPercent:t.Recipe.FoodCostPercent?t.Recipe.FoodCostPercent.FormattedValue:"0%",percentType:r}:{y:0,name:t.DivisionName,id:t.DivisionId}})),name:"Sales"},{data:n.map((function(t){return t.Recipe?{y:"Margin"===e.state.selected?t.Recipe.Impact.Value:t.Recipe.NetCost.Value,name:t.DivisionName,id:t.DivisionId,marginPercent:t.Recipe.MarginPercent?t.Recipe.MarginPercent.FormattedValue:"0%",costPercent:t.Recipe.FoodCostPercent?t.Recipe.FoodCostPercent.FormattedValue:"0%",percentType:r}:{y:0,name:t.DivisionName,id:t.DivisionId}})),name:this.state.selected,tooltip:{}}]}}},{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type;return y.default.createElement("div",{className:"spend-by-week"},y.default.createElement(b.default,{options:["Margin","Cost"],handleSelect:this.handleSelect,selected:this.state.selected}),y.default.createElement(_.default,(0,a.default)({dataIsPresent:!f().isEmpty(e[n][r]),config:this.buildConfig(e[n][r]),modules:[d()],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),p}(y.Component);C.defaultProps={widthRatio:.7,heightRatio:.7},C.propTypes={container:m().string.isRequired};const D=(0,g.connect)((function(t){return{reports:t.reports}}))(C)},1122:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(3203);var y=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.fullscreenOpen,r=!u().isEmpty(e),i=function(t){t=t.filter((function(t){return t.checked}));var e=!0,n=t.map((function(t){var n=t.QuantitySold,a=Number((100*t.MarginPercent.Value).toFixed(2))||0,r=Number((t.GrossPrice.Value/t.QuantitySold).toFixed(2))||0;return 0===n&&0===a&&0===r&&(e=!1),{x:n,y:a,z:r,name:t.Name,recipeId:t.CorporateRecipeId}})),a=n.map((function(t){return t.x})).reduce((function(t,e){return t+e}),0)/t.length||0,r=n.map((function(t){return t.y})).reduce((function(t,e){return t+e}),0)/t.length||0;e&&n.unshift({name:"dummy series",x:0,y:0,z:0,showInLegend:!1,color:"transparent",enableMouseTracking:!1});var i=[{data:n}];return{chart:{type:"bubble",plotBorderWidth:1,zoomType:"xy",marginRight:87},legend:{enabled:!1},title:{text:null},xAxis:{gridLineWidth:.01,title:{text:"Quantity Sold"},labels:{format:"{value}"},lineColor:"transparent",plotLines:[{color:"black",dashStyle:"dot",width:2,value:a,label:{rotation:0,y:15,style:{fontStyle:"italic"},text:"Quantity Sold Average: ".concat(a.toFixed(2))},zIndex:1e3}]},yAxis:{startOnTick:!1,endOnTick:!1,title:{text:"Margin"},labels:{format:"{value} %"},lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0,maxPadding:.2,plotLines:[{color:"black",dashStyle:"dot",width:2,value:r,label:{align:"right",style:{fontStyle:"italic"},text:"Margin Average: ".concat(r.toFixed(2)," %"),x:-10},zIndex:1e3}]},tooltip:{useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th colspan="2"><h3>{point.name}</h3></th></tr><tr><th>Quantity Sold:</th><td> {point.x}</td></tr><tr><th>Margin:</th><td> {point.y} %</td></tr><tr><th>Sale Price:</th><td> ${point.z}</td></tr>',footerFormat:"</table>"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}"}},bubble:{minSize:3,maxSize:50}},series:i}}(e);return f.default.createElement("div",{className:"bubble-chart ".concat(n?"fullscreen":"")},f.default.createElement("div",{className:"corner-titles"},f.default.createElement("div",null,"REPLATE"),f.default.createElement("div",null,"RETAIN")),f.default.createElement(m.default,(0,a.default)({dataIsPresent:r,config:i,modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"],fullscreenHeightRatio:.5,is_bubble:!0},this.props)),f.default.createElement("div",{className:"corner-titles corner-bottom"},f.default.createElement("div",null,"RETHINK"),f.default.createElement("div",null,"REPRICE")))}}]),d}(f.Component);y.defaultProps={widthRatio:.7,heightRatio:.7},y.propTypes={container:p().string.isRequired};const g=(0,h.connect)((function(t){return{reports:t.reports,fullscreenOpen:t.dashboard.fullscreenOpen}}))(y)},4606:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var a=n(6156),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(8840),u=n.n(c),d=n(857),p=n.n(d),f=n(6486),h=n.n(f);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const g=function(t){(0,o.default)(c,t);var e,n,a=(e=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function c(){return(0,r.default)(this,c),a.apply(this,arguments)}return(0,i.default)(c,[{key:"componentDidMount",value:function(){this.renderBubbleChart()}},{key:"renderBubbleChart",value:function(){var t=this.props,e=t.config,n=t.theme,a=t.printView;p()(u()),u().theme={colors:n,chart:{backgroundColor:null,style:{fontFamily:"Dosis, sans-serif"},animation:!a||{duration:100}},title:{style:{fontSize:"16px",fontWeight:"bold",textTransform:"uppercase"}},xAxis:{gridLineWidth:1},yAxis:{minorTickInterval:"auto",title:{style:{textTransform:"uppercase"}},labels:{style:{fontSize:"12px"}}},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"whitesmoke"},u().setOptions(u().theme);var r={point:{events:{click:this.handleDataClick}}},i=this.getSize(),o=i.width,s=i.height,l=y(y({},e),{},{xAxis:y(y({},e.xAxis),{},{labels:this.barXAxisConfig()}),chart:y(y({},e.chart),{},{width:o,height:s}),plotOptions:y(y({},e.plotOptions),{},{series:r})});this.chart=new(u().Chart)(this.state.chartId,l)}},{key:"updateFourRBubbleChart",value:function(t){for(var e=this;this.chart.series.length>0;)this.chart.series[0].remove(!0);t.forEach((function(t){e.chart.addSeries(t)}))}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.config,a=e.theme;this.setDimensions(),u().theme={colors:a},u().setOptions(u().theme),h().isEqual(n,t.config)||(this.updateFourRBubbleChart(n.series),this.chart.setTitle({text:n.title.text}),this.updateDrilldown(n),this.updateCategories(n),this.updatePlotLines(n),this.chart.redraw())}}]),c}(n(2490).default)},5677:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>v});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(8661),p=n(533),f=n(966),h=n(1122),m=n(2434),y=n(6432);var g=function(t){(0,o.default)(p,t);var e,n,c=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(){return(0,r.default)(this,p),c.apply(this,arguments)}return(0,i.default)(p,[{key:"componentDidUpdate",value:function(t){this.props.initialSelectedRecipes&&!u().isEqual(t.initialSelectedRecipes,this.props.initialSelectedRecipes)&&this.props.setSelectedRecipes(this.props.initialSelectedRecipes)}},{key:"componentDidMount",value:function(){this.props.setSelectedRecipes(this.props.initialSelectedRecipes)}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.reports,r=t.widget,i=t.handleRecipeTypeSelect,o=t.selectedRecipes,s=t.container,l=t.chartType,c=t.byCompanyClick,p=t.onRecipeSelectAll;return d.default.createElement("div",{className:"four-r"},d.default.createElement(y.default,{recipeTypes:n[e].menu_recipe_types||[],handleSelect:i,selectedTypeId:r.selectedTypeId,visible:!u().isEmpty(n[e]["4r_menu_recipe_by_type_company"])}),d.default.createElement(h.default,(0,a.default)({data:o,container:s,type:l,onDataClick:function(t){return c(t.point.recipeId,t.point.name)},widthRatio:.85,heightRatio:.4},this.props)),d.default.createElement(m.default,(0,a.default)({widget_id:r.id,data:o,emptyDataMessage:"",container:s,onRecipeSelectAll:p,selectAllChecked:r.fourRTableSelectAllChecked,type:l,widthRatio:.85,heightRatio:.3,onCellClick:function(t){return c(t.original.CorporateRecipeId,t.original.Name)}},this.props)))}}]),p}(d.Component);const v=(0,p.connect)((function(t){return{selectedRecipes:t.four_r.selectedRecipes}}),{setSelectedRecipes:f.setSelectedRecipes})(g)},2434:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(8661),d=n(533),p=n(966),f=n(968),h=n(2262);var m=function(t){(0,s.default)(p,t);var e,n,d=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=d.call(this,t)).handleRecipeChange=e.handleRecipeChange.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"handleRecipeChange",value:function(t,e){var n=e.currentTarget.checked,a=t.CorporateRecipeId;this.props.updatedSelectedRecipes(a,n)}},{key:"render",value:function(){var t=this,e=this.props,n=e.onCellClick,r=e.data.every((function(t){return t.checked})),i=[{Header:u.default.createElement("input",{type:"checkbox",id:"scales",name:"scales",checked:this.props.selectAllChecked&&r,onChange:function(e){return t.props.onRecipeSelectAll(e)}}),accessor:"",maxWidth:50,minWidth:50,sortable:!1,Cell:function(e){return u.default.createElement("div",{style:{textAlign:"center",zIndex:1e3}},u.default.createElement("input",{type:"checkbox",id:"scales",name:"scales",checked:e.original.checked,onChange:t.handleRecipeChange.bind(null,e.original)}))}},{Header:"Recipe Name",accessor:"Name",minWidth:150,Cell:function(t){return u.default.createElement("div",{onClick:function(){return n(t)}},t.value)}},{Header:"Quantity Sold",accessor:"QuantitySold",maxWidth:150,Cell:function(t){return u.default.createElement("div",{onClick:function(){return n(t)},style:{textAlign:"right"}},t.value)}},{Header:"Margin",id:"margin",accessor:function(t){return t.MarginPercent?t.MarginPercent.Value:0},Cell:function(t){return u.default.createElement("div",{onClick:function(){return n(t)},style:{textAlign:"right"}},t.original.MarginPercent?t.original.MarginPercent.FormattedValue:0)},maxWidth:150},{Header:"Sale Price",id:"salePrice",accessor:function(t){return Number((t.GrossPrice.Value/t.QuantitySold).toFixed(2))||0},Cell:function(t){return u.default.createElement("div",{onClick:function(){return n(t)},style:{textAlign:"right"}},(0,f.formatIntoDollars)(Number((t.original.GrossPrice.Value/t.original.QuantitySold).toFixed(2))||0))},maxWidth:150}];return u.default.createElement(h.default,(0,a.default)({columns:i,data:this.props.data},this.props))}}]),p}(u.Component);m.defaultProps={},m.propTypes={};const y=(0,d.connect)((function(t){return{reports:t.reports,selectedRecipes:t.four_r.selectedRecipes}}),{setSelectedRecipes:p.setSelectedRecipes,updatedSelectedRecipes:p.updatedSelectedRecipes})(m)},3661:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>I});var a=n(2122),r=n(6156),i=n(6610),o=n(5991),s=n(3349),l=n(379),c=n(6070),u=n(7608),d=n(6486),p=n.n(d),f=n(8661),h=n(533),m=n(1271),y=n(968),g=n(381),v=n.n(g),_=n(3966),b=n(6827),C=n(5677),D=n(299),k=n(5594),E=n(1826);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=function(t){(0,l.default)(d,t);var e,n,r=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,u.default)(e);if(n){var r=(0,u.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,c.default)(this,t)});function d(t){var e;return(0,i.default)(this,d),(e=r.call(this,t)).renderChart=e.renderChart.bind((0,s.default)(e)),e.wrapChart=e.wrapChart.bind((0,s.default)(e)),e.getChart=e.getChart.bind((0,s.default)(e)),e.drilldown=e.drilldown.bind((0,s.default)(e)),e.fetchChartData=e.fetchChartData.bind((0,s.default)(e)),e.params=e.params.bind((0,s.default)(e)),e.unit_ids=e.unit_ids.bind((0,s.default)(e)),e.byCompanyClick=e.byCompanyClick.bind((0,s.default)(e)),e.byCompanyParams=e.byCompanyParams.bind((0,s.default)(e)),e.byDivisionParams=e.byDivisionParams.bind((0,s.default)(e)),e.companyReportSuccess=e.companyReportSuccess.bind((0,s.default)(e)),e.handleRecipeTypeSelect=e.handleRecipeTypeSelect.bind((0,s.default)(e)),e.byDivisionsClick=e.byDivisionsClick.bind((0,s.default)(e)),e.byUnitsClick=e.byUnitsClick.bind((0,s.default)(e)),e.trendParams=e.trendParams.bind((0,s.default)(e)),e.onRecipeSelectAll=e.onRecipeSelectAll.bind((0,s.default)(e)),e.showCompanyTrendClick=e.showCompanyTrendClick.bind((0,s.default)(e)),e.showDivisionTrendClick=e.showDivisionTrendClick.bind((0,s.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,s.default)(e)),e.goToInitialChart=e.goToInitialChart.bind((0,s.default)(e)),e}return(0,o.default)(d,[{key:"componentDidMount",value:function(){var t=this.props,e=t.id,n=t.company,a=t.fullscreen,r=n.group_id;a||(this.props.pushHistory(e,"4r_menu_recipe_by_type_company","4r Chart"),this.props.setChartType(e,"4r_menu_recipe_by_type_company"),p().isEmpty(n.locations)?this.props.setReportAttribute(e,{fetchingData:!0}):this.props.fetchReport(this.props.id,"4r_menu_recipe_by_type_company",this.byCompanyParams()),this.props.fetchReport(this.props.id,"menu_recipe_types","?unitId=".concat(r),!1),this.props.setWidgetState(e,{companyRecipeIndex:0,selectedRecipes:[],fourRTableSelectAllChecked:!0}))}},{key:"UNSAFE_componentWillUpdate",value:function(t){var e=this.props.id,n=t.dashboard.fullscreenOpen,a=t.byInvoiceDate,r=this.props.byInvoiceDate!==a,i=this.widget(t).drillUp,o=this.props.dashboard.activeWidget?this.props.dashboard.activeWidget.id:null,s=!n&&this.props.dashboard.fullscreenOpen&&this.props.dashboard.updatedInFullscreen&&this.props.id!==o,l=this.props.startDate!==t.startDate||this.props.endDate!==t.endDate,c=!p().isEqual(this.props.company.locations,t.company.locations),u=!p().isEqual(this.widget(this.props).chartType,this.widget(t).chartType)&&i;if(!t.fullscreen){if(c&&(this.goToInitialChart(t),this.props.fetchReport(this.props.id,"4r_menu_recipe_by_type_company",this.byCompanyParams(t))),(l||u||s||r)&&(this.props.fetchReport(this.props.id,this.widget(t).chartType,this.params(t)),this.props.setWidgetState(e,{drillUp:!1})),this.companyReportSuccess(t)){var d,f,h=(null!==(d=null==t||null===(f=t.reports[e])||void 0===f?void 0:f["4r_menu_recipe_by_type_company"])&&void 0!==d?d:{}).RecipeTypes,m=void 0===h?{}:h,y=p().isEmpty(m)?{}:m[0];this.props.setWidgetState(e,{recipeType:y,selectedTypeId:y.RecipeTypeId})}if(!p().isEqual(this.widget().recipeType,this.widget(t).recipeType)){var g=p().isEmpty(this.widget(t).recipeType)?[]:this.mapSelectedRecipes(this.widget(t).recipeType.Recipes||[]);this.props.setWidgetState(e,{selectedRecipes:g})}}}},{key:"mapSelectedRecipes",value:function(t){return t.map((function(t){return R(R({},t),{},{checked:!0})}))}},{key:"companyReportSuccess",value:function(t){var e,n,a=this.props,r=a.id;if(!a.reports[r])return!1;var i=null===(e=this.props.reports[r])||void 0===e?void 0:e["4r_menu_recipe_by_type_company"],o=null===(n=t.reports[r])||void 0===n?void 0:n["4r_menu_recipe_by_type_company"];return!p().isEqual(i,o)}},{key:"handleRecipeTypeSelect",value:function(t){var e,n=this.props,a=n.reports,r=n.id,i=t.target.value,o=null===(e=a[r]["4r_menu_recipe_by_type_company"])||void 0===e?void 0:e.RecipeTypes.find((function(t){return t.RecipeTypeId===i})),s={selectedTypeId:i,recipeType:o};this.props.setWidgetState(r,s)}},{key:"params",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;switch(this.widget(t).chartType){case"4r_menu_recipe_by_type_company":return this.byCompanyParams(t);case"4r_menu_recipe_by_divisions":return this.byDivisionParams(t);case"4r_menu_recipe_by_units":return this.byUnitsParams(t);case"4r_menu_recipe_trend_by_unit":return this.trendParams(t);case"4r_menu_recipe_trend_by_company":return this.byDivisionParams(t);case"4r_menu_recipe_trend_by_division":return this.byUnitsParams(t);default:return""}}},{key:"unit_ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.division;return p().isEmpty(n)?t.company.locations.filter((function(t){return"location"===t.type&&t.checked})).map((function(t){return t.unit_id})):t.company.locations.filter((function(t){return"location"===t.type&&t.checked&&t.region===n})).map((function(t){return t.unit_id}))}},{key:"fetchChartData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=encodeURIComponent(this.widget().category);this.props.fetchReport(this.props.id,t,"?category=".concat(n).concat(this.getDateParams()).concat(e))}},{key:"widget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.id,n=t.widgets;return n.find((function(t){return t.id===e}))}},{key:"getDateParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.reports,n=e.startDate,a=e.endDate;return"&startDate=".concat(v()(n).format("MM/DD/YYYY"),"&endDate=").concat(v()(a).format("MM/DD/YYYY"))}},{key:"wrapChart",value:function(t){return f.default.createElement("div",{className:"fruit-main-chart"},t)}},{key:"renderChart",value:function(){var t=this.widget().chartType,e=t.split("_"),n="table"===e[e.length-1],a=this.getChart(t);return n?a:this.wrapChart(a)}},{key:"getChart",value:function(t){var e=this,n=this.props,r=n.reports,i=n.id,o="chart-".concat(i);switch(t){case"4r_menu_recipe_by_type_company":var s=this.widget(),l=s.selectedRecipes;return f.default.createElement(C.default,(0,a.default)({id:i,reports:r,widget:s,initialSelectedRecipes:l,handleRecipeTypeSelect:this.handleRecipeTypeSelect,byCompanyClick:this.byCompanyClick,container:o,chartType:t,onRecipeSelectAll:this.onRecipeSelectAll},this.props));case"4r_menu_recipe_by_divisions":return f.default.createElement("div",null,f.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:this.showCompanyTrendClick},"Show Company Trend"),f.default.createElement(b.default,(0,a.default)({container:o,type:t,onDataClick:function(t){return e.byDivisionsClick(t.point.name)},widthRatio:.85,heightRatio:.55},this.props)));case"4r_menu_recipe_by_units":return f.default.createElement("div",null,f.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:this.showDivisionTrendClick},"Show Division Trend"),f.default.createElement(k.default,(0,a.default)({container:o,type:t,onDataClick:this.byUnitsClick,widthRatio:.85,heightRatio:.55},this.props)));case"4r_menu_recipe_trend_by_unit":return f.default.createElement("div",null,f.default.createElement(D.default,(0,a.default)({title:this.widget().recipeName,container:o,type:t,widthRatio:.85,heightRatio:.5},this.props)),f.default.createElement(E.default,(0,a.default)({data:r[i]["4r_menu_recipe_trend_by_unit"],container:o,type:t,widthRatio:.85},this.props)));case"4r_menu_recipe_trend_by_company":return f.default.createElement("div",null,f.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.props.setChartType(e.props.id,"4r_menu_recipe_by_divisions")}},"Show Division Bar Chart"),f.default.createElement(D.default,(0,a.default)({title:this.widget().recipeName,container:o,type:t,widthRatio:.85,heightRatio:.5,data:r[i]["4r_menu_recipe_trend_by_company"]},this.props)),f.default.createElement(E.default,(0,a.default)({data:r[i]["4r_menu_recipe_trend_by_company"],container:o,type:t,widthRatio:.85},this.props)));case"4r_menu_recipe_trend_by_division":return f.default.createElement("div",null,f.default.createElement("button",{className:"btn btn-small btn-primary btn-toggle",onClick:function(){return e.props.setChartType(e.props.id,"4r_menu_recipe_by_units")}},"Show Division Bar Chart"),f.default.createElement(D.default,(0,a.default)({title:this.widget().recipeName,container:o,type:t,widthRatio:.85,heightRatio:.5,data:r[i]["4r_menu_recipe_trend_by_division"]},this.props)),f.default.createElement(E.default,(0,a.default)({data:r[i]["4r_menu_recipe_trend_by_division"],container:o,type:t,widthRatio:.85},this.props)));default:return f.default.createElement("div",null,"Whoops!")}}},{key:"drilldown",value:function(t,e){var n=this.props.id;this.props.onExpandClick(n),this.props.setChartType(n,t),this.props.pushHistory(n,t,e)}},{key:"byCompanyParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return"?units=".concat(this.unit_ids(t)).concat(this.getDateParams(t))}},{key:"byCompanyClick",value:function(t,e){var n=this,a=this.props,r=a.id,i=a.company;if(this.props.setWidgetState(r,{recipeId:t,recipeName:e}),1===(0,y.selectedUnits)(i.locations).length)return this.recipeId=t,void this.handleOneUnitSelected();1!==(0,y.selectedDivisions)(i.locations).length?(this.props.fetchReport(this.props.id,"4r_menu_recipe_by_divisions",this.byDivisionParams(this.props,t)),setTimeout((function(){n.drilldown("4r_menu_recipe_by_divisions",e)}),100)):this.handleOneDivisionSelected()}},{key:"handleOneDivisionSelected",value:function(){var t=(0,y.selectedDivisions)(this.props.company.locations)[0];this.byDivisionsClick(t.name)}},{key:"handleOneUnitSelected",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.company.locations,n=(0,y.selectedUnits)(e)[0],a=n.name,r=this.props.id;this.props.fetchReport(this.props.id,"4r_menu_recipe_trend_by_unit",this.trendParams(this.props,n.unit_id)),setTimeout((function(){t.props.setWidgetState(r,{unitId:n.unit_id}),t.drilldown("4r_menu_recipe_trend_by_unit",a)}),100)}},{key:"byDivisionParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||this.widget().recipeId;return"?GroupRecipeId=".concat(n).concat(this.getDateParams(t),"&units=").concat(this.unit_ids(t))}},{key:"byDivisionsClick",value:function(t){var e=this,n=this.props,a=n.id,r=n.company.locations.filter((function(e){return e.region===t}));this.props.setWidgetState(a,{divisionName:t}),1!==(0,y.selectedUnits)(r).length?(this.props.fetchReport(this.props.id,"4r_menu_recipe_by_units",this.byUnitsParams(this.props,t)),setTimeout((function(){e.drilldown("4r_menu_recipe_by_units",t)}),100)):this.handleOneUnitSelected(r)}},{key:"byUnitsParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().divisionName,n=this.widget(),a=n.recipeId,r=t.company.locations,i=r.filter((function(t){return t.checked&&t.region===e})).map((function(t){return t.unit_id}));return console.log(a),"?GroupRecipeId=".concat(a).concat(this.getDateParams(t),"&units=").concat(i)}},{key:"byUnitsClick",value:function(t){var e=this,n=t.point.name,a=this.props.id;this.props.fetchReport(this.props.id,"4r_menu_recipe_trend_by_unit",this.trendParams(this.props,t.point.id)),setTimeout((function(){e.props.setWidgetState(a,{unitId:t.point.id}),e.drilldown("4r_menu_recipe_trend_by_unit",n)}),100)}},{key:"trendParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().unitId,n=this.widget(),a=n.recipeId;return p().isEmpty(a)&&this.recipeId&&(a=this.recipeId),"?GroupRecipeId=".concat(a).concat(this.getDateParams(t),"&units=").concat(e)}},{key:"onRecipeSelectAll",value:function(t){var e=t.target.checked,n=this.widget().selectedRecipes.map((function(t){return R(R({},t),{},{checked:e})}));this.props.setWidgetState(this.props.id,{fourRTableSelectAllChecked:e,selectedRecipes:n})}},{key:"showCompanyTrendClick",value:function(){var t=this;this.props.fetchReport(this.props.id,"4r_menu_recipe_trend_by_company",this.byDivisionParams()),setTimeout((function(){t.props.setChartType(t.props.id,"4r_menu_recipe_trend_by_company")}),100)}},{key:"showDivisionTrendClick",value:function(){var t=this;this.props.fetchReport(this.props.id,"4r_menu_recipe_trend_by_division",this.byDivisionParams()),setTimeout((function(){t.props.setChartType(t.props.id,"4r_menu_recipe_trend_by_division")}),100)}},{key:"onCompressClick",value:function(){this.goToInitialChart(),this.props.onCompressClick()}},{key:"goToInitialChart",value:function(){var t=this.props.id;this.props.setChartType(t,"4r_menu_recipe_by_type_company"),this.props.sliceHistory(t,-1),this.props.pushHistory(t,"4r_menu_recipe_by_type_company","4r Chart")}},{key:"render",value:function(){var t=this.widget().chartType;return t?f.default.createElement(_.default,(0,a.default)({title:"4R Widget",type:t,shouldFetch:!1,history:this.props.history},this.props,{onCompressClick:this.onCompressClick}),this.renderChart()):f.default.createElement("div",null)}}]),d}(f.Component);const I=(0,h.connect)((function(t){return{widgets:t.widgets.widgets,reports:t.reports,startDate:t.reports.startDate,endDate:t.reports.endDate,company:t.company,dashboard:t.dashboard,byInvoiceDate:t.widget_settings.four_r.byInvoiceDate}}),{setDrilldownIndex:m.setDrilldownIndex,setReportAttribute:m.setReportAttribute,fetchReport:m.fetchReport,pushHistory:m.pushHistory,sliceHistory:m.sliceHistory,setChartType:m.setChartType,setCompanyData:m.setCompanyData,setWidgetState:m.setWidgetState})(P)},6432:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(8661);const r=function(t){var e=t.recipeTypes,n=t.handleSelect,r=t.selectedTypeId;return t.visible?a.default.createElement("div",{className:"gl-container"},a.default.createElement("label",{htmlFor:"gl-selector"},"Recipe Type"),a.default.createElement("select",{id:"gl-selector",onChange:n,value:r},e.map((function(t){return a.default.createElement("option",{value:t.CorporateRecipeUsageTypeID,key:t.CorporateRecipeUsageTypeID},t.Name)})))):a.default.createElement("div",null)}},4981:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(8661);const r=function(t){var e=t.options,n=t.handleSelect,r=t.selected,i=t.title;return a.default.createElement("div",{className:"gl-container",style:{alignSelf:"flex-end",marginTop:"-2em"}},a.default.createElement("label",{htmlFor:"gl-selector"},i),a.default.createElement("select",{id:"gl-selector",onChange:n,value:r},e.map((function(t){return a.default.createElement("option",{value:t,key:t},t)}))))}},299:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>C});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(381),p=n.n(d),f=n(5697),h=n.n(f),m=n(8661),y=n(533),g=n(968),v=n(3203);function _(t,e,n){return u().isEmpty(t)?{}:{chart:{zoomType:"xy"},title:{text:"".concat(e||""," Trend")},xAxis:[{categories:t.map((function(t){return p()(Date.parse(t.EndDate)).format("MM/DD/YYYY")})),crosshair:!0}],yAxis:[{labels:{},title:{text:"Quantity Sold"}},{title:{text:"Cost Per Plate"},labels:{},opposite:!0}],tooltip:{shared:!0,formatter:function(){return"<b>Date:<b><br>".concat(this.x,"<br>")+"<b>Cost Per Plate:<b>"+"<br>".concat((0,g.formatIntoDollars)(this.points[0].y),"<br>")+"<br><b>Quantity Sold:<b>"+"<br>".concat(this.points[1].y)}},series:[{name:"Cost Per Plate",type:"spline",yAxis:1,data:t.map((function(t){return{y:t.NetCost.Value/t.QuantitySold||0,className:"no-pointer"}}))},{name:"Quantity Sold",type:"column",data:t.map((function(t){return{y:t.QuantitySold,className:"no-pointer"}}))}]}}var b=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type,i=t.title;return m.default.createElement(v.default,(0,a.default)({dataIsPresent:!u().isEmpty(e[n][r]),config:_(e[n][r],i),modules:[],theme:["#50B432","#ED561B","#33A8FF","#64E572","#6AF9C4"],fullscreenHeightRatio:.7},this.props))}}]),d}(m.Component);b.defaultProps={widthRatio:.7,heightRatio:.7},b.propTypes={container:h().string.isRequired};const C=(0,y.connect)((function(t){return{reports:t.reports}}))(b)},1826:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(381),u=n.n(c),d=n(8661),p=n(533),f=n(968),h=n(2262);var m=function(t){(0,o.default)(p,t);var e,n,c=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function p(){return(0,r.default)(this,p),c.apply(this,arguments)}return(0,i.default)(p,[{key:"render",value:function(){var t=[{Header:"Week Ending",accessor:"EndDate",Cell:function(t){return u()(Date.parse(t.original.EndDate)).format("MM/DD/YYYY")}},{Header:"Quantity Sold",accessor:"QuantitySold",Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},t.original.QuantitySold||0)}},{Header:"Sale Price",id:"salePrice",accessor:function(t){return t.PurchasePrice?t.PurchasePrice.Value:0},Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},(0,f.formatIntoDollars)(t.original.PurchasePrice?t.original.PurchasePrice.Value:0))}},{Header:"Net Sales",id:"netSales",accessor:function(t){return t.GrossPrice?t.GrossPrice.Value:0},Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},(0,f.formatIntoDollars)(t.original.GrossPrice?t.original.GrossPrice.Value:0))}},{Header:"Margin $/Item",id:"marginDollar",accessor:function(t){return t.MarginDollars?t.MarginDollars.Value:0},Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},t.original.MarginDollars?t.original.MarginDollars.FormattedValue:0)}},{Header:"Margin %/Item",id:"marginPercent",accessor:function(t){return t.MarginPercent?t.MarginPercent.Value:0},Cell:function(t){return d.default.createElement("div",{style:{textAlign:"right"}},t.original.MarginPercent?t.original.MarginPercent.FormattedValue:0)}}];return d.default.createElement(h.default,(0,a.default)({columns:t,data:this.props.data,defaultPageSize:13,showPagination:!1},this.props))}}]),p}(d.Component);m.defaultProps={},m.propTypes={};const y=(0,p.connect)((function(t){return{reports:t.reports}}))(m)},5594:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(5111),d=n.n(u),p=n(6486),f=n.n(p),h=n(5697),m=n.n(h),y=n(8661),g=n(533),v=n(968),_=n(3203),b=n(4981);var C=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).state={selected:"Margin"},e.buildConfig=e.buildConfig.bind((0,o.default)(e)),e.handleSelect=e.handleSelect.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"handleSelect",value:function(t){this.setState({selected:t.target.value})}},{key:"buildConfig",value:function(t){var e=this;if(f().isEmpty(t))return{};var n=t.map((function(t){var e=t.UnitName,n=t.UnitId,a=new RegExp(n,"g"),r=e.replace(a,"");return"".concat(n,"<br/>").concat(r)})),a=this.state.selected;return{force:!0,chart:{type:"column"},title:{text:""},xAxis:{categories:n,labels:{style:{}},title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Amount ($)"}},tooltip:{enabled:!0,formatter:function(){var t=this.point,e=t.marginPercent,n=t.costPercent,a=t.percentType,r="Margin"===a?e:n;return"<b>".concat(this.series.name,":<b>")+"<br>".concat((0,v.formatIntoDollars)(this.y),"<br>")+"<br>"+"<b>".concat(a," Percent:<b>")+"<br>".concat(r)}},plotOptions:{bar:{dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{data:t.map((function(t){return t.Recipe?{y:t.Recipe.GrossPrice.Value,name:t.UnitName,id:t.UnitId,marginPercent:t.Recipe.MarginPercent?t.Recipe.MarginPercent.FormattedValue:"0%",costPercent:t.Recipe.FoodCostPercent?t.Recipe.FoodCostPercent.FormattedValue:"0%",percentType:a}:{y:0,name:t.UnitName,id:t.UnitId,marginPercent:"0%"}})),name:"Sales"},{data:t.map((function(t){return t.Recipe?{y:"Margin"===e.state.selected?t.Recipe.Impact.Value:t.Recipe.NetCost.Value,name:t.UnitName,id:t.UnitId,marginPercent:t.Recipe.MarginPercent?t.Recipe.MarginPercent.FormattedValue:"0%",costPercent:t.Recipe.FoodCostPercent?t.Recipe.FoodCostPercent.FormattedValue:"0%",percentType:a}:{y:0,name:t.UnitName,id:t.UnitId,marginPercent:"0%"}})),name:this.state.selected}]}}},{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type;return y.default.createElement("div",{className:"spend-by-week"},y.default.createElement(b.default,{options:["Margin","Cost"],handleSelect:this.handleSelect,selected:this.state.selected}),y.default.createElement(_.default,(0,a.default)({dataIsPresent:!f().isEmpty(e[n][r]),config:this.buildConfig(e[n][r]),modules:[d()],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),p}(y.Component);C.defaultProps={widthRatio:.7,heightRatio:.7},C.propTypes={container:m().string.isRequired};const D=(0,g.connect)((function(t){return{reports:t.reports}}))(C)},5462:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(6486),u=n.n(c),d=n(5697),p=n.n(d),f=n(8661),h=n(533),m=n(968),y=n(3203);function g(t,e){return t?{chart:{type:"pie"},title:{text:""},subtitle:{text:""},plotOptions:{pie:{dataLabels:{enabled:!0,formatter:function(){return"".concat(this.point.x,"<br>").concat((0,m.formatIntoDollars)(this.y))}}}},tooltip:{formatter:function(){return e?"<b>".concat(this.point.x,"</b>")+"<br>".concat((0,m.formatIntoDollars)(this.y)):"<b>".concat(this.point.x,"</b>")+"<br>".concat((0,m.formatIntoDollars)(this.y),"<br><b>Units</b><br>").concat(this.point.locations.map((function(t){return"<span>#".concat(t.unit_id," ").concat(t.name,"   ").concat((0,m.formatIntoDollars)(t.amount)||"","</span>")})).join("<br>"))}},series:[{name:"GL Spend",colorByPoint:!0,data:t.map((function(t){return{x:t.gl_name,y:parseFloat(t.amount),locations:t.locations}})).sort((function(t,e){return t.y-e.y}))}]}:{}}var v=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type,i=t.fromByUnit,o=e[n][r];return f.default.createElement(y.default,(0,a.default)({dataIsPresent:!u().isEmpty(e[n][r]),config:g(o,i),modules:[],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),d}(f.Component);v.defaultProps={widthRatio:.7,heightRatio:.7},v.propTypes={container:p().string.isRequired};const _=(0,h.connect)((function(t){return{reports:t.reports}}))(v)},4823:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(6156),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(381),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(2262);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b=function(t){return d().isEmpty(t)?"":f()(t).format("MM/DD/YYYY")},C=function(t){(0,s.default)(u,t);var e,n,a=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function u(t){var e;return(0,r.default)(this,u),(e=a.call(this,t)).formatData=e.formatData.bind((0,o.default)(e)),e}return(0,i.default)(u,[{key:"formatData",value:function(){var t=this.props,e=t.id,n=t.reports[e].invoices_by_vendor_gl;return d().isEmpty(n)?[]:n.map((function(t){var e=t.amount;return _(_({},t),{},{amount:parseFloat(e)})}))}},{key:"imageLink",value:function(t){return t?h.default.createElement("a",{href:t,target:"_blank"},"View Image"):h.default.createElement("div",null)}},{key:"render",value:function(){var t=this,e=[{Header:"Invoice Number",accessor:"invoiceNumber"},{Header:"Invoice Date",accessor:"invoiceDate",Cell:function(t){return b(t.row.invoiceDate)}},{Header:"Submitted Date",accessor:"submittedDate",Cell:function(t){return b(t.row.submittedDate)}},{Header:"Check Date",accessor:"checkDate",Cell:function(t){return b(t.row.checkDate)}},{Header:"Check Number",accessor:"checkNumber"},{Header:"Terms",accessor:"terms"},{Header:"Amount",accessor:"amount",Cell:function(t){return h.default.createElement("div",{style:{textAlign:"right"}},(0,y.formatIntoDollars)(t.row.amount))}},{Header:"Image",accessor:"imageLink",Cell:function(e){return t.imageLink(e.row.imageLink)}}],n=this.props,a=n.id,r=n.widgets,i=d().find(r,{id:a}).name,o=this.props.widget_settings[i].byInvoiceDate?"invoiceDate":"submittedDate";return h.default.createElement(g.default,{columns:e,data:this.formatData(),onDataClick:this.props.onDataClick,defaultSorted:[{id:o,desc:!1}],defaultPageSize:this.props.showPagination?20:this.formatData().length,showPagination:this.props.showPagination,printView:this.props.printView})}}]),u}(h.Component);C.defaultProps={},C.propTypes={};const D=(0,m.connect)((function(t){return{reports:t.reports,widget_settings:t.widget_settings}}))(C)},7650:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);function v(t){return{chart:{type:"bar"},title:{text:""},xAxis:{categories:t.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Amount ($)"}},tooltip:{enabled:!1},plotOptions:{bar:{animation:!1,dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{name:"Vendors",data:t.map((function(t){return t.amount})),dataLabels:{formatter:function(){return(0,y.formatIntoDollars)(this.y)}}}]}}var _=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).state={select:10},e.handleSelectChange=e.handleSelectChange.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"handleSelectChange",value:function(t){this.setState({select:t.target.value})}},{key:"render",value:function(){var t=this.props,e=t.reports,n=t.id,r=t.type,i=this.state.select,o=e[n][r]||[],s=Math.min(o.length,i),l=o.slice(0,s);return h.default.createElement("div",null,h.default.createElement("div",{className:"num-vendors-container"},h.default.createElement("label",{htmlFor:"num-vendors"},"Number of Vendors"),h.default.createElement("select",{id:"num-vendors",defaultValue:"10",onChange:this.handleSelectChange},h.default.createElement("option",{value:"1"},"1"),h.default.createElement("option",{value:"3"},"3"),h.default.createElement("option",{value:"5"},"5"),h.default.createElement("option",{value:"10"},"10"),h.default.createElement("option",{value:"20"},"20"),h.default.createElement("option",{value:o.length},"All Vendors"))),h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(l),config:v(l),theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),p}(h.Component);_.defaultProps={widthRatio:.7,heightRatio:.7},_.propTypes={container:f().string.isRequired};const b=(0,m.connect)((function(t){return{reports:t.reports}}))(_)},331:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>b});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(5697),f=n.n(p),h=n(8661),m=n(533),y=n(968),g=n(3203);function v(t){if(d().isEmpty(t))return{};var e=t.vendor_spend;return{chart:{type:"bar"},title:{text:""},xAxis:{categories:e.map((function(t){return t.name})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Amount ($)"}},tooltip:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{name:"Vendors",data:e.map((function(t){return t.amount})),dataLabels:{formatter:function(){return(0,y.formatIntoDollars)(this.y)}}}]}}var _=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).state={select:10},e.handleSelectChange=e.handleSelectChange.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"handleSelectChange",value:function(t){this.setState({select:t.target.value})}},{key:"render",value:function(){var t=this.props,e=t.reports[t.id].vendor_spend||[];return h.default.createElement(g.default,(0,a.default)({dataIsPresent:!d().isEmpty(e),config:v(e),theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props))}}]),p}(h.Component);_.defaultProps={widthRatio:.7,heightRatio:.7},_.propTypes={container:f().string.isRequired};const b=(0,m.connect)((function(t){return{reports:t.reports}}))(_)},5650:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>D});var a=n(2122),r=n(6610),i=n(5991),o=n(379),s=n(6070),l=n(7608),c=n(5111),u=n.n(c),d=n(6486),p=n.n(d),f=n(381),h=n.n(f),m=n(5697),y=n.n(m),g=n(8661),v=n(533),_=n(968),b=n(3203);var C=function(t){(0,o.default)(d,t);var e,n,c=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,l.default)(e);if(n){var r=(0,l.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,s.default)(this,t)});function d(){return(0,r.default)(this,d),c.apply(this,arguments)}return(0,i.default)(d,[{key:"render",value:function(){var t,e=this.props,n=e.reports,r=e.id,i=e.type,o=n[r][i].weeks;return g.default.createElement("div",{className:"spend-by-week"},g.default.createElement("div",{className:"sum"},"Total: ",(0,_.formatIntoDollars)(n[r][i].sum||0)),g.default.createElement(b.default,(0,a.default)({dataIsPresent:!p().isEmpty(n[r][i])&&o&&o.length>0,config:(t=o,p().isEmpty(t)&&(t=[]),{chart:{type:"column"},title:{text:""},xAxis:{categories:t.map((function(t){return h()(t.starting_week).format("MM/DD/YYYY")})),title:{text:null}},yAxis:{labels:{overflow:"justify"},title:{text:"Amount ($)"}},tooltip:{enabled:!0,formatter:function(){return(0,_.formatIntoDollars)(this.y)}},plotOptions:{bar:{dataLabels:{enabled:!0}}},credits:{enabled:!1},series:[{name:"Vendors",data:t.map((function(t){return{y:t.amount,id:t.starting_week}}))}],annotations:[{labels:t.filter((function(t){return!t.complete})).map((function(t){return{point:t.starting_week,text:"Partial Week",style:{fontSize:"9px"}}}))}]}),modules:[u()],theme:["#50B432","#ED561B","#64E572","#FF9655","#6AF9C4"]},this.props)))}}]),d}(g.Component);C.defaultProps={widthRatio:.7,heightRatio:.7},C.propTypes={container:y().string.isRequired};const D=(0,v.connect)((function(t){return{reports:t.reports}}))(C)},4535:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w});var a=n(2122),r=n(6610),i=n(5991),o=n(3349),s=n(379),l=n(6070),c=n(7608),u=n(6486),d=n.n(u),p=n(381),f=n.n(p),h=n(8661),m=n(533),y=n(1271),g=n(3966),v=n(5462),_=n(4823),b=n(7650),C=n(331),D=n(5650);var k={top_vendor_spend_by_company:"top_vendor_spend_by_company",vendor_spend:"vendor_spend",vendor_spend_by_week:"vendor_spend_by_week",gl_spend:"gl_subcategory_spend"},E=function(t){(0,s.default)(p,t);var e,n,u=(e=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.default)(e);if(n){var r=(0,c.default)(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return(0,l.default)(this,t)});function p(t){var e;return(0,r.default)(this,p),(e=u.call(this,t)).renderChart=e.renderChart.bind((0,o.default)(e)),e.wrapChart=e.wrapChart.bind((0,o.default)(e)),e.getChart=e.getChart.bind((0,o.default)(e)),e.drilldown=e.drilldown.bind((0,o.default)(e)),e.fetchChartData=e.fetchChartData.bind((0,o.default)(e)),e.handleMultiUnitClick=e.handleMultiUnitClick.bind((0,o.default)(e)),e.handleByUnitClick=e.handleByUnitClick.bind((0,o.default)(e)),e.handleByWeekClick=e.handleByWeekClick.bind((0,o.default)(e)),e.unit_ids=e.unit_ids.bind((0,o.default)(e)),e.handleGlClick=e.handleGlClick.bind((0,o.default)(e)),e.onCompressClick=e.onCompressClick.bind((0,o.default)(e)),e.goToInitialChart=e.goToInitialChart.bind((0,o.default)(e)),e}return(0,i.default)(p,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props,e=t.id;t.fullscreen||(this.props.pushHistory(e,"top_vendor_spend_by_company","top_vendor_spend_by_company"),this.props.setChartType(e,"top_vendor_spend_by_company"),this.props.fetchReport(this.props.id,"top_vendor_spend_by_company",this.multiUnitParams()))}},{key:"UNSAFE_componentWillUpdate",value:function(t){var e=t.id,n=t.dashboard.fullscreenOpen,a=t.byInvoiceDate,r=this.props.byInvoiceDate!==a,i=this.props.dashboard.activeWidget?this.props.dashboard.activeWidget.id:null,o=!n&&this.props.dashboard.fullscreenOpen&&this.props.dashboard.updatedInFullscreen&&this.props.id!==i,s=this.widget(t).drillUp,l=this.props.startDate!==t.startDate||this.props.endDate!==t.endDate,c=!d().isEqual(this.props.company.locations,t.company.locations),u=!d().isEqual(this.widget(this.props).chartType,this.widget(t).chartType)&&s;t.fullscreen||(c&&(this.goToInitialChart(t),"top_vendor_spend_by_company"===this.widget(t).chartType&&this.props.fetchReport(this.props.id,"top_vendor_spend_by_company",this.multiUnitParams(t))),(l||u||o||r)&&(this.props.fetchReport(this.props.id,this.widget(t).chartType,this.params(t)),this.props.setWidgetState(e,{drillUp:!1})))}},{key:"params",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;switch(this.widget(t).chartType){case"top_vendor_spend_by_company":return this.multiUnitParams(t);case"vendor_spend":return this.byUnitParams(t);case"vendor_spend_by_week":return this.byWeekParams(t);case"gl_spend":return this.glParams(t);case"invoices_by_vendor_gl":return this.invoicesParams(t);default:return""}}},{key:"unit_ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return t.company.locations.filter((function(t){return"location"===t.type&&t.checked})).map((function(t){return t.unit_id}))}},{key:"fetchChartData",value:function(t){arguments.length>1&&void 0!==arguments[1]||this.props;var e=this.widget(),n=e.vendor_id;this.props.fetchReport(this.props.id,t,"?unit_ids=".concat(this.unit_ids(),"&vendor_id=").concat(n).concat(this.getDateParams()))}},{key:"widget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.id,n=t.widgets;return n.find((function(t){return t.id===e}))}},{key:"getDateParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.reports,n=e.startDate,a=e.endDate;return"&start_date=".concat(f()(n).format("MM/DD/YYYY"),"&end_date=").concat(f()(a).format("MM/DD/YYYY"))}},{key:"wrapChart",value:function(t){return"invoices_by_vendor_gl"===this.widget().chartType?t:h.default.createElement("div",{className:"fruit-main-chart"},t)}},{key:"renderChart",value:function(){var t=this.widget().chartType,e=t.split("_"),n="table"===e[e.length-1],a=this.getChart(t);return n?a:this.wrapChart(a)}},{key:"getChart",value:function(t){var e=this,n="chart-".concat(this.props.id);switch(t){case"top_vendor_spend_by_company":return h.default.createElement(b.default,(0,a.default)({onDataClick:this.handleMultiUnitClick,container:n,type:t,widthRatio:.85,heightRatio:.5},this.props));case"vendor_spend":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return e.toggleChart("vendor_spend_by_week")}},"Show Vendor Spend By Week"),h.default.createElement(C.default,(0,a.default)({onDataClick:this.handleByUnitClick,container:n,type:t,widthRatio:.85,heightRatio:.55},this.props)));case"vendor_spend_by_week":return h.default.createElement("div",null,h.default.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){return e.toggleChart("vendor_spend")}},"Show Vendor Spend By Unit"),h.default.createElement(D.default,(0,a.default)({onDataClick:this.handleByWeekClick,container:n,type:t,widthRatio:.85,heightRatio:.6},this.props)));case"gl_spend":return h.default.createElement(v.default,(0,a.default)({onDataClick:this.handleGlClick,container:n,type:t,widthRatio:.85,heightRatio:.68,fromByUnit:this.widget().fromByUnit},this.props));case"invoices_by_vendor_gl":return h.default.createElement(_.default,(0,a.default)({container:n,type:t,widthRatio:.85,heightRatio:.75,showPagination:!!this.props.fullscreen},this.props));default:return h.default.createElement("div",null,"Whoops!")}}},{key:"drilldown",value:function(t,e){var n=this;setTimeout((function(){var a=n.props.id;n.props.onExpandClick(a),n.props.setChartType(a,t),n.props.pushHistory(a,t,e)}),100)}},{key:"multiUnitParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return"?unit_ids=".concat(this.unit_ids(t)).concat(this.getDateParams(t))}},{key:"handleMultiUnitClick",value:function(t){var e=this.props,n=e.id,a=e.reports,r=t.point.category,i=a[n].top_vendor_spend_by_company.find((function(t){return t.name===r})).vendor_id;this.props.fetchReport(this.props.id,"vendor_spend","?unit_ids=".concat(this.unit_ids(),"&vendor_id=").concat(i).concat(this.getDateParams())),this.props.setWidgetState(n,{vendor_id:i,vendor_name:r}),this.drilldown("vendor_spend",r)}},{key:"byUnitParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.vendor_id;return"?unit_ids=".concat(this.unit_ids(t),"&vendor_id=").concat(n).concat(this.getDateParams(t))}},{key:"handleByUnitClick",value:function(t){var e=this.props,n=e.id,a=e.reports,r=t.point.category,i=this.widget().vendor_id,o=a[n].vendor_spend.vendor_spend.find((function(t){return t.name===r})).unit_id;this.props.fetchReport(this.props.id,"gl_spend","?unit_ids=".concat([o],"&vendor_id=").concat(i).concat(this.getDateParams())),this.props.setWidgetState(n,{unit_id:o,fromByUnit:!0}),this.drilldown("gl_spend",r)}},{key:"byWeekParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.vendor_id;return"?unit_ids=".concat(this.unit_ids(t),"&vendor_id=").concat(n).concat(this.getDateParams(t))}},{key:"handleByWeekClick",value:function(t){var e=this.widget().vendor_id,n=t.point.category,a=f()(n).format("MM/DD/YYYY"),r=f()(n).add(6,"days").format("MM/DD/YYYY");this.props.fetchReport(this.props.id,"gl_spend","?unit_ids=".concat(this.unit_ids(),"&vendor_id=").concat(e,"&start_date=").concat(a,"&end_date=").concat(r)),this.props.setWidgetState(this.props.id,{fromByUnit:!1,startWeek:a,endWeek:r}),this.drilldown("gl_spend",t.point.category)}},{key:"glParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=this.widget(),n=e.vendor_id,a=e.unit_id,r=e.fromByUnit,i=r?[a]:this.unit_ids(t);return"?unit_ids=".concat(i,"&vendor_id=").concat(n).concat(this.getDateParams(t))}},{key:"handleGlClick",value:function(t){var e=this.props,n=e.id,a=e.reports[n].gl_spend.find((function(e){return e.gl_name===t.point.x})).gl_code;this.props.fetchReport(this.props.id,"invoices_by_vendor_gl",this.invoicesParams(this.props,a)),this.props.setWidgetState(n,{gl_code:a}),this.drilldown("invoices_by_vendor_gl",t.point.x)}},{key:"invoicesParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.widget().gl_code,n=this.widget(),a=n.vendor_id,r=n.unit_id,i=n.fromByUnit,o=n.startWeek,s=n.endWeek,l=[],c="";return i?(l=[r],c=this.getDateParams(t)):(l=this.unit_ids(t),c="&start_date=".concat(o,"&end_date=").concat(s)),"?unit_ids=".concat(l,"&vendor_id=").concat(a,"&gl_code=").concat(e).concat(c)}},{key:"toggleChart",value:function(t){var e=this,n=this.props.id;this.fetchChartData(k[t]),setTimeout((function(){e.props.sliceHistory(n,0),e.props.pushHistory(n,t,e.widget().vendor_name),e.props.setChartType(n,t)}),100)}},{key:"onCompressClick",value:function(){this.goToInitialChart(),this.props.onCompressClick()}},{key:"goToInitialChart",value:function(){var t=this.props.id;this.props.setChartType(t,"top_vendor_spend_by_company"),this.props.sliceHistory(t,-1),this.props.pushHistory(t,"top_vendor_spend_by_company","top_vendor_spend_by_company")}},{key:"render",value:function(){var t=this.widget().chartType;return t?h.default.createElement(g.default,(0,a.default)({title:"Vendor Spend",type:k[t],shouldFetch:!1,history:this.props.history},this.props,{onCompressClick:this.onCompressClick}),this.renderChart()):h.default.createElement("div",null)}}]),p}(h.Component);E.propTypes={};const w=(0,m.connect)((function(t){return{widgets:t.widgets.widgets,reports:t.reports,startDate:t.reports.startDate,endDate:t.reports.endDate,company:t.company,dashboard:t.dashboard,byInvoiceDate:t.widget_settings.vendor_spend.byInvoiceDate}}),{setDrilldownIndex:y.setDrilldownIndex,setReportAttribute:y.setReportAttribute,fetchReport:y.fetchReport,pushHistory:y.pushHistory,sliceHistory:y.sliceHistory,setChartType:y.setChartType,setCompanyData:y.setCompanyData,setWidgetState:y.setWidgetState})(E)},5175:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});const a=n.p+"images/rsi-logo.jpeg"},1599:(t,e,n)=>{var a={"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=i,t.exports=r,r.id=1599}}]);
//# sourceMappingURL=default.bundle.js.map